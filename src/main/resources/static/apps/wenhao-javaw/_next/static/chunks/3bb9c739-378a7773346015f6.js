"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[526],{7562:function(t,e,n){n.d(e,{D_:function(){return vg},bS:function(){return vm},oN:function(){return vp}});var i,r,o,a,s,l,u,c,h,d,f,p,g,m,y,v,b,_,x,E,w=n(6006),T=Object.defineProperty,S=(t,e,n)=>e in t?T(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,O=(t,e,n)=>(S(t,"symbol"!=typeof e?e+"":e,n),n),M=((n3=M||{}).RENDER_FINISHED="render-finished",n3.RESIZE="chart-resize",n3.MOUSEOVER="chart-mouseover",n3.MOUSEOUT="chart-mouseout",n3),A=((n5=A||{}).SHOW="show-modal",n5.HIDE="hide-modal",n5),C=((n4=C||{}).UPDATE="model-update",n4),D=((n6=D||{}).SHOW_OVERFLOW_MENU="show-toolbar-overflow-menu",n6.HIDE_OVERFLOW_MENU="hide-toolbar-overflow-menu",n6.BUTTON_CLICK="toolbar-button-click",n6.SHOW_TOOLTIP="toolbar-show-tooltip",n6.HIDE_TOOLTIP="toolbar-hide-tooltip",n6),k=((n8=k||{}).UPDATE="zoom-bar-update",n8.SELECTION_START="zoom-bar-selection-start",n8.SELECTION_IN_PROGRESS="zoom-bar-selection-in-progress",n8.SELECTION_END="zoom-bar-selection-end",n8),R=((n7=R||{}).CHANGE="zoom-domain-change",n7),L=((n9=L||{}).CANVAS_ZOOM_IN="canvas-zoom-in",n9.CANVAS_ZOOM_OUT="canvas-zoom-out",n9),N=((it=N||{}).LABEL_MOUSEOVER="axis-label-mouseover",it.LABEL_MOUSEMOVE="axis-label-mousemove",it.LABEL_CLICK="axis-label-click",it.LABEL_MOUSEOUT="axis-label-mouseout",it.LABEL_FOCUS="axis-label-focus",it.LABEL_BLUR="axis-label-blur",it.RENDER_COMPLETE="axis-render-complete",it),P=((ie=P||{}).POINT_MOUSEOVER="scatter-mouseover",ie.POINT_MOUSEMOVE="scatter-mousemove",ie.POINT_CLICK="scatter-click",ie.POINT_MOUSEOUT="scatter-mouseout",ie),I=((ii=I||{}).WORD_MOUSEOVER="wordcloud-word-mouseover",ii.WORD_MOUSEMOVE="wordcloud-word-mousemove",ii.WORD_CLICK="wordcloud-word-click",ii.WORD_MOUSEOUT="wordcloud-word-mouseout",ii),B=((ir=B||{}).SLICE_MOUSEOVER="pie-slice-mouseover",ir.SLICE_MOUSEMOVE="pie-slice-mousemove",ir.SLICE_CLICK="pie-slice-click",ir.SLICE_MOUSEOUT="pie-slice-mouseout",ir),U=((io=U||{}).ARC_MOUSEOVER="gauge-arc-mouseover",io.ARC_MOUSEMOVE="gauge-arc-mousemove",io.ARC_CLICK="gauge-arc-click",io.ARC_MOUSEOUT="gauge-arc-mouseout",io),F=((ia=F||{}).BAR_MOUSEOVER="bar-mouseover",ia.BAR_MOUSEMOVE="bar-mousemove",ia.BAR_CLICK="bar-click",ia.BAR_MOUSEOUT="bar-mouseout",ia),j=((is=j||{}).BOX_MOUSEOVER="box-mouseover",is.BOX_MOUSEMOVE="box-mousemove",is.BOX_CLICK="box-click",is.BOX_MOUSEOUT="box-mouseout",is.OUTLIER_MOUSEOVER="outlier-mouseover",is.OUTLIER_MOUSEMOVE="outlier-mousemove",is.OUTLIER_CLICK="outlier-click",is.OUTLIER_MOUSEOUT="outlier-mouseout",is),H=((il=H||{}).SCATTER_MOUSEOVER="scatter-mouseover",il.SCATTER_MOUSEMOVE="scatter-mousemove",il.SCATTER_CLICK="scatter-click",il.SCATTER_MOUSEOUT="scatter-mouseout",il),$=((iu=$||{}).POINT_MOUSEOVER="scatter-mouseover",iu.POINT_MOUSEMOVE="scatter-mousemove",iu.POINT_CLICK="scatter-click",iu.POINT_MOUSEOUT="scatter-mouseout",iu),z=((ic=z||{}).X_AXIS_MOUSEOVER="radar-x-axis-mouseover",ic.X_AXIS_MOUSEMOVE="radar-x-axis-mousemove",ic.X_AXIS_CLICK="radar-x-axis-click",ic.X_AXIS_MOUSEOUT="radar-x-axis-mouseout",ic),G=((ih=G||{}).NODE_MOUSEOVER="tree-node-mouseover",ih.NODE_CLICK="tree-node-click",ih.NODE_MOUSEOUT="tree-node-mouseout",ih),V=((id=V||{}).LEAF_MOUSEOVER="leaf-mouseover",id.LEAF_MOUSEMOVE="leaf-mousemove",id.LEAF_CLICK="leaf-click",id.LEAF_MOUSEOUT="leaf-mouseout",id),W=((ip=W||{}).SHOW="show-tooltip",ip.MOVE="move-tooltip",ip.HIDE="hide-tooltip",ip),Y=((ig=Y||{}).SHOW="show-threshold",ig.HIDE="hide-threshold",ig),Z=((im=Z||{}).ITEM_HOVER="legend-item-onhover",im.ITEM_CLICK="legend-item-onclick",im.ITEM_MOUSEOUT="legend-item-onmouseout",im.ITEMS_UPDATE="legend-items-update",im),q=((iy=q||{}).CIRCLE_MOUSEOVER="circle-leaf-mouseover",iy.CIRCLE_CLICK="circle-leaf-click",iy.CIRCLE_MOUSEOUT="circle-leaf-mouseout",iy.CIRCLE_MOUSEMOVE="circle-leaf-mousemove",iy),X=((iv=X||{}).NODE_MOUSEOVER="alluvial-node-mouseover",iv.NODE_CLICK="alluvial-node-click",iv.NODE_MOUSEOUT="alluvial-node-mouseout",iv.NODE_MOUSEMOVE="alluvial-node-mousemove",iv.LINE_MOUSEOVER="alluvial-line-mouseover",iv.LINE_CLICK="alluvial-line-click",iv.LINE_MOUSEOUT="alluvial-line-mouseout",iv.LINE_MOUSEMOVE="alluvial-line-mousemove",iv),K=((ib=K||{}).METER_MOUSEOVER="meter-mouseover",ib.METER_CLICK="meter-click",ib.METER_MOUSEOUT="meter-mouseout",ib.METER_MOUSEMOVE="meter-mousemove",ib),Q=((i_=Q||{}).HEATMAP_MOUSEOVER="heatmap-mouseover",i_.HEATMAP_CLICK="heatmap-click",i_.HEATMAP_MOUSEOUT="heatmap-mouseout",i_.HEATMAP_MOUSEMOVE="hetmap-mousemove",i_),J=((ix=J||{}).CHOROPLETH_MOUSEOVER="choropleth-mouseover",ix.CHOROPLETH_CLICK="choropleth-click",ix.CHOROPLETH_MOUSEOUT="choropleth-mouseout",ix.CHOROPLETH_MOUSEMOVE="choropleth-mousemove",ix);let tt=Object.freeze(Object.defineProperty({__proto__:null,Alluvial:X,Area:P,Axis:N,Bar:F,Boxplot:j,CanvasZoom:L,Chart:M,Choropleth:J,CirclePack:q,Gauge:U,Heatmap:Q,Legend:Z,Line:$,Meter:K,Modal:A,Model:C,Pie:B,Radar:z,Scatter:H,Threshold:Y,Toolbar:D,Tooltip:W,Tree:G,Treemap:V,WordCloud:I,ZoomBar:k,ZoomDomain:R},Symbol.toStringTag,{value:"Module"}));var te=((iE=te||{}).HTML="html",iE.SVG="svg",iE),tn=((iw=tn||{}).WHITE="white",iw.G100="g100",iw.G90="g90",iw.G10="g10",iw),ti=((iT=ti||{}).BACKGROUND="background",iT.FILL="fill",iT.STROKE="stroke",iT.TOOLTIP="tooltip",iT),tr=((iS=tr||{}).LEFT="left",iS.RIGHT="right",iS.TOP="top",iS.BOTTOM="bottom",iS),to=((iO=to||{}).GRAPH_VIEW="graph_view",iO.SLIDER_VIEW="slider_view",iO),ta=((iM=ta||{}).END_LINE="end_line",iM.MID_LINE="mid_line",iM.FRONT_LINE="front_line",iM.NONE="none",iM),ts=((iA=ts||{}).VERTICAL="vertical",iA.HORIZONTAL="horizontal",iA),tl=((iC=tl||{}).TIME="time",iC.LINEAR="linear",iC.LOG="log",iC.LABELS="labels",iC.LABELS_RATIO="labels-ratio",iC),tu=((iD=tu||{}).RIGHT="right",iD.LEFT="left",iD.TOP="top",iD.BOTTOM="bottom",iD),tc=((ik=tc||{}).LEFT="left",ik.CENTER="center",ik.RIGHT="right",ik),th=((iR=th||{}).HORIZONTAL="horizontal",iR.VERTICAL="vertical",iR),td=((iL=td||{}).TREE="tree",iL.DENDROGRAM="dendrogram",iL),tf=((iN=tf||{}).ROW="row",iN.COLUMN="column",iN.ROW_REVERSE="row-reverse",iN.COLUMN_REVERSE="column-reverse",iN),tp=((iP=tp||{}).FIXED="fixed",iP.PREFERRED="preferred",iP.STRETCH="stretch",iP),tg=((iI=tg||{}).CENTER="center",iI),tm=((iB=tm||{}).LEFT="left",iB.RIGHT="right",iB),ty=((iU=ty||{}).GRID="grid",iU.VERT_OR_HORIZ="vertOrHoriz",iU.PIE="pie",iU.DONUT="donut",iU),tv=((iF=tv||{}).START="start",iF.MIDDLE="middle",iF.END="end",iF),tb=((ij=tb||{}).BASELINE="baseline",ij.MIDDLE="middle",ij.HANGING="hanging",ij),t_=((iH=t_||{}).SEMI="semi",iH.FULL="full",iH),tx=((i$=tx||{}).UP="up",i$.DOWN="down",i$),tE=((iz=tE||{}).SUCCESS="success",iz.WARNING="warning",iz.DANGER="danger",iz),tw=((iG=tw||{}).ALWAYS="always",iG.AUTO="auto",iG.NEVER="never",iG),tT=((iV=tT||{}).SCATTER="scatter",iV.LINE="line",iV.SIMPLE_BAR="simple-bar",iV.STACKED_BAR="stacked-bar",iV.GROUPED_BAR="grouped-bar",iV.AREA="area",iV.STACKED_AREA="stacked-area",iV),tS=((iW=tS||{}).EXPORT_CSV="Export as CSV",iW.EXPORT_PNG="Export as PNG",iW.EXPORT_JPG="Export as JPG",iW.ZOOM_IN="Zoom in",iW.ZOOM_OUT="Zoom out",iW.RESET_ZOOM="Reset zoom",iW.MAKE_FULLSCREEN="Make fullscreen",iW.EXIT_FULLSCREEN="Exit fullscreen",iW.SHOW_AS_DATATABLE="Show as data-table",iW.CUSTOM="Custom",iW),tO=((iY=tO||{}).LEFT="left",iY.RIGHT="right",iY),tM=((iZ=tM||{}).CHECKBOX="checkbox",iZ.RADIUS="radius",iZ.AREA="area",iZ.SIZE="size",iZ.LINE="line",iZ.QUARTILE="quartile",iZ.ZOOM="zoom",iZ),tA=((iq=tA||{}).LINEAR="linear",iq.QUANTIZE="quantize",iq),tC=((iX=tC||{}).ON="on",iX.AUTO="auto",iX.OFF="off",iX),tD=((iK=tD||{}).DEFAULT="default",iK.HOVERABLE="hoverable",iK),tk=((iQ=tk||{}).geoEqualEarth="geoEqualEarth",iQ.geoAlbers="geoAlbers",iQ.geoConicEqualArea="geoConicEqualArea",iQ.geoConicEquidistant="geoConicEquidistant",iQ.geoEquirectangular="geoEquirectangular",iQ.geoMercator="geoMercator",iQ.geoNaturalEarth1="geoNaturalEarth1",iQ);function tR(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function tL(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function tN(t){let e,n,i;function r(t,i,r=0,o=t.length){if(r<o){if(0!==e(i,i))return o;do{let e=r+o>>>1;0>n(t[e],i)?r=e+1:o=e}while(r<o)}return r}return 2!==t.length?(e=tR,n=(e,n)=>tR(t(e),n),i=(e,n)=>t(e)-n):(e=t===tR||t===tL?t:tP,n=t,i=t),{left:r,center:function(t,e,n=0,o=t.length){let a=r(t,e,n,o-1);return a>n&&i(t[a-1],e)>-i(t[a],e)?a-1:a},right:function(t,i,r=0,o=t.length){if(r<o){if(0!==e(i,i))return o;do{let e=r+o>>>1;0>=n(t[e],i)?r=e+1:o=e}while(r<o)}return r}}}function tP(){return 0}let tI=tN(tR),tB=tI.right;function tU(t,e){let n,i;if(void 0===e)for(let e of t)null!=e&&(void 0===n?e>=e&&(n=i=e):(n>e&&(n=e),i<e&&(i=e)));else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(void 0===n?o>=o&&(n=i=o):(n>o&&(n=o),i<o&&(i=o)))}return[n,i]}tN(function(t){return null===t?NaN:+t}).center;class tF{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){let e=this._partials,n=0;for(let i=0;i<this._n&&i<32;i++){let r=e[i],o=t+r,a=Math.abs(t)<Math.abs(r)?t-(o-r):r-(o-t);a&&(e[n++]=a),t=o}return e[n]=t,this._n=n+1,this}valueOf(){let t=this._partials,e=this._n,n,i,r,o=0;if(e>0){for(o=t[--e];e>0&&(o=(n=o)+(i=t[--e]),!(r=i-(o-n))););e>0&&(r<0&&t[e-1]<0||r>0&&t[e-1]>0)&&(n=o+(i=2*r),i==n-o&&(o=n))}return o}}class tj extends Map{constructor(t,e=t$){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(let[e,n]of t)this.set(e,n)}get(t){return super.get(tH(this,t))}has(t){return super.has(tH(this,t))}set(t,e){return super.set(function({_intern:t,_key:e},n){let i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}(this,t),e)}delete(t){return super.delete(function({_intern:t,_key:e},n){let i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}(this,t))}}function tH({_intern:t,_key:e},n){let i=e(n);return t.has(i)?t.get(i):n}function t$(t){return null!==t&&"object"==typeof t?t.valueOf():t}function tz(t){return t}var tG=Array.prototype.slice;let tV=Math.sqrt(50),tW=Math.sqrt(10),tY=Math.sqrt(2);function tZ(t,e,n){let i,r,o;let a=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(a)),l=a/Math.pow(10,s),u=l>=tV?10:l>=tW?5:l>=tY?2:1;return s<0?(i=Math.round(t*(o=Math.pow(10,-s)/u)),r=Math.round(e*o),i/o<t&&++i,r/o>e&&--r,o=-o):(i=Math.round(t/(o=Math.pow(10,s)*u)),r=Math.round(e/o),i*o<t&&++i,r*o>e&&--r),r<i&&.5<=n&&n<2?tZ(t,e,2*n):[i,r,o]}function tq(t,e,n){if(e=+e,t=+t,!((n=+n)>0))return[];if(t===e)return[t];let i=e<t,[r,o,a]=i?tZ(e,t,n):tZ(t,e,n);if(!(o>=r))return[];let s=o-r+1,l=Array(s);if(i){if(a<0)for(let t=0;t<s;++t)l[t]=-((o-t)/a);else for(let t=0;t<s;++t)l[t]=(o-t)*a}else if(a<0)for(let t=0;t<s;++t)l[t]=-((r+t)/a);else for(let t=0;t<s;++t)l[t]=(r+t)*a;return l}function tX(t,e,n){return tZ(t=+t,e=+e,n=+n)[2]}function tK(t,e,n){e=+e,t=+t,n=+n;let i=e<t,r=i?tX(e,t,n):tX(t,e,n);return(i?-1:1)*(r<0?-(1/r):r)}function tQ(t){return Math.max(1,Math.ceil(Math.log(function(t,e){let n=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&++n;else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(r=+r)>=r&&++n}return n}(t))/Math.LN2)+1)}function tJ(t){return t}function t0(t){return"translate("+t+",0)"}function t1(t){return"translate(0,"+t+")"}function t2(t){return e=>+t(e)}function t3(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function t5(){return!this.__axis}function t4(t,e){var n=[],i=null,r=null,o=6,a=6,s=3,l="u">typeof window&&window.devicePixelRatio>1?0:.5,u=1===t||4===t?-1:1,c=4===t||2===t?"x":"y",h=1===t||3===t?t0:t1;function d(d){var f=i??(e.ticks?e.ticks.apply(e,n):e.domain()),p=r??(e.tickFormat?e.tickFormat.apply(e,n):tJ),g=Math.max(o,0)+s,m=e.range(),y=+m[0]+l,v=+m[m.length-1]+l,b=(e.bandwidth?t3:t2)(e.copy(),l),_=d.selection?d.selection():d,x=_.selectAll(".domain").data([null]),E=_.selectAll(".tick").data(f,e).order(),w=E.exit(),T=E.enter().append("g").attr("class","tick"),S=E.select("line"),O=E.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(T),S=S.merge(T.append("line").attr("stroke","currentColor").attr(c+"2",u*o)),O=O.merge(T.append("text").attr("fill","currentColor").attr(c,u*g).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),d!==_&&(x=x.transition(d),E=E.transition(d),S=S.transition(d),O=O.transition(d),w=w.transition(d).attr("opacity",1e-6).attr("transform",function(t){return isFinite(t=b(t))?h(t+l):this.getAttribute("transform")}),T.attr("opacity",1e-6).attr("transform",function(t){var e=this.parentNode.__axis;return h((e&&isFinite(e=e(t))?e:b(t))+l)})),w.remove(),x.attr("d",4===t||2===t?a?"M"+u*a+","+y+"H"+l+"V"+v+"H"+u*a:"M"+l+","+y+"V"+v:a?"M"+y+","+u*a+"V"+l+"H"+v+"V"+u*a:"M"+y+","+l+"H"+v),E.attr("opacity",1).attr("transform",function(t){return h(b(t)+l)}),S.attr(c+"2",u*o),O.attr(c,u*g).text(p),_.filter(t5).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),_.each(function(){this.__axis=b})}return d.scale=function(t){return arguments.length?(e=t,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),d):n.slice()},d.tickValues=function(t){return arguments.length?(i=null==t?null:Array.from(t),d):i&&i.slice()},d.tickFormat=function(t){return arguments.length?(r=t,d):r},d.tickSize=function(t){return arguments.length?(o=a=+t,d):o},d.tickSizeInner=function(t){return arguments.length?(o=+t,d):o},d.tickSizeOuter=function(t){return arguments.length?(a=+t,d):a},d.tickPadding=function(t){return arguments.length?(s=+t,d):s},d.offset=function(t){return arguments.length?(l=+t,d):l},d}function t6(t){return t4(1,t)}function t8(t){return t4(2,t)}function t7(t){return t4(3,t)}function t9(t){return t4(4,t)}var et={value:()=>{}};function ee(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw Error("illegal type: "+t);i[t]=[]}return new en(i)}function en(t){this._=t}function ei(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=et,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}en.prototype=ee.prototype={constructor:en,on:function(t,e){var n,i=this._,r=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw Error("unknown type: "+t);return{type:t,name:e}}),o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((n=(t=r[o]).type)&&(n=function(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}(i[n],t.name)))return n;return}if(null!=e&&"function"!=typeof e)throw Error("invalid callback: "+e);for(;++o<a;)if(n=(t=r[o]).type)i[n]=ei(i[n],t.name,e);else if(null==e)for(n in i)i[n]=ei(i[n],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new en(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw Error("unknown type: "+t);for(i=this._[t],o=0,n=i.length;o<n;++o)i[o].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};var er="http://www.w3.org/1999/xhtml";let eo={svg:"http://www.w3.org/2000/svg",xhtml:er,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ea(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),eo.hasOwnProperty(e)?{space:eo[e],local:t}:t}function es(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===er&&e.documentElement.namespaceURI===er?e.createElement(t):e.createElementNS(n,t)}}function el(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function eu(t){var e=ea(t);return(e.local?el:es)(e)}function ec(){}function eh(t){return null==t?ec:function(){return this.querySelector(t)}}function ed(){return[]}function ef(t){return null==t?ed:function(){return this.querySelectorAll(t)}}function ep(t){return function(){return this.matches(t)}}function eg(t){return function(e){return e.matches(t)}}var em=Array.prototype.find;function ey(){return this.firstElementChild}var ev=Array.prototype.filter;function eb(){return Array.from(this.children)}function e_(t){return Array(t.length)}function ex(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function eE(t,e,n,i,r,o){for(var a,s=0,l=e.length,u=o.length;s<u;++s)(a=e[s])?(a.__data__=o[s],i[s]=a):n[s]=new ex(t,o[s]);for(;s<l;++s)(a=e[s])&&(r[s]=a)}function ew(t,e,n,i,r,o,a){var s,l,u,c=new Map,h=e.length,d=o.length,f=Array(h);for(s=0;s<h;++s)(l=e[s])&&(f[s]=u=a.call(l,l.__data__,s,e)+"",c.has(u)?r[s]=l:c.set(u,l));for(s=0;s<d;++s)u=a.call(t,o[s],s,o)+"",(l=c.get(u))?(i[s]=l,l.__data__=o[s],c.delete(u)):n[s]=new ex(t,o[s]);for(s=0;s<h;++s)(l=e[s])&&c.get(f[s])===l&&(r[s]=l)}function eT(t){return t.__data__}function eS(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function eO(t){return function(){this.removeAttribute(t)}}function eM(t){return function(){this.removeAttributeNS(t.space,t.local)}}function eA(t,e){return function(){this.setAttribute(t,e)}}function eC(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function eD(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function ek(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function eR(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function eL(t){return function(){this.style.removeProperty(t)}}function eN(t,e,n){return function(){this.style.setProperty(t,e,n)}}function eP(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function eI(t,e){return t.style.getPropertyValue(e)||eR(t).getComputedStyle(t,null).getPropertyValue(e)}function eB(t){return function(){delete this[t]}}function eU(t,e){return function(){this[t]=e}}function eF(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function ej(t){return t.trim().split(/^|\s+/)}function eH(t){return t.classList||new e$(t)}function e$(t){this._node=t,this._names=ej(t.getAttribute("class")||"")}function ez(t,e){for(var n=eH(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function eG(t,e){for(var n=eH(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function eV(t){return function(){ez(this,t)}}function eW(t){return function(){eG(this,t)}}function eY(t,e){return function(){(e.apply(this,arguments)?ez:eG)(this,t)}}function eZ(){this.textContent=""}function eq(t){return function(){this.textContent=t}}function eX(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function eK(){this.innerHTML=""}function eQ(t){return function(){this.innerHTML=t}}function eJ(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function e0(){this.nextSibling&&this.parentNode.appendChild(this)}function e1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function e2(){return null}function e3(){var t=this.parentNode;t&&t.removeChild(this)}function e5(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function e4(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function e6(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,o=e.length;i<o;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on}}}function e8(t,e,n){return function(){var i,r=this.__on,o=function(t){e.call(this,t,this.__data__)};if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function e7(t,e,n){var i=eR(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function e9(t,e){return function(){return e7(this,t,e)}}function nt(t,e){return function(){return e7(this,t,e.apply(this,arguments))}}ex.prototype={constructor:ex,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},e$.prototype={add:function(t){0>this._names.indexOf(t)&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ne=[null];function nn(t,e){this._groups=t,this._parents=e}function ni(){return new nn([[document.documentElement]],ne)}function nr(t){return"string"==typeof t?new nn([[document.querySelector(t)]],[document.documentElement]):new nn([[t]],ne)}function no(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}nn.prototype=ni.prototype={constructor:nn,select:function(t){"function"!=typeof t&&(t=eh(t));for(var e=this._groups,n=e.length,i=Array(n),r=0;r<n;++r)for(var o,a,s=e[r],l=s.length,u=i[r]=Array(l),c=0;c<l;++c)(o=s[c])&&(a=t.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),u[c]=a);return new nn(i,this._parents)},selectAll:function(t){var e;"function"==typeof t?(e=t,t=function(){var t;return t=e.apply(this,arguments),null==t?[]:Array.isArray(t)?t:Array.from(t)}):t=ef(t);for(var n=this._groups,i=n.length,r=[],o=[],a=0;a<i;++a)for(var s,l=n[a],u=l.length,c=0;c<u;++c)(s=l[c])&&(r.push(t.call(s,s.__data__,c,l)),o.push(s));return new nn(r,o)},selectChild:function(t){var e;return this.select(null==t?ey:(e="function"==typeof t?t:eg(t),function(){return em.call(this.children,e)}))},selectChildren:function(t){var e;return this.selectAll(null==t?eb:(e="function"==typeof t?t:eg(t),function(){return ev.call(this.children,e)}))},filter:function(t){"function"!=typeof t&&(t=ep(t));for(var e=this._groups,n=e.length,i=Array(n),r=0;r<n;++r)for(var o,a=e[r],s=a.length,l=i[r]=[],u=0;u<s;++u)(o=a[u])&&t.call(o,o.__data__,u,a)&&l.push(o);return new nn(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,eT);var n=e?ew:eE,i=this._parents,r=this._groups;"function"!=typeof t&&(v=t,t=function(){return v});for(var o=r.length,a=Array(o),s=Array(o),l=Array(o),u=0;u<o;++u){var c=i[u],h=r[u],d=h.length,f="object"==typeof(y=t.call(c,c&&c.__data__,u,i))&&"length"in y?y:Array.from(y),p=f.length,g=s[u]=Array(p),m=a[u]=Array(p);n(c,h,g,m,l[u]=Array(d),f,e);for(var y,v,b,_,x=0,E=0;x<p;++x)if(b=g[x]){for(x>=E&&(E=x+1);!(_=m[E])&&++E<p;);b._next=_||null}}return(a=new nn(a,i))._enter=s,a._exit=l,a},enter:function(){return new nn(this._enter||this._groups.map(e_),this._parents)},exit:function(){return new nn(this._exit||this._groups.map(e_),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,o=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?o.remove():n(o),i&&r?i.merge(r).order():r},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,a=Math.min(r,o),s=Array(r),l=0;l<a;++l)for(var u,c=n[l],h=i[l],d=c.length,f=s[l]=Array(d),p=0;p<d;++p)(u=c[p]||h[p])&&(f[p]=u);for(;l<r;++l)s[l]=n[l];return new nn(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],o=r.length-1,a=r[o];--o>=0;)(i=r[o])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=eS);for(var n=this._groups,i=n.length,r=Array(i),o=0;o<i;++o){for(var a,s=n[o],l=s.length,u=r[o]=Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(e)}return new nn(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null},size:function(){let t=0;for(let e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,o=e[n],a=0,s=o.length;a<s;++a)(r=o[a])&&t.call(r,r.__data__,a,o);return this},attr:function(t,e){var n=ea(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?eM:eO:"function"==typeof e?n.local?ek:eD:n.local?eC:eA)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?eL:"function"==typeof e?eP:eN)(t,e,n??"")):eI(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?eB:"function"==typeof e?eF:eU)(t,e)):this.node()[t]},classed:function(t,e){var n=ej(t+"");if(arguments.length<2){for(var i=eH(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?eY:e?eV:eW)(n,e))},text:function(t){return arguments.length?this.each(null==t?eZ:("function"==typeof t?eX:eq)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?eK:("function"==typeof t?eJ:eQ)(t)):this.node().innerHTML},raise:function(){return this.each(e0)},lower:function(){return this.each(e1)},append:function(t){var e="function"==typeof t?t:eu(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:eu(t),i=null==e?e2:"function"==typeof e?e:eh(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(e3)},clone:function(t){return this.select(t?e4:e5)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,o=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}),a=o.length;if(arguments.length<2){var s=this.node().__on;if(s){for(var l,u=0,c=s.length;u<c;++u)for(i=0,l=s[u];i<a;++i)if((r=o[i]).type===l.type&&r.name===l.name)return l.value}return}for(s=e?e8:e6,i=0;i<a;++i)this.each(s(o[i],e,n));return this},dispatch:function(t,e){return this.each(("function"==typeof e?nt:e9)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],o=0,a=r.length;o<a;++o)(i=r[o])&&(yield i)}};let na={capture:!0,passive:!1};function ns(t){t.preventDefault(),t.stopImmediatePropagation()}function nl(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function nu(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function nc(){}var nh="\\s*([+-]?\\d+)\\s*",nd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",np=/^#([0-9a-f]{3,8})$/,ng=RegExp(`^rgb\\(${nh},${nh},${nh}\\)$`),nm=RegExp(`^rgb\\(${nf},${nf},${nf}\\)$`),ny=RegExp(`^rgba\\(${nh},${nh},${nh},${nd}\\)$`),nv=RegExp(`^rgba\\(${nf},${nf},${nf},${nd}\\)$`),nb=RegExp(`^hsl\\(${nd},${nf},${nf}\\)$`),n_=RegExp(`^hsla\\(${nd},${nf},${nf},${nd}\\)$`),nx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function nE(){return this.rgb().formatHex()}function nw(){return this.rgb().formatRgb()}function nT(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=np.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?nS(e):3===n?new nA(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?nO(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?nO(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ng.exec(t))?new nA(e[1],e[2],e[3],1):(e=nm.exec(t))?new nA(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=ny.exec(t))?nO(e[1],e[2],e[3],e[4]):(e=nv.exec(t))?nO(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=nb.exec(t))?nN(e[1],e[2]/100,e[3]/100,1):(e=n_.exec(t))?nN(e[1],e[2]/100,e[3]/100,e[4]):nx.hasOwnProperty(t)?nS(nx[t]):"transparent"===t?new nA(NaN,NaN,NaN,0):null}function nS(t){return new nA(t>>16&255,t>>8&255,255&t,1)}function nO(t,e,n,i){return i<=0&&(t=e=n=NaN),new nA(t,e,n,i)}function nM(t,e,n,i){var r;return 1==arguments.length?((r=t)instanceof nc||(r=nT(r)),r?(r=r.rgb(),new nA(r.r,r.g,r.b,r.opacity)):new nA):new nA(t,e,n,i??1)}function nA(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function nC(){return`#${nL(this.r)}${nL(this.g)}${nL(this.b)}`}function nD(){let t=nk(this.opacity);return`${1===t?"rgb(":"rgba("}${nR(this.r)}, ${nR(this.g)}, ${nR(this.b)}${1===t?")":`, ${t})`}`}function nk(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function nR(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function nL(t){return((t=nR(t))<16?"0":"")+t.toString(16)}function nN(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new nI(t,e,n,i)}function nP(t){if(t instanceof nI)return new nI(t.h,t.s,t.l,t.opacity);if(t instanceof nc||(t=nT(t)),!t)return new nI;if(t instanceof nI)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),a=NaN,s=o-r,l=(o+r)/2;return s?(a=e===o?(n-i)/s+(n<i)*6:n===o?(i-e)/s+2:(e-n)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=l>0&&l<1?0:a,new nI(a,s,l,t.opacity)}function nI(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function nB(t){return(t=(t||0)%360)<0?t+360:t}function nU(t){return Math.max(0,Math.min(1,t||0))}function nF(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}nl(nc,nT,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:nE,formatHex:nE,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return nP(this).formatHsl()},formatRgb:nw,toString:nw}),nl(nA,nM,nu(nc,{brighter(t){return t=null==t?1.4285714285714286:Math.pow(1.4285714285714286,t),new nA(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new nA(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new nA(nR(this.r),nR(this.g),nR(this.b),nk(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:nC,formatHex:nC,formatHex8:function(){return`#${nL(this.r)}${nL(this.g)}${nL(this.b)}${nL((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:nD,toString:nD})),nl(nI,function(t,e,n,i){return 1==arguments.length?nP(t):new nI(t,e,n,i??1)},nu(nc,{brighter(t){return t=null==t?1.4285714285714286:Math.pow(1.4285714285714286,t),new nI(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new nI(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new nA(nF(t>=240?t-240:t+120,r,i),nF(t,r,i),nF(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new nI(nB(this.h),nU(this.s),nU(this.l),nk(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=nk(this.opacity);return`${1===t?"hsl(":"hsla("}${nB(this.h)}, ${100*nU(this.s)}%, ${100*nU(this.l)}%${1===t?")":`, ${t})`}`}}));let nj=t=>()=>t;function nH(t,e){var n=e-t;return n?function(e){return t+e*n}:nj(isNaN(t)?e:t)}let n$=function t(e){var n,i=1==(n=+(n=e))?nH:function(t,e){var i,r,o;return e-t?(i=t,r=e,i=Math.pow(i,o=n),r=Math.pow(r,o)-i,o=1/o,function(t){return Math.pow(i+t*r,o)}):nj(isNaN(t)?e:t)};function r(t,e){var n=i((t=nM(t)).r,(e=nM(e)).r),r=i(t.g,e.g),o=i(t.b,e.b),a=nH(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=r(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function nz(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(o){for(n=0;n<i;++n)r[n]=t[n]*(1-o)+e[n]*o;return r}}function nG(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,o=Array(r),a=Array(i);for(n=0;n<r;++n)o[n]=nK(t[n],e[n]);for(;n<i;++n)a[n]=e[n];return function(t){for(n=0;n<r;++n)a[n]=o[n](t);return a}}function nV(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function nW(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function nY(t,e){var n,i={},r={};for(n in(null===t||"object"!=typeof t)&&(t={}),(null===e||"object"!=typeof e)&&(e={}),e)n in t?i[n]=nK(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var nZ=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nq=RegExp(nZ.source,"g");function nX(t,e){var n,i,r,o,a,s=nZ.lastIndex=nq.lastIndex=0,l=-1,u=[],c=[];for(t+="",e+="";(r=nZ.exec(t))&&(o=nq.exec(e));)(a=o.index)>s&&(a=e.slice(s,a),u[l]?u[l]+=a:u[++l]=a),(r=r[0])===(o=o[0])?u[l]?u[l]+=o:u[++l]=o:(u[++l]=null,c.push({i:l,x:nW(r,o)})),s=nq.lastIndex;return s<e.length&&(a=e.slice(s),u[l]?u[l]+=a:u[++l]=a),u.length<2?c[0]?(n=c[0].x,function(t){return n(t)+""}):(i=e,function(){return i}):(e=c.length,function(t){for(var n,i=0;i<e;++i)u[(n=c[i]).i]=n.x(t);return u.join("")})}function nK(t,e){var n,i,r=typeof e;return null==e||"boolean"===r?nj(e):("number"===r?nW:"string"===r?(i=nT(e))?(e=i,n$):nX:e instanceof nT?n$:e instanceof Date?nV:(n=e,!ArrayBuffer.isView(n)||n instanceof DataView)?Array.isArray(e)?nG:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?nY:nW:nz)(t,e)}function nQ(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var nJ=180/Math.PI,n0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function n1(t,e,n,i,r,o){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),t*i<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*nJ,skewX:Math.atan(l)*nJ,scaleX:a,scaleY:s}}function n2(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(o,a){var s,l,u,c,h=[],d=[];return o=t(o),a=t(a),function(t,i,r,o,a,s){if(t!==r||i!==o){var l=a.push("translate(",null,e,null,n);s.push({i:l-4,x:nW(t,r)},{i:l-2,x:nW(i,o)})}else(r||o)&&a.push("translate("+r+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,h,d),(s=o.rotate)!==(l=a.rotate)?(s-l>180?l+=360:l-s>180&&(s+=360),d.push({i:h.push(r(h)+"rotate(",null,i)-2,x:nW(s,l)})):l&&h.push(r(h)+"rotate("+l+i),(u=o.skewX)!==(c=a.skewX)?d.push({i:h.push(r(h)+"skewX(",null,i)-2,x:nW(u,c)}):c&&h.push(r(h)+"skewX("+c+i),function(t,e,n,i,o,a){if(t!==n||e!==i){var s=o.push(r(o)+"scale(",null,",",null,")");a.push({i:s-4,x:nW(t,n)},{i:s-2,x:nW(e,i)})}else(1!==n||1!==i)&&o.push(r(o)+"scale("+n+","+i+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,h,d),o=a=null,function(t){for(var e,n=-1,i=d.length;++n<i;)h[(e=d[n]).i]=e.x(t);return h.join("")}}}var n3,n5,n4,n6,n8,n7,n9,it,ie,ii,ir,io,ia,is,il,iu,ic,ih,id,ip,ig,im,iy,iv,ib,i_,ix,iE,iw,iT,iS,iO,iM,iA,iC,iD,ik,iR,iL,iN,iP,iI,iB,iU,iF,ij,iH,i$,iz,iG,iV,iW,iY,iZ,iq,iX,iK,iQ,iJ,i0,i1,i2=n2(function(t){let e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?n0:n1(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),i3=n2(function(t){return null!=t&&(iJ||(iJ=document.createElementNS("http://www.w3.org/2000/svg","g")),iJ.setAttribute("transform",t),t=iJ.transform.baseVal.consolidate())?n1((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):n0},", ",")",")"),i5=0,i4=0,i6=0,i8=0,i7=0,i9=0,rt="object"==typeof performance&&performance.now?performance:Date,re="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function rn(){return i7||(re(ri),i7=rt.now()+i9)}function ri(){i7=0}function rr(){this._call=this._time=this._next=null}function ro(t,e,n){var i=new rr;return i.restart(t,e,n),i}function ra(){i7=(i8=rt.now())+i9,i5=i4=0;try{!function(){rn(),++i5;for(var t,e=i0;e;)(t=i7-e._time)>=0&&e._call.call(void 0,t),e=e._next;--i5}()}finally{i5=0,function(){for(var t,e,n=i0,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:i0=e);i1=t,rl(i)}(),i7=0}}function rs(){var t=rt.now(),e=t-i8;e>1e3&&(i9-=e,i8=t)}function rl(t){!i5&&(i4&&(i4=clearTimeout(i4)),t-i7>24?(t<1/0&&(i4=setTimeout(ra,t-rt.now()-i9)),i6&&(i6=clearInterval(i6))):(i6||(i8=rt.now(),i6=setInterval(rs,1e3)),i5=1,re(ra)))}function ru(t,e,n){var i=new rr;return e=null==e?0:+e,i.restart(n=>{i.stop(),t(n+e)},e,n),i}rr.prototype=ro.prototype={constructor:rr,restart:function(t,e,n){if("function"!=typeof t)throw TypeError("callback is not a function");n=(null==n?rn():+n)+(null==e?0:+e),this._next||i1===this||(i1?i1._next=this:i0=this,i1=this),this._call=t,this._time=n,rl()},stop:function(){this._call&&(this._call=null,this._time=1/0,rl())}};var rc=ee("start","end","cancel","interrupt"),rh=[];function rd(t,e,n,i,r,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function o(l){var u,c,h,d;if(1!==n.state)return s();for(u in r)if((d=r[u]).name===n.name){if(3===d.state)return ru(o);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[u]):+u<e&&(d.state=6,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[u])}if(ru(function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=Array(h=n.tween.length),u=0,c=-1;u<h;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++c]=d);i.length=c+1}}function a(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,a=i.length;++o<a;)i[o].call(t,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var i in n.state=6,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=ro(function(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)},0,n.time)}(t,n,{name:e,index:i,group:r,on:rc,tween:rh,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function rf(t,e){var n=rg(t,e);if(n.state>0)throw Error("too late; already scheduled");return n}function rp(t,e){var n=rg(t,e);if(n.state>3)throw Error("too late; already running");return n}function rg(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw Error("transition not found");return n}function rm(t,e){var n,i,r,o=t.__transition,a=!0;if(o){for(r in e=null==e?null:e+"",o){if((n=o[r]).name!==e){a=!1;continue}i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[r]}a&&delete t.__transition}}function ry(t,e){var n,i;return function(){var r=rp(this,t),o=r.tween;if(o!==n){i=n=o;for(var a=0,s=i.length;a<s;++a)if(i[a].name===e){(i=i.slice()).splice(a,1);break}}r.tween=i}}function rv(t,e,n){var i,r;if("function"!=typeof n)throw Error();return function(){var o=rp(this,t),a=o.tween;if(a!==i){r=(i=a).slice();for(var s={name:e,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===e){r[l]=s;break}l===u&&r.push(s)}o.tween=r}}function rb(t,e,n){var i=t._id;return t.each(function(){var t=rp(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return rg(t,i).value[e]}}function r_(t,e){var n;return("number"==typeof e?nW:e instanceof nT?n$:(n=nT(e))?(e=n,n$):nX)(t,e)}function rx(t){return function(){this.removeAttribute(t)}}function rE(t){return function(){this.removeAttributeNS(t.space,t.local)}}function rw(t,e,n){var i,r,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===i?r:r=e(i=a,n)}}function rT(t,e,n){var i,r,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===i?r:r=e(i=a,n)}}function rS(t,e,n){var i,r,o;return function(){var a,s,l=n(this);return null==l?void this.removeAttribute(t):(a=this.getAttribute(t))===(s=l+"")?null:a===i&&s===r?o:(r=s,o=e(i=a,l))}}function rO(t,e,n){var i,r,o;return function(){var a,s,l=n(this);return null==l?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:a===i&&s===r?o:(r=s,o=e(i=a,l))}}function rM(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(e){this.setAttributeNS(t.space,t.local,r.call(this,e))}),n}return r._value=e,r}function rA(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(e){this.setAttribute(t,r.call(this,e))}),n}return r._value=e,r}function rC(t,e){return function(){rf(this,t).delay=+e.apply(this,arguments)}}function rD(t,e){return e=+e,function(){rf(this,t).delay=e}}function rk(t,e){return function(){rp(this,t).duration=+e.apply(this,arguments)}}function rR(t,e){return e=+e,function(){rp(this,t).duration=e}}var rL=ni.prototype.constructor;function rN(t){return function(){this.style.removeProperty(t)}}var rP=0;function rI(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}var rB=ni.prototype;rI.prototype={constructor:rI,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=eh(t));for(var i=this._groups,r=i.length,o=Array(r),a=0;a<r;++a)for(var s,l,u=i[a],c=u.length,h=o[a]=Array(c),d=0;d<c;++d)(s=u[d])&&(l=t.call(s,s.__data__,d,u))&&("__data__"in s&&(l.__data__=s.__data__),h[d]=l,rd(h[d],e,n,d,h,rg(s,n)));return new rI(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=ef(t));for(var i=this._groups,r=i.length,o=[],a=[],s=0;s<r;++s)for(var l,u=i[s],c=u.length,h=0;h<c;++h)if(l=u[h]){for(var d,f=t.call(l,l.__data__,h,u),p=rg(l,n),g=0,m=f.length;g<m;++g)(d=f[g])&&rd(d,e,n,g,f,p);o.push(f),a.push(l)}return new rI(o,a,e,n)},selectChild:rB.selectChild,selectChildren:rB.selectChildren,filter:function(t){"function"!=typeof t&&(t=ep(t));for(var e=this._groups,n=e.length,i=Array(n),r=0;r<n;++r)for(var o,a=e[r],s=a.length,l=i[r]=[],u=0;u<s;++u)(o=a[u])&&t.call(o,o.__data__,u,a)&&l.push(o);return new rI(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw Error();for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=Array(i),s=0;s<o;++s)for(var l,u=e[s],c=n[s],h=u.length,d=a[s]=Array(h),f=0;f<h;++f)(l=u[f]||c[f])&&(d[f]=l);for(;s<i;++s)a[s]=e[s];return new rI(a,this._parents,this._name,this._id)},selection:function(){return new rL(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=++rP,i=this._groups,r=i.length,o=0;o<r;++o)for(var a,s=i[o],l=s.length,u=0;u<l;++u)if(a=s[u]){var c=rg(a,e);rd(a,t,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new rI(i,this._parents,t,n)},call:rB.call,nodes:rB.nodes,node:rB.node,size:rB.size,empty:rB.empty,each:rB.each,on:function(t,e){var n,i,r,o=this._id;return arguments.length<2?rg(this.node(),o).on.on(t):this.each((r=(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})?rf:rp,function(){var a=r(this,o),s=a.on;s!==n&&(i=(n=s).copy()).on(t,e),a.on=i}))},attr:function(t,e){var n=ea(t),i="transform"===n?i3:r_;return this.attrTween(t,"function"==typeof e?(n.local?rO:rS)(n,i,rb(this,"attr."+t,e)):null==e?(n.local?rE:rx)(n):(n.local?rT:rw)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw Error();var i=ea(t);return this.tween(n,(i.local?rM:rA)(i,e))},style:function(t,e,n){var i,r,o,a,s,l,u,c,h,d,f,p,g,m,y,v,b,_,x,E,w,T="transform"==(t+="")?i2:r_;return null==e?this.styleTween(t,(i=t,function(){var t=eI(this,i),e=(this.style.removeProperty(i),eI(this,i));return t===e?null:t===r&&e===o?a:a=T(r=t,o=e)})).on("end.style."+t,rN(t)):"function"==typeof e?this.styleTween(t,(s=t,l=rb(this,"style."+t,e),function(){var t=eI(this,s),e=l(this),n=e+"";return null==e&&(this.style.removeProperty(s),n=e=eI(this,s)),t===n?null:t===u&&n===c?h:(c=n,h=T(u=t,e))})).each((d=this._id,b="end."+(v="style."+(f=t)),function(){var t=rp(this,d),e=t.on,n=null==t.value[v]?y||(y=rN(f)):void 0;(e!==p||m!==n)&&(g=(p=e).copy()).on(b,m=n),t.on=g})):this.styleTween(t,(_=t,w=e+"",function(){var t=eI(this,_);return t===w?null:t===x?E:E=T(x=t,e)}),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw Error();return this.tween(i,function(t,e,n){var i,r;function o(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&function(e){this.style.setProperty(t,o.call(this,e),n)}),i}return o._value=e,o}(t,e,n??""))},text:function(t){var e,n;return this.tween("text","function"==typeof t?(e=rb(this,"text",t),function(){var t=e(this);this.textContent=t??""}):(n=null==t?"":t+"",function(){this.textContent=n}))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw Error();return this.tween(e,function(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&function(t){this.textContent=i.call(this,t)}),e}return i._value=t,i}(t))},remove:function(){var t;return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=rg(this.node(),n).tween,o=0,a=r.length;o<a;++o)if((i=r[o]).name===t)return i.value;return null}return this.each((null==e?ry:rv)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?rC:rD)(e,t)):rg(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?rk:rR)(e,t)):rg(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw Error();return function(){rp(this,t).ease=e}}(e,t)):rg(this.node(),e).ease},easeVarying:function(t){var e;if("function"!=typeof t)throw Error();return this.each((e=this._id,function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw Error();rp(this,e).ease=n}))},end:function(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,a){var s={value:a},l={value:function(){0==--r&&o()}};n.each(function(){var n=rp(this,i),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),n.on=e}),0===r&&o()})},[Symbol.iterator]:rB[Symbol.iterator]};let rU=t=>+t;function rF(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var rj={time:null,delay:0,duration:250,ease:rF};ni.prototype.interrupt=function(t){return this.each(function(){rm(this,t)})},ni.prototype.transition=function(t){t instanceof rI?(r=t._id,t=t._name):(r=++rP,(o=rj).time=rn(),t=null==t?null:t+"");for(var e=this._groups,n=e.length,i=0;i<n;++i)for(var r,o,a,s=e[i],l=s.length,u=0;u<l;++u)(a=s[u])&&rd(a,t,r,u,s,o||function(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw Error(`transition ${e} not found`);return n}(a,r));return new rI(e,this._parents,t,r)};let rH=t=>()=>t;function r$(t,{sourceEvent:e,target:n,selection:i,mode:r,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function rz(t){t.preventDefault(),t.stopImmediatePropagation()}var rG={name:"drag"},rV={name:"space"},rW={name:"handle"},rY={name:"center"};let{abs:rZ,max:rq,min:rX}=Math;function rK(t){return[+t[0],+t[1]]}function rQ(t){return[rK(t[0]),rK(t[1])]}var rJ={name:"x",handles:["w","e"].map(r6),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},r0={name:"y",handles:["n","s"].map(r6),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},r1={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},r2={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},r3={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},r5={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},r4={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function r6(t){return{type:t}}function r8(t){return!t.ctrlKey&&!t.button}function r7(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function r9(){return navigator.maxTouchPoints||"ontouchstart"in this}function ot(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function oe(t){var e,n=r7,i=r8,r=r9,o=!0,a=ee("start","brush","end"),s=6;function l(e){var n=e.property("__brush",g).selectAll(".overlay").data([r6("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",r1.overlay).merge(n).each(function(){var t=ot(this).extent;nr(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),e.selectAll(".selection").data([r6("selection")]).enter().append("rect").attr("class","selection").attr("cursor",r1.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=e.selectAll(".handle").data(t.handles,function(t){return t.type});i.exit().remove(),i.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return r1[t.type]}),e.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",f).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function u(){var t=nr(this),e=ot(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-s/2:e[0][0]-s/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-s/2:e[0][1]-s/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+s:s}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+s:s})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(t,e,n){var i=t.__brush.emitter;return!i||n&&i.clean?new h(t,e,n):i}function h(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function d(n){if((!e||n.touches)&&i.apply(this,arguments)){var r,a,s,l,h,d,f,p,g,m,y,v=this,b=n.target.__data__.type,_=(o&&n.metaKey?b="overlay":b)==="selection"?rG:o&&n.altKey?rY:rW,x=t===r0?null:r5[b],E=t===rJ?null:r4[b],w=ot(v),T=w.extent,S=w.selection,O=T[0][0],M=T[0][1],A=T[1][0],C=T[1][1],D=0,k=0,R=x&&E&&o&&n.shiftKey,L=Array.from(n.touches||[n],t=>{let e=t.identifier;return(t=no(t,v)).point0=t.slice(),t.identifier=e,t});rm(v);var N=c(v,arguments,!0).beforestart();if("overlay"===b){S&&(g=!0);let e=[L[0],L[1]||L[0]];w.selection=S=[[r=t===r0?O:rX(e[0][0],e[1][0]),s=t===rJ?M:rX(e[0][1],e[1][1])],[h=t===r0?A:rq(e[0][0],e[1][0]),f=t===rJ?C:rq(e[0][1],e[1][1])]],L.length>1&&$(n)}else r=S[0][0],s=S[0][1],h=S[1][0],f=S[1][1];a=r,l=s,d=h,p=f;var P=nr(v).attr("pointer-events","none"),I=P.selectAll(".overlay").attr("cursor",r1[b]);if(n.touches)N.moved=H,N.ended=z;else{var B,U,F,j=nr(n.view).on("mousemove.brush",H,!0).on("mouseup.brush",z,!0);o&&j.on("keydown.brush",function(t){switch(t.keyCode){case 16:R=x&&E;break;case 18:_===rW&&(x&&(h=d-D*x,r=a+D*x),E&&(f=p-k*E,s=l+k*E),_=rY,$(t));break;case 32:(_===rW||_===rY)&&(x<0?h=d-D:x>0&&(r=a-D),E<0?f=p-k:E>0&&(s=l-k),_=rV,I.attr("cursor",r1.selection),$(t));break;default:return}rz(t)},!0).on("keyup.brush",function(t){switch(t.keyCode){case 16:R&&(m=y=R=!1,$(t));break;case 18:_===rY&&(x<0?h=d:x>0&&(r=a),E<0?f=p:E>0&&(s=l),_=rW,$(t));break;case 32:_===rV&&(t.altKey?(x&&(h=d-D*x,r=a+D*x),E&&(f=p-k*E,s=l+k*E),_=rY):(x<0?h=d:x>0&&(r=a),E<0?f=p:E>0&&(s=l),_=rW),I.attr("cursor",r1[b]),$(t));break;default:return}rz(t)},!0),U=(B=n.view).document.documentElement,F=nr(B).on("dragstart.drag",ns,na),"onselectstart"in U?F.on("selectstart.drag",ns,na):(U.__noselect=U.style.MozUserSelect,U.style.MozUserSelect="none")}u.call(v),N.start(n,_.name)}function H(t){for(let e of t.changedTouches||[t])for(let t of L)t.identifier===e.identifier&&(t.cur=no(e,v));if(R&&!m&&!y&&1===L.length){let t=L[0];rZ(t.cur[0]-t[0])>rZ(t.cur[1]-t[1])?y=!0:m=!0}for(let t of L)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);g=!0,rz(t),$(t)}function $(t){var e;let n=L[0],i=n.point0;switch(D=n[0]-i[0],k=n[1]-i[1],_){case rV:case rG:x&&(D=rq(O-r,rX(A-h,D)),a=r+D,d=h+D),E&&(k=rq(M-s,rX(C-f,k)),l=s+k,p=f+k);break;case rW:L[1]?(x&&(a=rq(O,rX(A,L[0][0])),d=rq(O,rX(A,L[1][0])),x=1),E&&(l=rq(M,rX(C,L[0][1])),p=rq(M,rX(C,L[1][1])),E=1)):(x<0?(D=rq(O-r,rX(A-r,D)),a=r+D,d=h):x>0&&(D=rq(O-h,rX(A-h,D)),a=r,d=h+D),E<0?(k=rq(M-s,rX(C-s,k)),l=s+k,p=f):E>0&&(k=rq(M-f,rX(C-f,k)),l=s,p=f+k));break;case rY:x&&(a=rq(O,rX(A,r-D*x)),d=rq(O,rX(A,h+D*x))),E&&(l=rq(M,rX(C,s-k*E)),p=rq(M,rX(C,f+k*E)))}d<a&&(x*=-1,e=r,r=h,h=e,e=a,a=d,d=e,b in r2&&I.attr("cursor",r1[b=r2[b]])),p<l&&(E*=-1,e=s,s=f,f=e,e=l,l=p,p=e,b in r3&&I.attr("cursor",r1[b=r3[b]])),w.selection&&(S=w.selection),m&&(a=S[0][0],d=S[1][0]),y&&(l=S[0][1],p=S[1][1]),(S[0][0]!==a||S[0][1]!==l||S[1][0]!==d||S[1][1]!==p)&&(w.selection=[[a,l],[d,p]],u.call(v),N.brush(t,_.name))}function z(t){var n,i,r,o,a;if(function(t){t.stopImmediatePropagation()}(t),t.touches){if(t.touches.length)return;e&&clearTimeout(e),e=setTimeout(function(){e=null},500)}else n=t.view,i=g,r=n.document.documentElement,o=nr(n).on("dragstart.drag",null),i&&(o.on("click.drag",ns,na),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in r?o.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect),j.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);P.attr("pointer-events","all"),I.attr("cursor",r1.overlay),w.selection&&(S=w.selection),((a=S)[0][0]===a[1][0]||a[0][1]===a[1][1])&&(w.selection=null,u.call(v)),N.end(t,_.name)}}function f(t){c(this,arguments).moved(t)}function p(t){c(this,arguments).ended(t)}function g(){var e=this.__brush||{selection:null};return e.extent=rQ(n.apply(this,arguments)),e.dim=t,e}return l.move=function(e,n,i){e.tween?e.on("start.brush",function(t){c(this,arguments).beforestart().start(t)}).on("interrupt.brush end.brush",function(t){c(this,arguments).end(t)}).tween("brush",function(){var e=this,i=e.__brush,r=c(e,arguments),o=i.selection,a=t.input("function"==typeof n?n.apply(this,arguments):n,i.extent),s=nK(o,a);function l(t){i.selection=1===t&&null===a?null:s(t),u.call(e),r.brush()}return null!==o&&null!==a?l:l(1)}):e.each(function(){var e=arguments,r=this.__brush,o=t.input("function"==typeof n?n.apply(this,e):n,r.extent),a=c(this,e).beforestart();rm(this),r.selection=null===o?null:o,u.call(this),a.start(i).brush(i).end(i)})},l.clear=function(t,e){l.move(t,null,e)},h.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(e,n,i){var r=nr(this.that).datum();a.call(e,this.that,new r$(e,{sourceEvent:n,target:l,selection:t.output(this.state.selection),mode:i,dispatch:a}),r)}},l.extent=function(t){return arguments.length?(n="function"==typeof t?t:rH(rQ(t)),l):n},l.filter=function(t){return arguments.length?(i="function"==typeof t?t:rH(!!t),l):i},l.touchable=function(t){return arguments.length?(r="function"==typeof t?t:rH(!!t),l):r},l.handleSize=function(t){return arguments.length?(s=+t,l):s},l.keyModifiers=function(t){return arguments.length?(o=!!t,l):o},l.on=function(){var t=a.on.apply(a,arguments);return t===a?l:t},l}let on=Math.PI,oi=2*on,or=oi-1e-6;function oo(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}let oa=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?oo:function(t){let e=Math.floor(t);if(!(e>=0))throw Error(`invalid digits: ${t}`);if(e>15)return oo;let n=10**e;return function(t){this._+=t[0];for(let e=1,i=t.length;e<i;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,i){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,e,n,i,r,o){this._append`C${+t},${+e},${+n},${+i},${this._x1=+r},${this._y1=+o}`}arcTo(t,e,n,i,r){if(t=+t,e=+e,n=+n,i=+i,(r=+r)<0)throw Error(`negative radius: ${r}`);let o=this._x1,a=this._y1,s=n-t,l=i-e,u=o-t,c=a-e,h=u*u+c*c;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(h>1e-6){if(Math.abs(c*s-l*u)>1e-6&&r){let d=n-o,f=i-a,p=s*s+l*l,g=Math.sqrt(p),m=Math.sqrt(h),y=r*Math.tan((on-Math.acos((p+h-(d*d+f*f))/(2*g*m)))/2),v=y/m,b=y/g;Math.abs(v-1)>1e-6&&this._append`L${t+v*u},${e+v*c}`,this._append`A${r},${r},0,0,${+(c*d>u*f)},${this._x1=t+b*s},${this._y1=e+b*l}`}else this._append`L${this._x1=t},${this._y1=e}`}}arc(t,e,n,i,r,o){if(t=+t,e=+e,o=!!o,(n=+n)<0)throw Error(`negative radius: ${n}`);let a=n*Math.cos(i),s=n*Math.sin(i),l=t+a,u=e+s,c=1^o,h=o?i-r:r-i;null===this._x1?this._append`M${l},${u}`:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-u)>1e-6)&&this._append`L${l},${u}`,n&&(h<0&&(h=h%oi+oi),h>or?this._append`A${n},${n},0,1,${c},${t-a},${e-s}A${n},${n},0,1,${c},${this._x1=l},${this._y1=u}`:h>1e-6&&this._append`A${n},${n},0,${+(h>=on)},${c},${this._x1=t+n*Math.cos(r)},${this._y1=e+n*Math.sin(r)}`)}rect(t,e,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}};function os(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function ol(t){return(t=os(Math.abs(t)))?t[1]:NaN}oa.prototype;var ou=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function oc(t){var e;if(!(e=ou.exec(t)))throw Error("invalid format: "+t);return new oh({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function oh(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function od(t,e){var n=os(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+Array(r-i.length+2).join("0")}oc.prototype=oh.prototype,oh.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};let of={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>od(100*t,e),r:od,s:function(t,e){var n=os(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(oO=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return o===a?i:o>a?i+Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+Array(1-o).join("0")+os(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function op(t){return t}var og=Array.prototype.map,om=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];oA=(oM=function(t){var e,n,i,r=void 0===t.grouping||void 0===t.thousands?op:(e=og.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,o=[],a=0,s=e[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),o.push(t.substring(r-=s,r+s)),!((l+=s+1)>i));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),o=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",l=void 0===t.numerals?op:(i=og.call(t.numerals,String),function(t){return t.replace(/[0-9]/g,function(t){return i[+t]})}),u=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",h=void 0===t.nan?"NaN":t.nan+"";function d(t){var e=(t=oc(t)).fill,n=t.align,i=t.sign,d=t.symbol,f=t.zero,p=t.width,g=t.comma,m=t.precision,y=t.trim,v=t.type;"n"===v?(g=!0,v="g"):of[v]||(void 0===m&&(m=12),y=!0,v="g"),(f||"0"===e&&"="===n)&&(f=!0,e="0",n="=");var b="$"===d?o:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",_="$"===d?a:/[%p]/.test(v)?u:"",x=of[v],E=/[defgprs%]/.test(v);function w(t){var o,a,u,d=b,w=_;if("c"===v)w=x(t)+w,t="";else{var T=(t=+t)<0||1/t<0;if(t=isNaN(t)?h:x(Math.abs(t),m),y&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),T&&0==+t&&"+"!==i&&(T=!1),d=(T?"("===i?i:c:"-"===i||"("===i?"":i)+d,w=("s"===v?om[8+oO/3]:"")+w+(T&&"("===i?")":""),E){for(o=-1,a=t.length;++o<a;)if(48>(u=t.charCodeAt(o))||u>57){w=(46===u?s+t.slice(o+1):t.slice(o))+w,t=t.slice(0,o);break}}}g&&!f&&(t=r(t,1/0));var S=d.length+t.length+w.length,O=S<p?Array(p-S+1).join(e):"";switch(g&&f&&(t=r(O+t,O.length?p-w.length:1/0),O=""),n){case"<":t=d+t+w+O;break;case"=":t=d+O+t+w;break;case"^":t=O.slice(0,S=O.length>>1)+d+t+w+O.slice(S);break;default:t=O+d+t+w}return l(t)}return m=void 0===m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),w.toString=function(){return t+""},w}return{format:d,formatPrefix:function(t,e){var n=d(((t=oc(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(ol(e)/3))),r=Math.pow(10,-i),o=om[8+i/3];return function(t){return n(r*t)+o}}}}({thousands:",",grouping:[3],currency:["$",""]})).format,oC=oM.formatPrefix;var oy=Math.PI,ov=2*oy,ob=Math.abs,o_=Math.sqrt;function ox(){}var oE={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){ow(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)ow(n[i],e,0)},Polygon:function(t,e){oT(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)oT(n[i],e)},GeometryCollection:function(t,e){for(var n,i=t.geometries,r=-1,o=i.length;++r<o;)(n=i[r])&&oE.hasOwnProperty(n.type)&&oE[n.type](n,e)}};function ow(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function oT(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)ow(t[n],e,1);e.polygonEnd()}function oS(t,e){return ob(t)>oy&&(t-=Math.round(t/ov)*ov),[t,e]}oS.invert=oS;var oO,oM,oA,oC,oD,ok,oR,oL,oN=new tF,oP=new tF,oI={point:ox,lineStart:ox,lineEnd:ox,polygonStart:function(){oI.lineStart=oB,oI.lineEnd=oj},polygonEnd:function(){oI.lineStart=oI.lineEnd=oI.point=ox,oN.add(ob(oP)),oP=new tF},result:function(){var t=oN/2;return oN=new tF,t}};function oB(){oI.point=oU}function oU(t,e){oI.point=oF,oD=oR=t,ok=oL=e}function oF(t,e){oP.add(oL*t-oR*e),oR=t,oL=e}function oj(){oF(oD,ok)}var oH,o$,oz,oG,oV=0,oW=0,oY=0,oZ=0,oq=0,oX=0,oK=0,oQ=0,oJ=0,o0={point:o1,lineStart:o2,lineEnd:o4,polygonStart:function(){o0.lineStart=o6,o0.lineEnd=o8},polygonEnd:function(){o0.point=o1,o0.lineStart=o2,o0.lineEnd=o4},result:function(){var t=oJ?[oK/oJ,oQ/oJ]:oX?[oZ/oX,oq/oX]:oY?[oV/oY,oW/oY]:[NaN,NaN];return oV=oW=oY=oZ=oq=oX=oK=oQ=oJ=0,t}};function o1(t,e){oV+=t,oW+=e,++oY}function o2(){o0.point=o3}function o3(t,e){o0.point=o5,o1(oz=t,oG=e)}function o5(t,e){var n=t-oz,i=e-oG,r=o_(n*n+i*i);oZ+=r*(oz+t)/2,oq+=r*(oG+e)/2,oX+=r,o1(oz=t,oG=e)}function o4(){o0.point=o1}function o6(){o0.point=o7}function o8(){o9(oH,o$)}function o7(t,e){o0.point=o9,o1(oH=oz=t,o$=oG=e)}function o9(t,e){var n=t-oz,i=e-oG,r=o_(n*n+i*i);oZ+=r*(oz+t)/2,oq+=r*(oG+e)/2,oX+=r,oK+=(r=oG*t-oz*e)*(oz+t),oQ+=r*(oG+e),oJ+=3*r,o1(oz=t,oG=e)}var at,ae,an,ai,ar,ao=new tF,aa={point:ox,lineStart:function(){aa.point=as},lineEnd:function(){at&&al(ae,an),aa.point=ox},polygonStart:function(){at=!0},polygonEnd:function(){at=null},result:function(){var t=+ao;return ao=new tF,t}};function as(t,e){aa.point=al,ae=ai=t,an=ar=e}function al(t,e){ai-=t,ar-=e,ao.add(o_(ai*ai+ar*ar)),ai=t,ar=e}function au(){}function ac(t,e){return[t,e]}function ah(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;--i>=0;)e+=n[i].value;else e=1;t.value=e}function ad(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=ap)):void 0===e&&(e=af);for(var n,i,r,o,a,s=new ay(t),l=[s];n=l.pop();)if((r=e(n.data))&&(a=(r=Array.from(r)).length))for(n.children=r,o=a-1;o>=0;--o)l.push(i=r[o]=new ay(r[o])),i.parent=n,i.depth=n.depth+1;return s.eachBefore(am)}function af(t){return t.children}function ap(t){return Array.isArray(t)?t[1]:null}function ag(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function am(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function ay(t){this.data=t,this.depth=this.height=0,this.parent=null}function av(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}au.prototype={constructor:au,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},(0,Math.cos)(30*(oy/180)),ac.invert=ac,o_(3),ay.prototype=ad.prototype={constructor:ay,count:function(){return this.eachAfter(ah)},each:function(t,e){let n=-1;for(let i of this)t.call(e,i,++n,this);return this},eachAfter:function(t,e){for(var n,i,r,o=this,a=[o],s=[],l=-1;o=a.pop();)if(s.push(o),n=o.children)for(i=0,r=n.length;i<r;++i)a.push(n[i]);for(;o=s.pop();)t.call(e,o,++l,this);return this},eachBefore:function(t,e){for(var n,i,r=this,o=[r],a=-1;r=o.pop();)if(t.call(e,r,++a,this),n=r.children)for(i=n.length-1;i>=0;--i)o.push(n[i]);return this},find:function(t,e){let n=-1;for(let i of this)if(t.call(e,i,++n,this))return i},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}(e,t),i=[e];e!==n;)i.push(e=e.parent);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return ad(this).eachBefore(ag)},[Symbol.iterator]:function*(){var t,e,n,i,r=this,o=[r];do for(t=o.reverse(),o=[];r=t.pop();)if(yield r,e=r.children)for(n=0,i=e.length;n<i;++n)o.push(e[n]);while(o.length)}},Object.create(ay.prototype),function t(e){function n(t,n,i,r,o){!function(t,e,n,i,r,o){for(var a,s,l,u,c,h,d,f,p,g,m,y=[],v=e.children,b=0,_=0,x=v.length,E=e.value;b<x;){l=r-n,u=o-i;do c=v[_++].value;while(!c&&_<x);for(h=d=c,p=Math.max(d/(m=c*c*(g=Math.max(u/l,l/u)/(E*t))),m/h);_<x;++_){if(c+=s=v[_].value,s<h&&(h=s),s>d&&(d=s),(f=Math.max(d/(m=c*c*g),m/h))>p){c-=s;break}p=f}y.push(a={value:c,dice:l<u,children:v.slice(b,_)}),a.dice?function(t,e,n,i,r){for(var o,a=t.children,s=-1,l=a.length,u=t.value&&(i-e)/t.value;++s<l;)(o=a[s]).y0=n,o.y1=r,o.x0=e,o.x1=e+=o.value*u}(a,n,i,r,E?i+=u*c/E:o):function(t,e,n,i,r){for(var o,a=t.children,s=-1,l=a.length,u=t.value&&(r-n)/t.value;++s<l;)(o=a[s]).x0=e,o.x1=i,o.y0=n,o.y1=n+=o.value*u}(a,n,i,E?n+=l*c/E:r,o),E-=c,b=_}}(e,t,n,i,r,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}((1+Math.sqrt(5))/2);let ab=Symbol("implicit");function a_(){var t=new tj,e=[],n=[],i=ab;function r(r){let o=t.get(r);if(void 0===o){if(i!==ab)return i;t.set(r,o=e.push(r)-1)}return n[o%n.length]}return r.domain=function(n){if(!arguments.length)return e.slice();for(let i of(e=[],t=new tj,n))t.has(i)||t.set(i,e.push(i)-1);return r},r.range=function(t){return arguments.length?(n=Array.from(t),r):n.slice()},r.unknown=function(t){return arguments.length?(i=t,r):i},r.copy=function(){return a_(e,n).unknown(i)},av.apply(r,arguments),r}function ax(t){return+t}var aE=[0,1];function aw(t){return t}function aT(t,e){var n;return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n})}function aS(t,e,n){var i=t[0],r=t[1],o=e[0],a=e[1];return r<i?(i=aT(r,i),o=n(a,o)):(i=aT(i,r),o=n(o,a)),function(t){return o(i(t))}}function aO(t,e,n){var i=Math.min(t.length,e.length)-1,r=Array(i),o=Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=aT(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=tB(t,e,1,i)-1;return o[n](r[n](e))}}function aM(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function aA(){var t,e,n,i,r,o,a=aE,s=aE,l=nK,u=aw;function c(){var t,e,n,l=Math.min(a.length,s.length);return u!==aw&&((t=a[0])>(e=a[l-1])&&(n=t,t=e,e=n),u=function(n){return Math.max(t,Math.min(e,n))}),i=l>2?aO:aS,r=o=null,h}function h(e){return null==e||isNaN(e=+e)?n:(r||(r=i(a.map(t),s,l)))(t(u(e)))}return h.invert=function(n){return u(e((o||(o=i(s,a.map(t),nW)))(n)))},h.domain=function(t){return arguments.length?(a=Array.from(t,ax),c()):a.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),c()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),l=nQ,c()},h.clamp=function(t){return arguments.length?(u=!!t||aw,c()):u!==aw},h.interpolate=function(t){return arguments.length?(l=t,c()):l},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,i){return t=n,e=i,c()}}function aC(){var t,e=aA()(aw,aw);return e.copy=function(){return aM(e,aC())},av.apply(e,arguments),t=e.domain,e.ticks=function(e){var n=t();return tq(n[0],n[n.length-1],e??10)},e.tickFormat=function(e,n){var i=t();return function(t,e,n,i){var r,o,a=tK(t,e,n);switch((i=oc(i??",f")).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(o=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ol(s)/3)))-ol(Math.abs(a))))||(i.precision=o),oC(i,s);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN((r=a,o=Math.max(0,ol(Math.abs(Math.max(Math.abs(t),Math.abs(e)))-(r=Math.abs(r)))-ol(r))+1))||(i.precision=o-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(o=Math.max(0,-ol(Math.abs(a))))||(i.precision=o-("%"===i.type)*2)}return oA(i)}(i[0],i[i.length-1],e??10,n)},e.nice=function(n){null==n&&(n=10);var i,r,o=t(),a=0,s=o.length-1,l=o[a],u=o[s],c=10;for(u<l&&(r=l,l=u,u=r,r=a,a=s,s=r);c-- >0;){if((r=tX(l,u,n))===i)return o[a]=l,o[s]=u,t(o);if(r>0)l=Math.floor(l/r)*r,u=Math.ceil(u/r)*r;else if(r<0)l=Math.ceil(l*r)/r,u=Math.floor(u*r)/r;else break;i=r}return e},e}function aD(t,e){t=t.slice();var n,i=0,r=t.length-1,o=t[i],a=t[r];return a<o&&(n=i,i=r,r=n,n=o,o=a,a=n),t[i]=e.floor(o),t[r]=e.ceil(a),t}function ak(t){return Math.log(t)}function aR(t){return Math.exp(t)}function aL(t){return-Math.log(-t)}function aN(t){return-Math.exp(-t)}function aP(t){return isFinite(t)?+("1e"+t):t<0?0:t}function aI(t){return(e,n)=>-t(-e,n)}let aB=new Date,aU=new Date;function aF(t,e,n,i){function r(e){return t(e=0==arguments.length?new Date:new Date(+e)),e}return r.floor=e=>(t(e=new Date(+e)),e),r.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),r.round=t=>{let e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=(t,n)=>(e(t=new Date(+t),null==n?1:Math.floor(n)),t),r.range=(n,i,o)=>{let a;let s=[];if(n=r.ceil(n),o=null==o?1:Math.floor(o),!(n<i)||!(o>0))return s;do s.push(a=new Date(+n)),e(n,o),t(n);while(a<n&&n<i);return s},r.filter=n=>aF(e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},(t,i)=>{if(t>=t){if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););}}),n&&(r.count=(e,i)=>(aB.setTime(+e),aU.setTime(+i),t(aB),t(aU),Math.floor(n(aB,aU))),r.every=t=>isFinite(t=Math.floor(t))&&t>0?t>1?r.filter(i?e=>i(e)%t==0:e=>r.count(0,e)%t==0):r:null),r}let aj=aF(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);aj.every=t=>isFinite(t=Math.floor(t))&&t>0?t>1?aF(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):aj:null,aj.range;let aH=864e5,a$=7*aH,az=30*aH,aG=365*aH,aV=aF(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+1e3*e)},(t,e)=>(e-t)/1e3,t=>t.getUTCSeconds());aV.range;let aW=aF(t=>{t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},(t,e)=>{t.setTime(+t+6e4*e)},(t,e)=>(e-t)/6e4,t=>t.getMinutes());aW.range;let aY=aF(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+6e4*e)},(t,e)=>(e-t)/6e4,t=>t.getUTCMinutes());aY.range;let aZ=aF(t=>{t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())},(t,e)=>{t.setTime(+t+36e5*e)},(t,e)=>(e-t)/36e5,t=>t.getHours());aZ.range;let aq=aF(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+36e5*e)},(t,e)=>(e-t)/36e5,t=>t.getUTCHours());aq.range;let aX=aF(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/aH,t=>t.getDate()-1);aX.range;let aK=aF(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/aH,t=>t.getUTCDate()-1);aK.range;let aQ=aF(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/aH,t=>Math.floor(t/aH));function aJ(t){return aF(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(t,e)=>{t.setDate(t.getDate()+7*e)},(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/a$)}aQ.range;let a0=aJ(0),a1=aJ(1),a2=aJ(2),a3=aJ(3),a5=aJ(4),a4=aJ(5),a6=aJ(6);function a8(t){return aF(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)},(t,e)=>(e-t)/a$)}a0.range,a1.range,a2.range,a3.range,a5.range,a4.range,a6.range;let a7=a8(0),a9=a8(1),st=a8(2),se=a8(3),sn=a8(4),si=a8(5),sr=a8(6);a7.range,a9.range,st.range,se.range,sn.range,si.range,sr.range;let so=aF(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());so.range;let sa=aF(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());sa.range;let ss=aF(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ss.every=t=>isFinite(t=Math.floor(t))&&t>0?aF(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)}):null,ss.range;let sl=aF(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());sl.every=t=>isFinite(t=Math.floor(t))&&t>0?aF(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null,sl.range;let[su,sc]=function(t,e,n,i,r,o){let a=[[aV,1,1e3],[aV,5,5e3],[aV,15,15e3],[aV,30,3e4],[o,1,6e4],[o,5,3e5],[o,15,9e5],[o,30,18e5],[r,1,36e5],[r,3,108e5],[r,6,216e5],[r,12,432e5],[i,1,aH],[i,2,2*aH],[n,1,a$],[e,1,az],[e,3,3*az],[t,1,aG]];function s(e,n,i){let r=Math.abs(n-e)/i,o=tN(([,,t])=>t).right(a,r);if(o===a.length)return t.every(tK(e/aG,n/aG,i));if(0===o)return aj.every(Math.max(tK(e,n,i),1));let[s,l]=a[r/a[o-1][2]<a[o][2]/r?o-1:o];return s.every(l)}return[function(t,e,n){let i=e<t;i&&([t,e]=[e,t]);let r=n&&"function"==typeof n.range?n:s(t,e,n),o=r?r.range(t,+e+1):[];return i?o.reverse():o},s]}(ss,so,a0,aX,aZ,aW);function sh(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function sd(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function sf(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var sp={"-":"",_:" ",0:"0"},sg=/^\s*\d+/,sm=/^%/,sy=/[\\^$*+?|[\]().{}]/g;function sv(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?Array(n-o+1).join(e)+r:r)}function sb(t){return t.replace(sy,"\\$&")}function s_(t){return RegExp("^(?:"+t.map(sb).join("|")+")","i")}function sx(t){return new Map(t.map((t,e)=>[t.toLowerCase(),e]))}function sE(t,e,n){var i=sg.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function sw(t,e,n){var i=sg.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function sT(t,e,n){var i=sg.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function sS(t,e,n){var i=sg.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function sO(t,e,n){var i=sg.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function sM(t,e,n){var i=sg.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function sA(t,e,n){var i=sg.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function sC(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function sD(t,e,n){var i=sg.exec(e.slice(n,n+1));return i?(t.q=3*i[0]-3,n+i[0].length):-1}function sk(t,e,n){var i=sg.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function sR(t,e,n){var i=sg.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function sL(t,e,n){var i=sg.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function sN(t,e,n){var i=sg.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function sP(t,e,n){var i=sg.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function sI(t,e,n){var i=sg.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function sB(t,e,n){var i=sg.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function sU(t,e,n){var i=sg.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function sF(t,e,n){var i=sm.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function sj(t,e,n){var i=sg.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function sH(t,e,n){var i=sg.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function s$(t,e){return sv(t.getDate(),e,2)}function sz(t,e){return sv(t.getHours(),e,2)}function sG(t,e){return sv(t.getHours()%12||12,e,2)}function sV(t,e){return sv(1+aX.count(ss(t),t),e,3)}function sW(t,e){return sv(t.getMilliseconds(),e,3)}function sY(t,e){return sW(t,e)+"000"}function sZ(t,e){return sv(t.getMonth()+1,e,2)}function sq(t,e){return sv(t.getMinutes(),e,2)}function sX(t,e){return sv(t.getSeconds(),e,2)}function sK(t){var e=t.getDay();return 0===e?7:e}function sQ(t,e){return sv(a0.count(ss(t)-1,t),e,2)}function sJ(t){var e=t.getDay();return e>=4||0===e?a5(t):a5.ceil(t)}function s0(t,e){return t=sJ(t),sv(a5.count(ss(t),t)+(4===ss(t).getDay()),e,2)}function s1(t){return t.getDay()}function s2(t,e){return sv(a1.count(ss(t)-1,t),e,2)}function s3(t,e){return sv(t.getFullYear()%100,e,2)}function s5(t,e){return sv((t=sJ(t)).getFullYear()%100,e,2)}function s4(t,e){return sv(t.getFullYear()%1e4,e,4)}function s6(t,e){var n=t.getDay();return sv((t=n>=4||0===n?a5(t):a5.ceil(t)).getFullYear()%1e4,e,4)}function s8(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+sv(e/60|0,"0",2)+sv(e%60,"0",2)}function s7(t,e){return sv(t.getUTCDate(),e,2)}function s9(t,e){return sv(t.getUTCHours(),e,2)}function lt(t,e){return sv(t.getUTCHours()%12||12,e,2)}function le(t,e){return sv(1+aK.count(sl(t),t),e,3)}function ln(t,e){return sv(t.getUTCMilliseconds(),e,3)}function li(t,e){return ln(t,e)+"000"}function lr(t,e){return sv(t.getUTCMonth()+1,e,2)}function lo(t,e){return sv(t.getUTCMinutes(),e,2)}function la(t,e){return sv(t.getUTCSeconds(),e,2)}function ls(t){var e=t.getUTCDay();return 0===e?7:e}function ll(t,e){return sv(a7.count(sl(t)-1,t),e,2)}function lu(t){var e=t.getUTCDay();return e>=4||0===e?sn(t):sn.ceil(t)}function lc(t,e){return t=lu(t),sv(sn.count(sl(t),t)+(4===sl(t).getUTCDay()),e,2)}function lh(t){return t.getUTCDay()}function ld(t,e){return sv(a9.count(sl(t)-1,t),e,2)}function lf(t,e){return sv(t.getUTCFullYear()%100,e,2)}function lp(t,e){return sv((t=lu(t)).getUTCFullYear()%100,e,2)}function lg(t,e){return sv(t.getUTCFullYear()%1e4,e,4)}function lm(t,e){var n=t.getUTCDay();return sv((t=n>=4||0===n?sn(t):sn.ceil(t)).getUTCFullYear()%1e4,e,4)}function ly(){return"+0000"}function lv(){return"%"}function lb(t){return+t}function l_(t){return Math.floor(+t/1e3)}function lx(t){return new Date(t)}function lE(t){return t instanceof Date?+t:+new Date(+t)}function lw(){return av.apply((function t(e,n,i,r,o,a,s,l,u,c){var h=aA()(aw,aw),d=h.invert,f=h.domain,p=c(".%L"),g=c(":%S"),m=c("%I:%M"),y=c("%I %p"),v=c("%a %d"),b=c("%b %d"),_=c("%B"),x=c("%Y");function E(t){return(u(t)<t?p:l(t)<t?g:s(t)<t?m:a(t)<t?y:r(t)<t?o(t)<t?v:b:i(t)<t?_:x)(t)}return h.invert=function(t){return new Date(d(t))},h.domain=function(t){return arguments.length?f(Array.from(t,lE)):f().map(lx)},h.ticks=function(t){var n=f();return e(n[0],n[n.length-1],t??10)},h.tickFormat=function(t,e){return null==e?E:c(e)},h.nice=function(t){var e=f();return t&&"function"==typeof t.range||(t=n(e[0],e[e.length-1],t??10)),t?f(aD(e,t)):h},h.copy=function(){return aM(h,t(e,n,i,r,o,a,s,l,u,c))},h})(su,sc,ss,so,a0,aX,aZ,aW,aV,b).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function lT(t){return function(){return t}}b=(v=function(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,u=s_(r),c=sx(r),h=s_(o),d=sx(o),f=s_(a),p=sx(a),g=s_(s),m=sx(s),y=s_(l),v=sx(l),b={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:s$,e:s$,f:sY,g:s5,G:s6,H:sz,I:sG,j:sV,L:sW,m:sZ,M:sq,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:lb,s:l_,S:sX,u:sK,U:sQ,V:s0,w:s1,W:s2,x:null,X:null,y:s3,Y:s4,Z:s8,"%":lv},_={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:s7,e:s7,f:li,g:lp,G:lm,H:s9,I:lt,j:le,L:ln,m:lr,M:lo,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:lb,s:l_,S:la,u:ls,U:ll,V:lc,w:lh,W:ld,x:null,X:null,y:lf,Y:lg,Z:ly,"%":lv},x={a:function(t,e,n){var i=f.exec(e.slice(n));return i?(t.w=p.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){var i=h.exec(e.slice(n));return i?(t.w=d.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){var i=y.exec(e.slice(n));return i?(t.m=v.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){var i=g.exec(e.slice(n));return i?(t.m=m.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,n,i){return T(t,e,n,i)},d:sR,e:sR,f:sU,g:sA,G:sM,H:sN,I:sN,j:sL,L:sB,m:sk,M:sP,p:function(t,e,n){var i=u.exec(e.slice(n));return i?(t.p=c.get(i[0].toLowerCase()),n+i[0].length):-1},q:sD,Q:sj,s:sH,S:sI,u:sw,U:sT,V:sS,w:sE,W:sO,x:function(t,e,i){return T(t,n,e,i)},X:function(t,e,n){return T(t,i,e,n)},y:sA,Y:sM,Z:sC,"%":sF};function E(t,e){return function(n){var i,r,o,a=[],s=-1,l=0,u=t.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(r=sp[i=t.charAt(++s)])?i=t.charAt(++s):r="e"===i?" ":"0",(o=e[i])&&(i=o(n,r)),a.push(i),l=s+1);return a.push(t.slice(l,s)),a.join("")}}function w(t,e){return function(n){var i,r,o=sf(1900,void 0,1);if(T(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(!e||"Z"in o||(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=(i=sd(sf(o.y,0,1))).getUTCDay())>4||0===r?a9.ceil(i):a9(i),i=aK.offset(i,(o.V-1)*7),o.y=i.getUTCFullYear(),o.m=i.getUTCMonth(),o.d=i.getUTCDate()+(o.w+6)%7):(i=(r=(i=sh(sf(o.y,0,1))).getDay())>4||0===r?a1.ceil(i):a1(i),i=aX.offset(i,(o.V-1)*7),o.y=i.getFullYear(),o.m=i.getMonth(),o.d=i.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),r="Z"in o?sd(sf(o.y,0,1)).getUTCDay():sh(sf(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(r+5)%7:o.w+7*o.U-(r+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,sd(o)):sh(o)}}function T(t,e,n,i){for(var r,o,a=0,s=e.length,l=n.length;a<s;){if(i>=l)return -1;if(37===(r=e.charCodeAt(a++))){if(!(o=x[(r=e.charAt(a++))in sp?e.charAt(a++):r])||(i=o(t,n,i))<0)return -1}else if(r!=n.charCodeAt(i++))return -1}return i}return b.x=E(n,b),b.X=E(i,b),b.c=E(e,b),_.x=E(n,_),_.X=E(i,_),_.c=E(e,_),{format:function(t){var e=E(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=w(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=E(t+="",_);return e.toString=function(){return t},e},utcParse:function(t){var e=w(t+="",!0);return e.toString=function(){return t},e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).format,v.parse,v.utcFormat,v.utcParse;let lS=Math.abs,lO=Math.atan2,lM=Math.cos,lA=Math.max,lC=Math.min,lD=Math.sin,lk=Math.sqrt,lR=Math.PI,lL=lR/2,lN=2*lR;function lP(t){return t>=1?lL:t<=-1?-lL:Math.asin(t)}function lI(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{let t=Math.floor(n);if(!(t>=0))throw RangeError(`invalid digits: ${n}`);e=t}return t},()=>new oa(e)}function lB(t){return t.innerRadius}function lU(t){return t.outerRadius}function lF(t){return t.startAngle}function lj(t){return t.endAngle}function lH(t){return t&&t.padAngle}function l$(t,e,n,i,r,o,a){var s=t-n,l=e-i,u=(a?o:-o)/lk(s*s+l*l),c=u*l,h=-u*s,d=t+c,f=e+h,p=n+c,g=i+h,m=(d+p)/2,y=(f+g)/2,v=p-d,b=g-f,_=v*v+b*b,x=r-o,E=d*g-p*f,w=(b<0?-1:1)*lk(lA(0,x*x*_-E*E)),T=(E*b-v*w)/_,S=(-E*v-b*w)/_,O=(E*b+v*w)/_,M=(-E*v+b*w)/_,A=T-m,C=S-y,D=O-m,k=M-y;return A*A+C*C>D*D+k*k&&(T=O,S=M),{cx:T,cy:S,x01:-c,y01:-h,x11:T*(r/x-1),y11:S*(r/x-1)}}function lz(){var t=lB,e=lU,n=lT(0),i=null,r=lF,o=lj,a=lH,s=null,l=lI(u);function u(){var u,c,h=+t.apply(this,arguments),d=+e.apply(this,arguments),f=r.apply(this,arguments)-lL,p=o.apply(this,arguments)-lL,g=lS(p-f),m=p>f;if(s||(s=u=l()),d<h&&(c=d,d=h,h=c),d>1e-12){if(g>lN-1e-12)s.moveTo(d*lM(f),d*lD(f)),s.arc(0,0,d,f,p,!m),h>1e-12&&(s.moveTo(h*lM(p),h*lD(p)),s.arc(0,0,h,p,f,m));else{var y,v,b=f,_=p,x=f,E=p,w=g,T=g,S=a.apply(this,arguments)/2,O=S>1e-12&&(i?+i.apply(this,arguments):lk(h*h+d*d)),M=lC(lS(d-h)/2,+n.apply(this,arguments)),A=M,C=M;if(O>1e-12){var D=lP(O/h*lD(S)),k=lP(O/d*lD(S));(w-=2*D)>1e-12?(D*=m?1:-1,x+=D,E-=D):(w=0,x=E=(f+p)/2),(T-=2*k)>1e-12?(k*=m?1:-1,b+=k,_-=k):(T=0,b=_=(f+p)/2)}var R=d*lM(b),L=d*lD(b),N=h*lM(E),P=h*lD(E);if(M>1e-12){var I,B=d*lM(_),U=d*lD(_),F=h*lM(x),j=h*lD(x);if(g<lR){if(I=function(t,e,n,i,r,o,a,s){var l=n-t,u=i-e,c=a-r,h=s-o,d=h*l-c*u;if(!(d*d<1e-12))return d=(c*(e-o)-h*(t-r))/d,[t+d*l,e+d*u]}(R,L,F,j,B,U,N,P)){var H,$=R-I[0],z=L-I[1],G=B-I[0],V=U-I[1],W=1/lD(((H=($*G+z*V)/(lk($*$+z*z)*lk(G*G+V*V)))>1?0:H<-1?lR:Math.acos(H))/2),Y=lk(I[0]*I[0]+I[1]*I[1]);A=lC(M,(h-Y)/(W-1)),C=lC(M,(d-Y)/(W+1))}else A=C=0}}T>1e-12?C>1e-12?(y=l$(F,j,R,L,d,C,m),v=l$(B,U,N,P,d,C,m),s.moveTo(y.cx+y.x01,y.cy+y.y01),C<M?s.arc(y.cx,y.cy,C,lO(y.y01,y.x01),lO(v.y01,v.x01),!m):(s.arc(y.cx,y.cy,C,lO(y.y01,y.x01),lO(y.y11,y.x11),!m),s.arc(0,0,d,lO(y.cy+y.y11,y.cx+y.x11),lO(v.cy+v.y11,v.cx+v.x11),!m),s.arc(v.cx,v.cy,C,lO(v.y11,v.x11),lO(v.y01,v.x01),!m))):(s.moveTo(R,L),s.arc(0,0,d,b,_,!m)):s.moveTo(R,L),h>1e-12&&w>1e-12?A>1e-12?(y=l$(N,P,B,U,h,-A,m),v=l$(R,L,F,j,h,-A,m),s.lineTo(y.cx+y.x01,y.cy+y.y01),A<M?s.arc(y.cx,y.cy,A,lO(y.y01,y.x01),lO(v.y01,v.x01),!m):(s.arc(y.cx,y.cy,A,lO(y.y01,y.x01),lO(y.y11,y.x11),!m),s.arc(0,0,h,lO(y.cy+y.y11,y.cx+y.x11),lO(v.cy+v.y11,v.cx+v.x11),m),s.arc(v.cx,v.cy,A,lO(v.y11,v.x11),lO(v.y01,v.x01),!m))):s.arc(0,0,h,E,x,m):s.lineTo(N,P)}}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +o.apply(this,arguments))/2-lR/2;return[lM(i)*n,lD(i)*n]},u.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:lT(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:lT(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:lT(+t),u):n},u.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:lT(+t),u):i},u.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:lT(+t),u):r},u.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:lT(+t),u):o},u.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:lT(+t),u):a},u.context=function(t){return arguments.length?(s=t??null,u):s},u}function lG(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function lV(t){this._context=t}function lW(t){return new lV(t)}function lY(t){return t[0]}function lZ(t){return t[1]}function lq(t,e){var n=lT(!0),i=null,r=lW,o=null,a=lI(s);function s(s){var l,u,c,h=(s=lG(s)).length,d=!1;for(null==i&&(o=r(c=a())),l=0;l<=h;++l)!(l<h&&n(u=s[l],l,s))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+t(u,l,s),+e(u,l,s));if(c)return o=null,c+""||null}return t="function"==typeof t?t:void 0===t?lY:lT(t),e="function"==typeof e?e:void 0===e?lZ:lT(e),s.x=function(e){return arguments.length?(t="function"==typeof e?e:lT(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:lT(+t),s):e},s.defined=function(t){return arguments.length?(n="function"==typeof t?t:lT(!!t),s):n},s.curve=function(t){return arguments.length?(r=t,null!=i&&(o=r(i)),s):r},s.context=function(t){return arguments.length?(null==t?i=o=null:o=r(i=t),s):i},s}function lX(){}function lK(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function lQ(t){this._context=t}function lJ(t){return new lQ(t)}function l0(t){this._context=t}function l1(t){return new l0(t)}function l2(t){this._context=t}function l3(t){return new l2(t)}function l5(t,e){this._basis=new lQ(t),this._beta=e}Array.prototype.slice,lV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},lQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:lK(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:lK(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},l0.prototype={areaStart:lX,areaEnd:lX,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:lK(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},l2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:lK(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},l5.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i,r=t[0],o=e[0],a=t[n]-r,s=e[n]-o,l=-1;++l<=n;)i=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(r+i*a),this._beta*e[l]+(1-this._beta)*(o+i*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};let l4=function t(e){function n(t){return 1===e?new lQ(t):new l5(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function l6(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function l8(t,e){this._context=t,this._k=(1-e)/6}l8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:l6(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:l6(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};let l7=function t(e){function n(t){return new l8(t,e)}return n.tension=function(e){return t(+e)},n}(0);function l9(t,e){this._context=t,this._k=(1-e)/6}l9.prototype={areaStart:lX,areaEnd:lX,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:l6(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};let ut=function t(e){function n(t){return new l9(t,e)}return n.tension=function(e){return t(+e)},n}(0);function ue(t,e){this._context=t,this._k=(1-e)/6}ue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:l6(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};let un=function t(e){function n(t){return new ue(t,e)}return n.tension=function(e){return t(+e)},n}(0);function ui(t,e,n){var i=t._x1,r=t._y1,o=t._x2,a=t._y2;if(t._l01_a>1e-12){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,r=(r*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>1e-12){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*u+t._x1*t._l23_2a-e*t._l12_2a)/c,a=(a*u+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(i,r,o,a,t._x2,t._y2)}function ur(t,e){this._context=t,this._alpha=e}ur.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:ui(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};let uo=function t(e){function n(t){return e?new ur(t,e):new l8(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function ua(t,e){this._context=t,this._alpha=e}ua.prototype={areaStart:lX,areaEnd:lX,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ui(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};let us=function t(e){function n(t){return e?new ua(t,e):new l9(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function ul(t,e){this._context=t,this._alpha=e}ul.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ui(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};let uu=function t(e){function n(t){return e?new ul(t,e):new ue(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function uc(t){this._context=t}function uh(t){return new uc(t)}function ud(t,e,n){var i=t._x1-t._x0,r=e-t._x1,o=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0);return((o<0?-1:1)+(a<0?-1:1))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs((o*r+a*i)/(i+r)))||0}function uf(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function up(t,e,n){var i=t._x0,r=t._y0,o=t._x1,a=t._y1,s=(o-i)/3;t._context.bezierCurveTo(i+s,r+s*e,o-s,a-s*n,o,a)}function ug(t){this._context=t}function um(t){this._context=new uy(t)}function uy(t){this._context=t}function uv(t){return new ug(t)}function ub(t){return new um(t)}function u_(t){this._context=t}function ux(t){var e,n,i=t.length-1,r=Array(i),o=Array(i),a=Array(i);for(r[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<i-1;++e)r[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(r[i-1]=2,o[i-1]=7,a[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=r[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(r[i-1]=a[i-1]/o[i-1],e=i-2;e>=0;--e)r[e]=(a[e]-r[e+1])/o[e];for(o[i-1]=(t[i]+r[i-1])/2,e=0;e<i-1;++e)o[e]=2*t[e+1]-r[e+1];return[r,o]}function uE(t){return new u_(t)}function uw(t,e){this._context=t,this._t=e}function uT(t){return new uw(t,.5)}function uS(t){return new uw(t,0)}function uO(t){return new uw(t,1)}function uM(t,e){if((r=t.length)>1)for(var n,i,r,o=1,a=t[e[0]],s=a.length;o<r;++o)for(i=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function uA(t){for(var e=t.length,n=Array(e);--e>=0;)n[e]=e;return n}function uC(t,e){return t[e]}function uD(t){let e=[];return e.key=t,e}function uk(){var t=lT([]),e=uA,n=uM,i=uC;function r(r){var o,a,s=Array.from(t.apply(this,arguments),uD),l=s.length,u=-1;for(let t of r)for(o=0,++u;o<l;++o)(s[o][u]=[0,+i(t,s[o].key,u,r)]).data=t;for(o=0,a=lG(e(s));o<l;++o)s[a[o]].index=o;return n(s,a),s}return r.keys=function(e){return arguments.length?(t="function"==typeof e?e:lT(Array.from(e)),r):t},r.value=function(t){return arguments.length?(i="function"==typeof t?t:lT(+t),r):i},r.order=function(t){return arguments.length?(e=null==t?uA:"function"==typeof t?t:lT(Array.from(t)),r):e},r.offset=function(t){return arguments.length?(n=t??uM,r):n},r}function uR(t,e){if((s=t.length)>0)for(var n,i,r,o,a,s,l=0,u=t[e[0]].length;l<u;++l)for(o=a=0,n=0;n<s;++n)(r=(i=t[e[n]][l])[1]-i[0])>0?(i[0]=o,i[1]=o+=r):r<0?(i[1]=a,i[0]=a+=r):(i[0]=0,i[1]=r)}function uL(t,e,n){this.k=t,this.x=e,this.y=n}function uN(t){return (e={})=>{let n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}function uP(t){return(e,n)=>{let i;let r=null!=n&&n.context?String(n.context):"standalone";if("formatting"===r&&t.formattingValues){let e=t.defaultFormattingWidth||t.defaultWidth,r=null!=n&&n.width?String(n.width):e;i=t.formattingValues[r]||t.formattingValues[e]}else{let e=t.defaultWidth,r=null!=n&&n.width?String(n.width):t.defaultWidth;i=t.values[r]||t.values[e]}let o=t.argumentCallback?t.argumentCallback(e):e;return i[o]}}function uI(t){return(e,n={})=>{let i;let r=n.width,o=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(o);if(!a)return null;let s=a[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(l)?function(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}(l,t=>t.test(s)):function(t,e){for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}(l,t=>t.test(s));i=t.valueCallback?t.valueCallback(u):u,i=n.valueCallback?n.valueCallback(i):i;let c=e.slice(s.length);return{value:i,rest:c}}}function uB(t){let e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new t.constructor(+t):new Date("number"==typeof t||"[object Number]"===e||"string"==typeof t||"[object String]"===e?t:NaN)}uc.prototype={areaStart:lX,areaEnd:lX,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},ug.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:up(this,this._t0,uf(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,!((t=+t)===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,up(this,uf(this,n=ud(this,t,e)),n);break;default:up(this,this._t0,n=ud(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(um.prototype=Object.create(ug.prototype)).point=function(t,e){ug.prototype.point.call(this,e,t)},uy.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,o){this._context.bezierCurveTo(e,t,i,n,o,r)}},u_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n){if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=ux(t),r=ux(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],t[a],e[a])}(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},uw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}},uL.prototype={constructor:uL,scale:function(t){return 1===t?this:new uL(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new uL(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},uL.prototype;let uU={};function uF(t,e){var n,i,r,o;let a=(null==e?void 0:e.weekStartsOn)??(null==(i=null==(n=null==e?void 0:e.locale)?void 0:n.options)?void 0:i.weekStartsOn)??uU.weekStartsOn??(null==(o=null==(r=uU.locale)?void 0:r.options)?void 0:o.weekStartsOn)??0,s=uB(t),l=s.getDay();return s.setDate(s.getDate()-((l<a?7:0)+l-a)),s.setHours(0,0,0,0),s}let uj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},uH={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},u$={ordinalNumber:(t,e)=>{let n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:uP({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:uP({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:t=>t-1}),month:uP({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:uP({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:uP({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},uz={ordinalNumber:(r={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:t=>parseInt(t,10)},(t,e={})=>{let n=t.match(r.matchPattern);if(!n)return null;let i=n[0],o=t.match(r.parsePattern);if(!o)return null;let a=r.valueCallback?r.valueCallback(o[0]):o[0];a=e.valueCallback?e.valueCallback(a):a;let s=t.slice(i.length);return{value:a,rest:s}}),era:uI({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:uI({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:t=>t+1}),month:uI({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:uI({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:uI({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},uG={date:uN({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:uN({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:uN({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},uV={code:"en-US",formatDistance:(t,e,n)=>{let i;let r=uj[t];return i="string"==typeof r?r:1===e?r.one:r.other.replace("{{count}}",e.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i},formatLong:uG,formatRelative:(t,e,n,i)=>uH[t],localize:u$,match:uz,options:{weekStartsOn:0,firstWeekContainsDate:1}};var uW="object"==typeof global&&global&&global.Object===Object&&global,uY="object"==typeof self&&self&&self.Object===Object&&self,uZ=uW||uY||Function("return this")(),uq=uZ.Symbol,uX=Object.prototype,uK=uX.hasOwnProperty,uQ=uX.toString,uJ=uq?uq.toStringTag:void 0,u0=Object.prototype.toString,u1=uq?uq.toStringTag:void 0;function u2(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":u1&&u1 in Object(t)?function(t){var e=uK.call(t,uJ),n=t[uJ];try{t[uJ]=void 0;var i=!0}catch{}var r=uQ.call(t);return i&&(e?t[uJ]=n:delete t[uJ]),r}(t):u0.call(t)}function u3(t){return null!=t&&"object"==typeof t}function u5(t){return"symbol"==typeof t||u3(t)&&"[object Symbol]"==u2(t)}var u4=Array.isArray,u6=1/0,u8=uq?uq.prototype:void 0,u7=u8?u8.toString:void 0;function u9(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ct(t){return t}function ce(t){if(!u9(t))return!1;var e=u2(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}var cn=uZ["__core-js_shared__"],ci=(o=/[^.]+$/.exec(cn&&cn.keys&&cn.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"",cr=Function.prototype.toString;function co(t){if(null!=t){try{return cr.call(t)}catch{}try{return t+""}catch{}}return""}var ca=/^\[object .+?Constructor\]$/,cs=Object.prototype,cl=Function.prototype.toString,cu=cs.hasOwnProperty,cc=RegExp("^"+cl.call(cu).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ch(t,e){var n=null==t?void 0:t[e];return u9(n)&&(!ci||!(ci in n))&&(ce(n)?cc:ca).test(co(n))?n:void 0}var cd=ch(uZ,"WeakMap"),cf=Object.create,cp=function(){function t(){}return function(e){if(!u9(e))return{};if(cf)return cf(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function cg(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}var cm=Date.now,cy=function(){try{var t=ch(Object,"defineProperty");return t({},"",{}),t}catch{}}(),cv=cy?function(t,e){return cy(t,"toString",{configurable:!0,enumerable:!1,value:function(){return e},writable:!0})}:ct,cb=(a=0,s=0,function(){var t=cm(),e=16-(t-s);if(s=t,e>0){if(++a>=800)return arguments[0]}else a=0;return cv.apply(void 0,arguments)});function c_(t){return t!=t}function cx(t,e){return!!(null==t?0:t.length)&&(e==e?function(t,e,n){for(var i=-1,r=t.length;++i<r;)if(t[i]===e)return i;return -1}(t,e,0):function(t,e,n,i){for(var r=t.length,o=0+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return -1}(t,c_,0))>-1}var cE=/^(?:0|[1-9]\d*)$/;function cw(t,e){var n=typeof t;return!!(e=e??9007199254740991)&&("number"==n||"symbol"!=n&&cE.test(t))&&t>-1&&t%1==0&&t<e}function cT(t,e,n){"__proto__"==e&&cy?cy(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function cS(t,e){return t===e||t!=t&&e!=e}var cO=Object.prototype.hasOwnProperty;function cM(t,e,n){var i=t[e];cO.call(t,e)&&cS(i,n)&&(void 0!==n||e in t)||cT(t,e,n)}function cA(t,e,n,i){var r=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=i?i(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),r?cT(n,s,l):cM(n,s,l)}return n}var cC=Math.max;function cD(t,e){var n;return cb((n=cC(void 0===(n=e)?t.length-1:n,0),function(){for(var e=arguments,i=-1,r=cC(e.length-n,0),o=Array(r);++i<r;)o[i]=e[n+i];i=-1;for(var a=Array(n+1);++i<n;)a[i]=e[i];return a[n]=o,function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,a)}),t+"")}function ck(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function cR(t){return null!=t&&ck(t.length)&&!ce(t)}var cL=Object.prototype;function cN(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||cL;return t===n}function cP(t){return u3(t)&&"[object Arguments]"==u2(t)}var cI=Object.prototype,cB=cI.hasOwnProperty,cU=cI.propertyIsEnumerable,cF=cP(function(){return arguments}())?cP:function(t){return u3(t)&&cB.call(t,"callee")&&!cU.call(t,"callee")},cj="object"==typeof exports&&exports&&!exports.nodeType&&exports,cH=cj&&"object"==typeof module&&module&&!module.nodeType&&module,c$=cH&&cH.exports===cj?uZ.Buffer:void 0,cz=c$?c$.isBuffer:void 0;let cG=cz||function(){return!1};var cV={};function cW(t){return function(e){return t(e)}}cV["[object Float32Array]"]=cV["[object Float64Array]"]=cV["[object Int8Array]"]=cV["[object Int16Array]"]=cV["[object Int32Array]"]=cV["[object Uint8Array]"]=cV["[object Uint8ClampedArray]"]=cV["[object Uint16Array]"]=cV["[object Uint32Array]"]=!0,cV["[object Arguments]"]=cV["[object Array]"]=cV["[object ArrayBuffer]"]=cV["[object Boolean]"]=cV["[object DataView]"]=cV["[object Date]"]=cV["[object Error]"]=cV["[object Function]"]=cV["[object Map]"]=cV["[object Number]"]=cV["[object Object]"]=cV["[object RegExp]"]=cV["[object Set]"]=cV["[object String]"]=cV["[object WeakMap]"]=!1;var cY="object"==typeof exports&&exports&&!exports.nodeType&&exports,cZ=cY&&"object"==typeof module&&module&&!module.nodeType&&module,cq=cZ&&cZ.exports===cY&&uW.process,cX=function(){try{return cZ&&cZ.require&&cZ.require("util").types||cq&&cq.binding&&cq.binding("util")}catch{}}(),cK=cX&&cX.isTypedArray,cQ=cK?cW(cK):function(t){return u3(t)&&ck(t.length)&&!!cV[u2(t)]},cJ=Object.prototype.hasOwnProperty;function c0(t,e){var n=u4(t),i=!n&&cF(t),r=!n&&!i&&cG(t),o=!n&&!i&&!r&&cQ(t),a=n||i||r||o,s=a?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],l=s.length;for(var u in t)(e||cJ.call(t,u))&&!(a&&("length"==u||r&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||cw(u,l)))&&s.push(u);return s}function c1(t,e){return function(n){return t(e(n))}}var c2=c1(Object.keys,Object),c3=Object.prototype.hasOwnProperty;function c5(t){if(!cN(t))return c2(t);var e=[];for(var n in Object(t))c3.call(t,n)&&"constructor"!=n&&e.push(n);return e}function c4(t){return cR(t)?c0(t):c5(t)}var c6=Object.prototype.hasOwnProperty;function c8(t){return cR(t)?c0(t,!0):function(t){if(!u9(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=cN(t),n=[];for(var i in t)"constructor"==i&&(e||!c6.call(t,i))||n.push(i);return n}(t)}var c7=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c9=/^\w*$/;function ht(t,e){if(u4(t))return!1;var n=typeof t;return!!("number"==n||"symbol"==n||"boolean"==n||null==t||u5(t))||c9.test(t)||!c7.test(t)||null!=e&&t in Object(e)}var he=ch(Object,"create"),hn=Object.prototype.hasOwnProperty,hi=Object.prototype.hasOwnProperty;function hr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function ho(t,e){for(var n=t.length;n--;)if(cS(t[n][0],e))return n;return -1}hr.prototype.clear=function(){this.__data__=he?he(null):{},this.size=0},hr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},hr.prototype.get=function(t){var e=this.__data__;if(he){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return hn.call(e,t)?e[t]:void 0},hr.prototype.has=function(t){var e=this.__data__;return he?void 0!==e[t]:hi.call(e,t)},hr.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=he&&void 0===e?"__lodash_hash_undefined__":e,this};var ha=Array.prototype.splice;function hs(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}hs.prototype.clear=function(){this.__data__=[],this.size=0},hs.prototype.delete=function(t){var e=this.__data__,n=ho(e,t);return!(n<0)&&(n==e.length-1?e.pop():ha.call(e,n,1),--this.size,!0)},hs.prototype.get=function(t){var e=this.__data__,n=ho(e,t);return n<0?void 0:e[n][1]},hs.prototype.has=function(t){return ho(this.__data__,t)>-1},hs.prototype.set=function(t,e){var n=this.__data__,i=ho(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this};var hl=ch(uZ,"Map");function hu(t,e){var n,i=t.__data__;return("string"==(n=typeof e)||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e)?i["string"==typeof e?"string":"hash"]:i.map}function hc(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function hh(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw TypeError("Expected a function");var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(hh.Cache||hc),n}hc.prototype.clear=function(){this.size=0,this.__data__={hash:new hr,map:new(hl||hs),string:new hr}},hc.prototype.delete=function(t){var e=hu(this,t).delete(t);return this.size-=e?1:0,e},hc.prototype.get=function(t){return hu(this,t).get(t)},hc.prototype.has=function(t){return hu(this,t).has(t)},hc.prototype.set=function(t,e){var n=hu(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},hh.Cache=hc;var hd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hf=/\\(\\)?/g,hp=(u=(l=hh(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(hd,function(t,n,i,r){e.push(i?r.replace(hf,"$1"):n||t)}),e},function(t){return 500===u.size&&u.clear(),t})).cache,l);function hg(t){return null==t?"":function t(e){if("string"==typeof e)return e;if(u4(e))return function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}(e,t)+"";if(u5(e))return u7?u7.call(e):"";var n=e+"";return"0"==n&&1/e==-u6?"-0":n}(t)}function hm(t,e){return u4(t)?t:ht(t,e)?[t]:hp(hg(t))}var hy=1/0;function hv(t){if("string"==typeof t||u5(t))return t;var e=t+"";return"0"==e&&1/t==-hy?"-0":e}function hb(t,e){e=hm(e,t);for(var n=0,i=e.length;null!=t&&n<i;)t=t[hv(e[n++])];return n&&n==i?t:void 0}function h_(t,e,n){var i=null==t?void 0:hb(t,e);return void 0===i?n:i}function hx(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}var hE=uq?uq.isConcatSpreadable:void 0;function hw(t){return u4(t)||cF(t)||!!(hE&&t&&t[hE])}function hT(t,e,n,i,r){var o=-1,a=t.length;for(n||(n=hw),r||(r=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?hT(s,e-1,n,i,r):hx(r,s):i||(r[r.length]=s)}return r}var hS=c1(Object.getPrototypeOf,Object),hO=Object.prototype,hM=Function.prototype.toString,hA=hO.hasOwnProperty,hC=hM.call(Object);function hD(t){var e=this.__data__=new hs(t);this.size=e.size}hD.prototype.clear=function(){this.__data__=new hs,this.size=0},hD.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},hD.prototype.get=function(t){return this.__data__.get(t)},hD.prototype.has=function(t){return this.__data__.has(t)},hD.prototype.set=function(t,e){var n=this.__data__;if(n instanceof hs){var i=n.__data__;if(!hl||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new hc(i)}return n.set(t,e),this.size=n.size,this};var hk="object"==typeof exports&&exports&&!exports.nodeType&&exports,hR=hk&&"object"==typeof module&&module&&!module.nodeType&&module,hL=hR&&hR.exports===hk?uZ.Buffer:void 0,hN=hL?hL.allocUnsafe:void 0;function hP(t,e){if(e)return t.slice();var n=t.length,i=hN?hN(n):new t.constructor(n);return t.copy(i),i}function hI(){return[]}var hB=Object.prototype.propertyIsEnumerable,hU=Object.getOwnPropertySymbols,hF=hU?function(t){return null==t?[]:function(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}(hU(t=Object(t)),function(e){return hB.call(t,e)})}:hI,hj=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)hx(e,hF(t)),t=hS(t);return e}:hI;function hH(t,e,n){var i=e(t);return u4(t)?i:hx(i,n(t))}function h$(t){return hH(t,c4,hF)}function hz(t){return hH(t,c8,hj)}var hG=ch(uZ,"DataView"),hV=ch(uZ,"Promise"),hW=ch(uZ,"Set"),hY="[object Map]",hZ="[object Promise]",hq="[object Set]",hX="[object WeakMap]",hK="[object DataView]",hQ=co(hG),hJ=co(hl),h0=co(hV),h1=co(hW),h2=co(cd),h3=u2;(hG&&h3(new hG(new ArrayBuffer(1)))!=hK||hl&&h3(new hl)!=hY||hV&&h3(hV.resolve())!=hZ||hW&&h3(new hW)!=hq||cd&&h3(new cd)!=hX)&&(h3=function(t){var e=u2(t),n="[object Object]"==e?t.constructor:void 0,i=n?co(n):"";if(i)switch(i){case hQ:return hK;case hJ:return hY;case h0:return hZ;case h1:return hq;case h2:return hX}return e});let h5=h3;var h4=Object.prototype.hasOwnProperty,h6=uZ.Uint8Array;function h8(t){var e=new t.constructor(t.byteLength);return new h6(e).set(new h6(t)),e}var h7=/\w*$/,h9=uq?uq.prototype:void 0,dt=h9?h9.valueOf:void 0;function de(t,e){var n=e?h8(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function dn(t){return"function"!=typeof t.constructor||cN(t)?{}:cp(hS(t))}var di=cX&&cX.isMap,dr=di?cW(di):function(t){return u3(t)&&"[object Map]"==h5(t)},da=cX&&cX.isSet,ds=da?cW(da):function(t){return u3(t)&&"[object Set]"==h5(t)},dl="[object Arguments]",du="[object Function]",dc="[object Object]",dh={};function dd(t){return function t(e,n,i,r,o,a){var s,l=1&n,u=2&n,c=4&n;if(i&&(s=o?i(e,r,o,a):i(e)),void 0!==s)return s;if(!u9(e))return e;var h=u4(e);if(h){if(d=e.length,f=new e.constructor(d),d&&"string"==typeof e[0]&&h4.call(e,"index")&&(f.index=e.index,f.input=e.input),s=f,!l)return cg(e,s)}else{var d,f,p,g,m,y,v=h5(e),b=v==du||"[object GeneratorFunction]"==v;if(cG(e))return hP(e,l);if(v==dc||v==dl||b&&!o){if(s=u||b?{}:dn(e),!l)return u?(g=(p=s)&&cA(e,c8(e),p),cA(e,hj(e),g)):(y=(m=s)&&cA(e,c4(e),m),cA(e,hF(e),y))}else{if(!dh[v])return o?e:{};s=function(t,e,n){var i,r,o=t.constructor;switch(e){case"[object ArrayBuffer]":return h8(t);case"[object Boolean]":case"[object Date]":return new o(+t);case"[object DataView]":return i=n?h8(t.buffer):t.buffer,new t.constructor(i,t.byteOffset,t.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return de(t,n);case"[object Map]":case"[object Set]":return new o;case"[object Number]":case"[object String]":return new o(t);case"[object RegExp]":return(r=new t.constructor(t.source,h7.exec(t))).lastIndex=t.lastIndex,r;case"[object Symbol]":return dt?Object(dt.call(t)):{}}}(e,v,l)}}a||(a=new hD);var _=a.get(e);if(_)return _;a.set(e,s),ds(e)?e.forEach(function(r){s.add(t(r,n,i,r,e,a))}):dr(e)&&e.forEach(function(r,o){s.set(o,t(r,n,i,o,e,a))});var x=c?u?hz:h$:u?c8:c4,E=h?void 0:x(e);return function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););}(E||e,function(r,o){E&&(r=e[o=r]),cM(s,o,t(r,n,i,o,e,a))}),s}(t,5)}function df(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new hc;++e<n;)this.add(t[e])}function dp(t,e){return t.has(e)}function dg(t,e,n,i,r,o){var a=1&n,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(t),c=o.get(e);if(u&&c)return u==e&&c==t;var h=-1,d=!0,f=2&n?new df:void 0;for(o.set(t,e),o.set(e,t);++h<s;){var p=t[h],g=e[h];if(i)var m=a?i(g,p,h,e,t,o):i(p,g,h,t,e,o);if(void 0!==m){if(m)continue;d=!1;break}if(f){if(!function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}(e,function(t,e){if(!dp(f,e)&&(p===t||r(p,t,n,i,o)))return f.push(e)})){d=!1;break}}else if(!(p===g||r(p,g,n,i,o))){d=!1;break}}return o.delete(t),o.delete(e),d}function dm(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function dy(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}dh[dl]=dh["[object Array]"]=dh["[object ArrayBuffer]"]=dh["[object DataView]"]=dh["[object Boolean]"]=dh["[object Date]"]=dh["[object Float32Array]"]=dh["[object Float64Array]"]=dh["[object Int8Array]"]=dh["[object Int16Array]"]=dh["[object Int32Array]"]=dh["[object Map]"]=dh["[object Number]"]=dh[dc]=dh["[object RegExp]"]=dh["[object Set]"]=dh["[object String]"]=dh["[object Symbol]"]=dh["[object Uint8Array]"]=dh["[object Uint8ClampedArray]"]=dh["[object Uint16Array]"]=dh["[object Uint32Array]"]=!0,dh["[object Error]"]=dh[du]=dh["[object WeakMap]"]=!1,df.prototype.add=df.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},df.prototype.has=function(t){return this.__data__.has(t)};var dv=uq?uq.prototype:void 0,db=dv?dv.valueOf:void 0,d_=Object.prototype.hasOwnProperty,dx="[object Arguments]",dE="[object Array]",dw="[object Object]",dT=Object.prototype.hasOwnProperty;function dS(t,e,n,i,r){return t===e||(null!=t&&null!=e&&(u3(t)||u3(e))?function(t,e,n,i,r,o){var a=u4(t),s=u4(e),l=a?dE:h5(t),u=s?dE:h5(e);l=l==dx?dw:l,u=u==dx?dw:u;var c=l==dw,h=u==dw,d=l==u;if(d&&cG(t)){if(!cG(e))return!1;a=!0,c=!1}if(d&&!c)return o||(o=new hD),a||cQ(t)?dg(t,e,n,i,r,o):function(t,e,n,i,r,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)break;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new h6(t),new h6(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return cS(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=dm;case"[object Set]":var l=1&i;if(s||(s=dy),t.size!=e.size&&!l)break;var u=a.get(t);if(u)return u==e;i|=2,a.set(t,e);var c=dg(s(t),s(e),i,r,o,a);return a.delete(t),c;case"[object Symbol]":if(db)return db.call(t)==db.call(e)}return!1}(t,e,l,n,i,r,o);if(!(1&n)){var f=c&&dT.call(t,"__wrapped__"),p=h&&dT.call(e,"__wrapped__");if(f||p){var g=f?t.value():t,m=p?e.value():e;return o||(o=new hD),r(g,m,n,i,o)}}return!!d&&(o||(o=new hD),function(t,e,n,i,r,o){var a=1&n,s=h$(t),l=s.length;if(l!=h$(e).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in e:d_.call(e,c)))return!1}var h=o.get(t),d=o.get(e);if(h&&d)return h==e&&d==t;var f=!0;o.set(t,e),o.set(e,t);for(var p=a;++u<l;){var g=t[c=s[u]],m=e[c];if(i)var y=a?i(m,g,c,e,t,o):i(g,m,c,t,e,o);if(!(void 0===y?g===m||r(g,m,n,i,o):y)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var v=t.constructor,b=e.constructor;v!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b)&&(f=!1)}return o.delete(t),o.delete(e),f}(t,e,n,i,r,o))}(t,e,n,i,dS,r):t!=t&&e!=e)}function dO(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}function dM(t,e){return null!=t&&e in Object(t)}function dA(t){var e,n,i,r,o;return"function"==typeof t?t:null==t?ct:"object"==typeof t?u4(t)?(e=t[0],n=t[1],ht(e)&&(i=n)==i&&!u9(i)?dO(hv(e),n):function(t){var i=h_(t,e);return void 0===i&&i===n?null!=t&&function(t,e,n){e=hm(e,t);for(var i=-1,r=e.length,o=!1;++i<r;){var a=hv(e[i]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++i!=r?o:!!(r=null==t?0:t.length)&&ck(r)&&cw(a,r)&&(u4(t)||cF(t))}(t,e,dM):dS(n,i,3)}):1==(r=function(t){for(var e=c4(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,r==r&&!u9(r)]}return e}(t)).length&&r[0][2]?dO(r[0][0],r[0][1]):function(e){return e===t||function(t,e,n,i){var r=n.length,o=r,a=!i;if(null==t)return!o;for(t=Object(t);r--;){var s=n[r];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++r<o;){var l=(s=n[r])[0],u=t[l],c=s[1];if(a&&s[2]){if(void 0===u&&!(l in t))return!1}else{var h=new hD;if(i)var d=i(u,c,l,t,e,h);if(!(void 0===d?dS(c,u,3,i,h):d))return!1}}return!0}(e,t,r)}:ht(t)?(o=hv(t),function(t){return null==t?void 0:t[o]}):function(e){return hb(e,t)}}var dC=function(t,e,n){for(var i=-1,r=Object(t),o=n(t),a=o.length;a--;){var s=o[++i];if(!1===e(r[s],s,r))break}return t};function dD(t,e,n){(void 0===n||cS(t[e],n))&&(void 0!==n||e in t)||cT(t,e,n)}function dk(t){return u3(t)&&cR(t)}function dR(t,e){if(!("constructor"===e&&"function"==typeof t[e])&&"__proto__"!=e)return t[e]}function dL(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}var dN=Object.prototype.hasOwnProperty,dP=(c=function(t,e,n){!function t(e,n,i,r,o){e!==n&&dC(n,function(a,s){if(o||(o=new hD),u9(a))!function(t,e,n,i,r,o,a){var s=dR(t,n),l=dR(e,n),u=a.get(l);if(u){dD(t,n,u);return}var c=o?o(s,l,n+"",t,e,a):void 0,h=void 0===c;if(h){var d=u4(l),f=!d&&cG(l),p=!d&&!f&&cQ(l);c=l,d||f||p?u4(s)?c=s:dk(s)?c=cg(s):f?(h=!1,c=hP(l,!0)):p?(h=!1,c=de(l,!0)):c=[]:function(t){if(!u3(t)||"[object Object]"!=u2(t))return!1;var e=hS(t);if(null===e)return!0;var n=hA.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&hM.call(n)==hC}(l)||cF(l)?(c=s,cF(s)?c=cA(s,c8(s)):(!u9(s)||ce(s))&&(c=dn(l))):h=!1}h&&(a.set(l,c),r(c,l,i,o,a),a.delete(l)),dD(t,n,c)}(e,n,s,i,t,r,o);else{var l=r?r(dR(e,s),a,s+"",e,n,o):void 0;void 0===l&&(l=a),dD(e,s,l)}},c8)}(t,e,n)},cD(function(t,e){var n=-1,i=e.length,r=i>1?e[i-1]:void 0,o=i>2?e[2]:void 0;for(r=c.length>3&&"function"==typeof r?(i--,r):void 0,o&&function(t,e,n){if(!u9(n))return!1;var i=typeof e;return("number"==i?!!(cR(n)&&cw(e,n.length)):"string"==i&&(e in n))&&cS(n[e],t)}(e[0],e[1],o)&&(r=i<3?void 0:r,i=1),t=Object(t);++n<i;){var a=e[n];a&&c(t,a,n,r)}return t})),dI=hW&&1/dy(new hW([,-0]))[1]==1/0?function(t){return new hW(t)}:function(){};function dB(t,e,n){var i=-1,r=cx,o=t.length,a=!0,s=[],l=s;if(n)a=!1,r=dL;else if(o>=200){var u=e?null:dI(t);if(u)return dy(u);a=!1,r=dp,l=new df}else l=e?[]:s;t:for(;++i<o;){var c=t[i],h=e?e(c):c;if(c=n||0!==c?c:0,a&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),s.push(c)}else r(l,h,n)||(l!==s&&l.push(h),s.push(c))}return s}var dU=cD(function(t){var e,n=(e=null==t?0:t.length)?t[e-1]:void 0;return dk(n)&&(n=void 0),dB(hT(t,1,dk,!0),dA(n))});function dF(t){return t&&t.length?dB(t):[]}let dj={ticks:{number:7,rotateIfSmallerThan:30,verticalSpaceRatio:2.5,horizontalSpaceRatio:3.5},ratio:{reference:"value",compareTo:"marker"},paddingRatio:.1,hover:{rectanglePadding:4}},dH={duration:1e3,ease:rF,zoomLevel:3},d$={pairingOptions:{"1-color":4,"2-color":5,"3-color":5,"4-color":3,"5-color":2,"14-color":1}},dz={items:{status:{ACTIVE:1,DISABLED:0},horizontalSpace:12,verticalSpace:24,textYOffset:8,spaceAfter:4},checkbox:{radius:6.5},radius:{iconData:[{cx:7,cy:7,r:6.5},{cx:7,cy:10,r:3.5}],fill:null,stroke:"#8c8c8c"},line:{yPosition:6,width:24,strokeWidth:1.4,fill:null,stroke:"#999999"},area:{width:24,height:14,fill:"#6f6f6f",stroke:null},size:{iconData:[{width:23,height:12},{width:13,height:6}],fill:null,stroke:"#8D8D8D"},quartile:{iconData:[{x:0,y:0,width:24,height:13},{x:11,y:4,width:1,height:4}]},zoom:{iconData:[{x:0,y:0,width:12,height:12}],color:"#8D8D8D"},color:{barWidth:300,barHeight:8,axisYTranslation:10}},dG={statusBar:{paddingRight:5},status:{indicatorSize:16,paddingLeft:15},total:{paddingLeft:36,paddingRight:24},height:{default:8,proportional:16},dividerWidth:2},dV={radiusOffset:-15,innerRadius:2,padAngle:.007,hoverArc:{outerRadiusOffset:3},xOffset:30,yOffset:20,yOffsetCallout:10,callout:{minSliceDegree:5,offsetX:15,offsetY:12,horizontalLineLength:8,textMargin:2}},dW={default:{size:24}},dY={defaultOffset:4,horizontalOffset:10},dZ={default:{duration:300},pie_slice_mouseover:{duration:100},pie_slice_mouseout:{duration:100},pie_chart_titles:{duration:375},graph_element_mouseover_fill_update:{duration:100},graph_element_mouseout_fill_update:{duration:100}},dq={height:{[to.GRAPH_VIEW]:32,[to.SLIDER_VIEW]:10},spacerHeight:8,handleWidth:5,handleBarWidth:1,handleBarHeight:12},dX=[{type:tM.RADIUS,name:"Radius"},{type:tM.AREA,name:"Poor area"},{type:tM.AREA,name:"Satisfactory area"},{type:tM.AREA,name:"Great area"},{type:tM.QUARTILE,name:"Quartiles"}],dK={type:ta.END_LINE,threshold:16,numCharacter:14},dQ={code:"u">typeof navigator&&(null==navigator?void 0:navigator.language)||"en-US",number:(t,e=(null==navigator?void 0:navigator.language)||"en-US")=>t.toLocaleString(e),date:(t,e=(null==navigator?void 0:navigator.language)||"en-US",n={},i=null)=>i||t.toLocaleDateString(e,n),time:(t,e=(null==navigator?void 0:navigator.language)||"en-US",n={},i=null)=>i||t.toLocaleTimeString(e,n),optionsObject:{"15seconds":{primary:{"MMM d, pp":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",hourCycle:"h12"},"MMM d, h:mm:ss.SSS a":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",fractionalSecondDigits:3,hourCycle:"h12"}},secondary:{pp:{hour:"numeric",minute:"2-digit",second:"2-digit",hourCycle:"h12"},"h:mm:ss.SSS a":{hour:"numeric",minute:"2-digit",fractionalSecondDigits:3,hourCycle:"h12"}},type:"time"},minute:{primary:{"MMM d, p":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hourCycle:"h12"}},secondary:{p:{hour:"numeric",minute:"2-digit",hourCycle:"h12"}},type:"time"},"30minutes":{primary:{"MMM d, p":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hourCycle:"h12"}},secondary:{p:{hour:"numeric",minute:"2-digit",hourCycle:"h12"}},type:"time"},hourly:{primary:{"MMM d, hh a":{month:"short",day:"numeric",hour:"2-digit",hourCycle:"h12"}},secondary:{"hh a":{hour:"2-digit",hourCycle:"h12"}},type:"time"},daily:{primary:{"MMM d":{month:"short",day:"numeric"}},secondary:{d:{day:"numeric"}},type:"date"},weekly:{primary:{"eee, MMM d":{weekday:"short",month:"short",day:"numeric"}},secondary:{eee:{weekday:"short"}},type:"date"},monthly:{primary:{"MMM yyyy":{month:"short",year:"numeric"}},secondary:{MMM:{month:"short"}},type:"date"},quarterly:{primary:{},secondary:{},type:"date"},yearly:{primary:{yyyy:{year:"numeric"}},secondary:{yyyy:{year:"numeric"}},type:"date"}},translations:{group:"Group",total:"Total",meter:{title:""},tabularRep:{title:"Tabular representation",downloadAsCSV:"Download as CSV"},toolbar:{exportAsCSV:"Export to CSV",exportAsJPG:"Export to JPG",exportAsPNG:"Export to PNG",zoomIn:"Zoom in",zoomOut:"Zoom out",resetZoom:"Reset zoom",moreOptions:"More options",makeFullScreen:"Make fullscreen",exitFullScreen:"Exit fullscreen",showAsTable:"Show as table"}}},dJ={enabled:!0,position:tu.BOTTOM,clickable:!0,truncation:dK,alignment:tc.LEFT,order:null,additionalItems:[]},d0={enabled:!0,showTotal:!0,truncation:dK,groupLabel:"Group"},d1={top:{visible:!0,includeZero:!0,truncation:dK},bottom:{visible:!0,includeZero:!0,truncation:dK},left:{visible:!0,includeZero:!0,truncation:dK},right:{visible:!0,includeZero:!0,truncation:dK}},d2={addSpaceOnEdges:1,showDayName:!1,localeObject:uV,timeIntervalFormats:{"15seconds":{primary:"MMM d, pp",secondary:"pp"},minute:{primary:"MMM d, p",secondary:"p"},"30minutes":{primary:"MMM d, p",secondary:"p"},hourly:{primary:"MMM d, hh a",secondary:"hh a"},daily:{primary:"MMM d",secondary:"d"},weekly:{primary:"eee, MMM d",secondary:"eee"},monthly:{primary:"MMM yyyy",secondary:"MMM"},quarterly:{primary:"QQQ ''yy",secondary:"QQQ"},yearly:{primary:"yyyy",secondary:"yyyy"}}},d3=!1;try{d3="u">typeof document&&(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}catch(t){console.warn("Fullscreen capabilities check failed: ",t.message)}let d5={width:null,height:null,resizable:!0,theme:tn.WHITE,tooltip:d0,legend:dJ,locale:dQ,style:{prefix:"cc"},data:{groupMapsTo:"group",loading:!1,selectedGroups:[]},color:{scale:null,pairing:{numberOfVariants:null,option:1},gradient:{enabled:!1}},toolbar:{enabled:!0,numberOfIcons:3,controls:[{type:tS.SHOW_AS_DATATABLE},...d3?[{type:tS.MAKE_FULLSCREEN}]:[],{type:tS.EXPORT_CSV},{type:tS.EXPORT_PNG},{type:tS.EXPORT_JPG}]}},d4=dP({},d5,{thematic:{projection:tk.geoNaturalEarth1}}),d6=dP({},d5,{axes:d1,timeScale:d2,grid:{x:{enabled:!0,numberOfTicks:15,alignWithAxisTicks:!1},y:{enabled:!0,numberOfTicks:5,alignWithAxisTicks:!1}},ruler:{enabled:!0},zoomBar:{zoomRatio:.4,minZoomRatio:.01,top:{enabled:!1,type:to.GRAPH_VIEW}}}),d8=dP({},d6,{bars:{maxWidth:16,spacingFactor:.25},timeScale:dP(d2,{addSpaceOnEdges:1})}),d7=dP({},d8,{}),d9=dP({},d8,{}),ft=dP({},d8,{bars:dP({},d8.bars,{dividerSize:1.5})}),fe=dP({},d8,{}),fn=dP({},d6,{points:{radius:4,fillOpacity:.3,filled:!0,enabled:!0}}),fi=dP({},fn,{points:{radius:3,filled:!1,enabled:!0}}),fr=dP({},fi,{timeScale:dP(d2,{addSpaceOnEdges:0})}),fo=dP({},d6,{bubble:{radiusMapsTo:"radius",radiusLabel:"Radius",radiusRange:t=>{let e=Math.min(t.width,t.height);return[3*e/400,25*e/400]},fillOpacity:.2,enabled:!0},points:{filled:!0},legend:{additionalItems:[{type:tM.RADIUS,name:"Radius"}]}}),fa=dP({},d6,{bullet:{performanceAreaTitles:["Poor","Satisfactory","Great"]},grid:{x:{enabled:!1},y:{enabled:!1}},legend:{additionalItems:[{type:tM.AREA,name:"Poor area"},{type:tM.AREA,name:"Satisfactory area"},{type:tM.AREA,name:"Great area"},{type:tM.QUARTILE,name:"Quartiles"}]}}),fs=dP({},d8,{bars:{dividerSize:1.5},timeScale:dP(d2,{addSpaceOnEdges:0})}),fl=dP({},d5,{tooltip:dP({},d0,{wordLabel:"Word",valueLabel:"Value"}),wordCloud:{fontSizeMapsTo:"value",fontSizeRange:t=>{let e=Math.min(t.width,t.height);return[20*e/400,75*e/400]},wordMapsTo:"word"}}),fu=dP({},d5,{pie:{labels:{formatter:null,enabled:!0},alignment:tc.LEFT,sortFunction:null,valueMapsTo:"value"}}),fc=dP({},d5,{legend:{enabled:!1},gauge:{type:t_.SEMI,arcWidth:16,deltaArrow:{size:t=>t/8,enabled:!0},showPercentageSymbol:!0,status:null,numberSpacing:10,deltaFontSize:t=>t/8,valueFontSize:t=>t/2.5,alignment:tc.LEFT}}),fh=dP({},fu,{donut:{center:{numberFontSize:t=>`${Math.min(t/100*24,24)}px`,titleFontSize:t=>`${Math.min(t/100*15,15)}px`,titleYPosition:t=>Math.min(t/80*20,20)},alignment:tc.LEFT}}),fd=dP({},d5,{legend:{enabled:!1,clickable:!1},meter:{showLabels:!0,proportional:null,statusBar:{percentageIndicator:{enabled:!0}}}}),ff=dP({},fd,{legend:{enabled:!0}}),fp=dP({},d5,{radar:{axes:{angle:"key",value:"value"},alignment:tc.LEFT},tooltip:{gridline:{enabled:!0}}}),fg=dP({},d8,{comboChartTypes:[]}),fm=dP({tree:{type:td.TREE}},d5,{}),fy=dP({},d5,{data:dP(d5.data,{groupMapsTo:"name"})}),fv=dP({},d5,{circles:{fillOpacity:.3,hover:{stroke:"#FFF"}},padding:{mainGroup:4,children:2},hierarchyLevel:2},{data:dP(d5.data,{groupMapsTo:"name"})}),fb=dP({},d5,{alluvial:{data:dP(d5.data,{groupMapsTo:"source"}),nodeAlignment:tc.CENTER,nodePadding:24,monochrome:!1,nodes:[]}}),f_=dP({},d5,{axes:d1,heatmap:{divider:{state:tC.AUTO},colorLegend:{type:"linear"}}}),fx=dP({},d4,{choropleth:{colorLegend:{type:"linear"}}}),fE={alluvialChart:fb,areaChart:fr,axisChart:d6,boxplotChart:fe,bubbleChart:fo,bulletChart:fa,chart:d5,circlePackChart:fv,choroplethChart:fx,comboChart:fg,donutChart:fh,gaugeChart:fc,groupedBarChart:d9,heatmapChart:f_,histogramChart:fs,lineChart:fi,lollipopChart:fn,meterChart:fd,pieChart:fu,proportionalMeterChart:ff,radarChart:fp,scatterChart:fn,simpleBarChart:d7,stackedAreaChart:fr,stackedBarChart:ft,thematicChart:d4,treeChart:fm,treemapChart:fy,wordCloudChart:fl};function fw(t,e){var n;let i=dd(t),r=Object.keys(e.axes||{});for(let t in null!=(n=null==e?void 0:e.toolbar)&&n.controls&&delete i.toolbar.controls,0===r.length&&delete i.axes,i.axes)if(r.includes(t)){let n=e.axes[t];if((n.primary||n.secondary)&&console.warn("`primary` & `secondary` are no longer needed for axis configurations. Read more here https://charts.carbondesignsystem.com/?path=/story/docs-tutorials--tabular-data-format"),null==n.mapsTo){let t=n.scaleType;null==t?n.mapsTo="value":t===tl.TIME?n.mapsTo="date":t===tl.LABELS&&(n.mapsTo="key")}}else delete i.axes[t];return fO(i,e),dP(i,e)}function fT(t){if(!t)return;let e=t.getAttribute("transform").match(/translate\([0-9]+\.?[0-9]*,[0-9]+\.?[0-9]*\)/);if(!e)return null;if(e[0]){let t=e[0].replace(/translate\(/,"").replace(/\)/,"").split(",");return{tx:t[0],ty:t[1]}}return null}function fS(t,e,n){return n>t.length?t:e===ta.MID_LINE?t.substr(0,n/2)+"..."+t.substr(-n/2):e===ta.FRONT_LINE?"..."+t.substr(-n):e===ta.END_LINE?t.substr(0,n)+"...":void 0}function fO(t,e){let n=fM(t,"legend","additionalItems"),i=fM(e,"legend","additionalItems");if(n&&i){let r=i.map(t=>t.type),o=n.map(t=>t.type),a=dX.filter(t=>o.includes(t.type)&&!r.includes(t.type));t.legend.additionalItems=a,e.legend.additionalItems=dU(a,i,"name")}}let fM=(t,...e)=>{let n=t;if(n){for(let t of e)if(null===n[t]||void 0===n[t])return null;else n=n[t];return n}return null},fA=(t,e)=>e===ts.HORIZONTAL?{y0:t.x0,y1:t.x1,x0:t.y0,x1:t.y1}:t,fC=(t,e)=>{let{x0:n,x1:i,y0:r,y1:o}=fA(t,e);return`M${n},${r}L${n},${o}L${i},${o}L${i},${r}L${n},${r}`};function fD(t,e,n){return n===ts.VERTICAL?[t,e]:[e,t]}function fk(t){let e=uB(t);return e.setHours(0,0,0,0),e}function fR(t){let e=uB(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function fL(t,e){let n=fk(t),i=fk(e),r=+n-fR(n),o=+i-fR(i);return Math.round((r-o)/864e5)}function fN(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function fP(t){return uF(t,{weekStartsOn:1})}function fI(t){let e=uB(t),n=e.getFullYear(),i=fN(t,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);let r=fP(i),o=fN(t,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);let a=fP(o);return e.getTime()>=r.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function fB(t,e){var n,i,r,o;let a=uB(t),s=a.getFullYear(),l=(null==e?void 0:e.firstWeekContainsDate)??(null==(i=null==(n=null==e?void 0:e.locale)?void 0:n.options)?void 0:i.firstWeekContainsDate)??uU.firstWeekContainsDate??(null==(o=null==(r=uU.locale)?void 0:r.options)?void 0:o.firstWeekContainsDate)??1,u=fN(t,0);u.setFullYear(s+1,0,l),u.setHours(0,0,0,0);let c=uF(u,e),h=fN(t,0);h.setFullYear(s,0,l),h.setHours(0,0,0,0);let d=uF(h,e);return a.getTime()>=c.getTime()?s+1:a.getTime()>=d.getTime()?s:s-1}function fU(t,e){let n=Math.abs(t).toString().padStart(e,"0");return(t<0?"-":"")+n}let fF={y(t,e){let n=t.getFullYear(),i=n>0?n:1-n;return fU("yy"===e?i%100:i,e.length)},M(t,e){let n=t.getMonth();return"M"===e?String(n+1):fU(n+1,2)},d:(t,e)=>fU(t.getDate(),e.length),a(t,e){let n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(t,e)=>fU(t.getHours()%12||12,e.length),H:(t,e)=>fU(t.getHours(),e.length),m:(t,e)=>fU(t.getMinutes(),e.length),s:(t,e)=>fU(t.getSeconds(),e.length),S(t,e){let n=e.length,i=t.getMilliseconds();return fU(Math.trunc(i*Math.pow(10,n-3)),e.length)}},fj={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},fH={G:function(t,e,n){let i=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});default:return n.era(i,{width:"wide"})}},y:function(t,e,n){if("yo"===e){let e=t.getFullYear(),i=e>0?e:1-e;return n.ordinalNumber(i,{unit:"year"})}return fF.y(t,e)},Y:function(t,e,n,i){let r=fB(t,i),o=r>0?r:1-r;if("YY"===e){let t=o%100;return fU(t,2)}return"Yo"===e?n.ordinalNumber(o,{unit:"year"}):fU(o,e.length)},R:function(t,e){let n=fI(t);return fU(n,e.length)},u:function(t,e){let n=t.getFullYear();return fU(n,e.length)},Q:function(t,e,n){let i=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return fU(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,e,n){let i=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return fU(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,e,n){let i=t.getMonth();switch(e){case"M":case"MM":return fF.M(t,e);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,e,n){let i=t.getMonth();switch(e){case"L":return String(i+1);case"LL":return fU(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,e,n,i){let r=function(t,e){let n=uB(t),i=+uF(n,e)-+function(t,e){var n,i,r,o;let a=(null==e?void 0:e.firstWeekContainsDate)??(null==(i=null==(n=null==e?void 0:e.locale)?void 0:n.options)?void 0:i.firstWeekContainsDate)??uU.firstWeekContainsDate??(null==(o=null==(r=uU.locale)?void 0:r.options)?void 0:o.firstWeekContainsDate)??1,s=fB(t,e),l=fN(t,0);return l.setFullYear(s,0,a),l.setHours(0,0,0,0),uF(l,e)}(n,e);return Math.round(i/6048e5)+1}(t,i);return"wo"===e?n.ordinalNumber(r,{unit:"week"}):fU(r,e.length)},I:function(t,e,n){let i=function(t){let e=uB(t),n=+fP(e)-+function(t){let e=fI(t),n=fN(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),fP(n)}(e);return Math.round(n/6048e5)+1}(t);return"Io"===e?n.ordinalNumber(i,{unit:"week"}):fU(i,e.length)},d:function(t,e,n){return"do"===e?n.ordinalNumber(t.getDate(),{unit:"date"}):fF.d(t,e)},D:function(t,e,n){let i=function(t){let e=uB(t);return fL(e,function(t){let e=uB(t),n=fN(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}(e))+1}(t);return"Do"===e?n.ordinalNumber(i,{unit:"dayOfYear"}):fU(i,e.length)},E:function(t,e,n){let i=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,e,n,i){let r=t.getDay(),o=(r-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return fU(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,e,n,i){let r=t.getDay(),o=(r-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return fU(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,e,n){let i=t.getDay(),r=0===i?7:i;switch(e){case"i":return String(r);case"ii":return fU(r,e.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,e,n){let i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){let i;let r=t.getHours();switch(i=12===r?fj.noon:0===r?fj.midnight:r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){let i;let r=t.getHours();switch(i=r>=17?fj.evening:r>=12?fj.afternoon:r>=4?fj.morning:fj.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if("ho"===e){let e=t.getHours()%12;return 0===e&&(e=12),n.ordinalNumber(e,{unit:"hour"})}return fF.h(t,e)},H:function(t,e,n){return"Ho"===e?n.ordinalNumber(t.getHours(),{unit:"hour"}):fF.H(t,e)},K:function(t,e,n){let i=t.getHours()%12;return"Ko"===e?n.ordinalNumber(i,{unit:"hour"}):fU(i,e.length)},k:function(t,e,n){let i=t.getHours();return 0===i&&(i=24),"ko"===e?n.ordinalNumber(i,{unit:"hour"}):fU(i,e.length)},m:function(t,e,n){return"mo"===e?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):fF.m(t,e)},s:function(t,e,n){return"so"===e?n.ordinalNumber(t.getSeconds(),{unit:"second"}):fF.s(t,e)},S:function(t,e){return fF.S(t,e)},X:function(t,e,n){let i=t.getTimezoneOffset();if(0===i)return"Z";switch(e){case"X":return fz(i);case"XXXX":case"XX":return fG(i);default:return fG(i,":")}},x:function(t,e,n){let i=t.getTimezoneOffset();switch(e){case"x":return fz(i);case"xxxx":case"xx":return fG(i);default:return fG(i,":")}},O:function(t,e,n){let i=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+f$(i,":");default:return"GMT"+fG(i,":")}},z:function(t,e,n){let i=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+f$(i,":");default:return"GMT"+fG(i,":")}},t:function(t,e,n){let i=Math.trunc(t.getTime()/1e3);return fU(i,e.length)},T:function(t,e,n){let i=t.getTime();return fU(i,e.length)}};function f$(t,e=""){let n=t>0?"-":"+",i=Math.abs(t),r=Math.trunc(i/60),o=i%60;return 0===o?n+String(r):n+String(r)+e+fU(o,2)}function fz(t,e){return t%60==0?(t>0?"-":"+")+fU(Math.abs(t)/60,2):fG(t,e)}function fG(t,e=""){let n=Math.abs(t),i=fU(Math.trunc(n/60),2),r=fU(n%60,2);return(t>0?"-":"+")+i+e+r}let fV=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},fW=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},fY={p:fW,P:(t,e)=>{let n;let i=t.match(/(P+)(p+)?/)||[],r=i[1],o=i[2];if(!o)return fV(t,e);switch(r){case"P":n=e.dateTime({width:"short"});break;case"PP":n=e.dateTime({width:"medium"});break;case"PPP":n=e.dateTime({width:"long"});break;default:n=e.dateTime({width:"full"})}return n.replace("{{date}}",fV(r,e)).replace("{{time}}",fW(o,e))}},fZ=/^D+$/,fq=/^Y+$/,fX=["D","DD","YY","YYYY"],fK=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,fQ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fJ=/^'([^]*?)'?$/,f0=/''/g,f1=/[a-zA-Z]/;function f2(t,e,n){var i,r,o,a,s,l,u,c;let h=(null==n?void 0:n.locale)??uU.locale??uV,d=(null==n?void 0:n.firstWeekContainsDate)??(null==(r=null==(i=null==n?void 0:n.locale)?void 0:i.options)?void 0:r.firstWeekContainsDate)??uU.firstWeekContainsDate??(null==(a=null==(o=uU.locale)?void 0:o.options)?void 0:a.firstWeekContainsDate)??1,f=(null==n?void 0:n.weekStartsOn)??(null==(l=null==(s=null==n?void 0:n.locale)?void 0:s.options)?void 0:l.weekStartsOn)??uU.weekStartsOn??(null==(c=null==(u=uU.locale)?void 0:u.options)?void 0:c.weekStartsOn)??0,p=uB(t);if(!function(t){if(!(t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))&&"number"!=typeof t)return!1;let e=uB(t);return!isNaN(Number(e))}(p))throw RangeError("Invalid time value");let g=e.match(fQ).map(t=>{let e=t[0];if("p"===e||"P"===e){let n=fY[e];return n(t,h.formatLong)}return t}).join("").match(fK).map(t=>{if("''"===t)return{isToken:!1,value:"'"};let e=t[0];if("'"===e)return{isToken:!1,value:function(t){let e=t.match(fJ);return e?e[1].replace(f0,"'"):t}(t)};if(fH[e])return{isToken:!0,value:t};if(e.match(f1))throw RangeError("Format string contains an unescaped latin alphabet character `"+e+"`");return{isToken:!1,value:t}});h.localize.preprocessor&&(g=h.localize.preprocessor(p,g));let m={firstWeekContainsDate:d,weekStartsOn:f,locale:h};return g.map(i=>{if(!i.isToken)return i.value;let r=i.value;(!(null!=n&&n.useAdditionalWeekYearTokens)&&fq.test(r)||!(null!=n&&n.useAdditionalDayOfYearTokens)&&fZ.test(r))&&function(t,e,n){let i=function(t,e,n){let i="Y"===t[0]?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(t,e,n);if(console.warn(i),fX.includes(t))throw RangeError(i)}(r,e,String(t));let o=fH[r[0]];return o(p,r,h.localize,m)}).join("")}var f3=((h=f3||{})["15seconds"]="15seconds",h.minute="minute",h["30minutes"]="30minutes",h.hourly="hourly",h.daily="daily",h.weekly="weekly",h.monthly="monthly",h.quarterly="quarterly",h.yearly="yearly",h);let f5=[["15seconds",15e3],["minute",6e4],["30minutes",18e5],["hourly",36e5],["daily",864e5],["monthly",2592e6],["quarterly",7776e6],["yearly",31104e6]];function f4(t,e,n,i,r){let o=0===e,a=2===Number(f2(new Date(t),"c")),s=1===Number(f2(new Date(t),"q")),l=0!==e?n[e-1]:null;switch(i){case"15seconds":case"minute":case"30minutes":case"hourly":return o||function(t){let{s:e,m:n,H:i}=f8(t);return 0===i&&0===n&&0===e}(t)||f9(t,l)||pt(t);case"daily":return r?o||a||pt(t):o||f9(t,l)||pt(t);case"weekly":return o||a||pt(t);case"monthly":return o||pt(t);case"quarterly":return o||s;case"yearly":return!1;default:throw Error(`${i} is not a valid time interval.`)}}function f6(t,e,n,i,r,o){let a=r.showDayName,s="daily"===i&&a?"weekly":i,l=new Date(t),u=fM(r,"timeIntervalFormats")[s],c=fM(u,"primary"),h=fM(u,"secondary"),d=f4(t,e,n,i,a),f=d?c:h;"15seconds"===i&&0!==l.getMilliseconds()&&(f=f.replace("pp","h:mm:ss.SSS a"));let p=r.localeObject,{code:g,optionsObject:m}=o,y=m[i].type,v=m[i][d?"primary":"secondary"][f];if("quarterly"!==i&&v)return o[y](l,g,v);{let t=f2(l,f,{locale:p}).split("").map(t=>{let e=Number(t);return" "===t||Number.isNaN(e)?t:e.toLocaleString(g)});return o[y](l,g,{},t.join(""))}}function f8(t){let e=new Date(t);return{M:e.getMonth()+1,d:e.getDate(),H:e.getHours(),m:e.getMinutes(),s:e.getSeconds()}}function f7(t,e){if(f3[e])return e;if(1===t.length)return"15seconds";let n=function(t){if(t)return t.slice(1).map((e,n)=>e-t[n])}(t),i=function(t,e){let n;if(void 0===e)for(let e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n>r||void 0===n&&r>=r)&&(n=r)}return n}(n);return function(t){let e=f5.reduce((e,[,n],i)=>{let r=f5[e][1];return Math.abs(r-t)<Math.abs(n-t)?e:i},0);return f5[e][0]}(i)}function f9(t,e){let n=f8(t).M,i=f8(e).M;return n!==i}function pt(t){let{M:e,d:n,s:i,m:r,H:o}=f8(t);return 1===e&&1===n&&0===o&&0===r&&0===i}function pe(t){return void 0===t?"":t.toISOString()}var pn=((d=pn||{}).GRAPHICS_DOCUMENT="graphics-document",d.GRAPHICS_OBJECT="graphics-object",d.GRAPHICS_SYMBOL="graphics-symbol",d.GROUP="group",d.DOCUMENT="document",d.CHECKBOX="checkbox",d.BUTTON="button",d.MENU="menu",d.MENU_ITEM="menuitem",d.IMG="img",d),pi=function(t,e){if(null==t)return t;if(!cR(t))return t&&dC(t,e,c4);for(var n=t.length,i=f?n:-1,r=Object(t);(f?i--:++i<n)&&!1!==e(r[i],i,r););return t};function pr(t,e,n,i){for(var r=-1,o=null==t?0:t.length;++r<o;){var a=t[r];e(i,a,n(a),t)}return i}function po(t,e,n,i){return pi(t,function(t,r,o){e(i,t,n(t),o)}),i}var pa=Object.prototype.hasOwnProperty,ps=(p=function(t,e,n){pa.call(t,n)?t[n].push(e):cT(t,n,[e])},function(t,e){var n=u4(t)?pr:po,i=g?g():{};return n(t,p,dA(e),i)});let pl=class{constructor(t){this.state={options:{}},this.colorScale={},this.colorClassNames={},this.services=t}formatTable({headers:t,cells:e}){let n;let i=this.getOptions(),{code:r,date:o,number:a}=fM(i,"locale"),s=fM(i,"tabularRepModal","tableHeadingFormatter"),l=fM(i,"tabularRepModal","tableCellFormatter"),{cartesianScales:u}=this.services,c=null==u?void 0:u.getDomainAxisScaleType();return c===tl.TIME&&(n=t=>o(t,r,{month:"short",day:"numeric",year:"numeric"})),["function"==typeof s?s(t):t,..."function"==typeof l?l(e):e.map(t=>{for(let e in n&&(t[1]=n(t[1])),t){let n=t[e];"number"==typeof n&&(t[e]=a(n,r))}return t})]}getAllDataFromDomain(t){if(!this.getData())return null;let e=this.getOptions(),n=this.getData(),i=this.getDataGroups(),{groupMapsTo:r}=fM(e,"data"),o=fM(e,"axes");return t&&(n=n.filter(e=>t.includes(e[r]))),o&&Object.keys(o).forEach(t=>{let e=o[t].mapsTo,i=o[t].scaleType;if((i===tl.LINEAR||i===tl.LOG)&&(n=n.map(t=>({...t,[e]:null===t[e]?t[e]:Number(t[e])}))),e&&o[t].domain){if(i===tl.LABELS)n=n.filter(n=>o[t].domain.includes(n[e]));else{let[i,r]=o[t].domain;n=n.filter(t=>!(e in t)||t[e]>=i&&t[e]<=r)}}}),n.filter(t=>i.find(e=>e.name===t[r]))}getDisplayData(t){if(!this.get("data"))return null;let{ACTIVE:e}=dz.items.status,n=this.getDataGroups(t),{groupMapsTo:i}=this.getOptions().data;return this.getAllDataFromDomain(t).filter(t=>n.find(n=>n.name===t[i]&&n.status===e))}getData(){return this.get("data")}isDataEmpty(){return!this.getData().length}setData(t){let e=this.sanitize(dd(t)),n=this.generateDataGroups(e);return this.set({data:e,dataGroups:n}),e}getDataGroups(t){return fM(this.getOptions(),"data","loading")?[]:t?this.get("dataGroups").filter(e=>t.includes(e.name)):this.get("dataGroups")}getActiveDataGroups(t){let{ACTIVE:e}=dz.items.status;return this.getDataGroups(t).filter(t=>t.status===e)}getDataGroupNames(t){return this.getDataGroups(t).map(t=>t.name)}getActiveDataGroupNames(t){return this.getActiveDataGroups(t).map(t=>t.name)}aggregateBinDataByGroup(t){return ps(t,"group")}getBinConfigurations(){let t=this.getDisplayData(),e=this.getOptions(),n=this.services.cartesianScales.getMainXAxisPosition(),i=this.services.cartesianScales.getDomainIdentifier(),r=e.axes[n],{groupMapsTo:o}=e.data,{bins:a=10}=r,s=Array.isArray(a),l=(function(){var t=tz,e=tU,n=tQ;function i(i){Array.isArray(i)||(i=Array.from(i));var r,o,a,s=i.length,l=Array(s);for(r=0;r<s;++r)l[r]=t(i[r],r,i);var u=e(l),c=u[0],h=u[1],d=n(l,c,h);if(!Array.isArray(d)){let t=h,n=+d;if(e===tU&&([c,h]=function(t,e,n){let i;for(;;){let r=tX(t,e,n);if(r===i||0===r||!isFinite(r))return[t,e];r>0?(t=Math.floor(t/r)*r,e=Math.ceil(e/r)*r):r<0&&(t=Math.ceil(t*r)/r,e=Math.floor(e*r)/r),i=r}}(c,h,n)),(d=tq(c,h,n))[0]<=c&&(a=tX(c,h,n)),d[d.length-1]>=h){if(t>=h&&e===tU){let t=tX(c,h,n);isFinite(t)&&(t>0?h=(Math.floor(h/t)+1)*t:t<0&&(h=-((Math.ceil(-(h*t))+1)/t)))}else d.pop()}}for(var f=d.length,p=0,g=f;d[p]<=c;)++p;for(;d[g-1]>h;)--g;(p||g<f)&&(d=d.slice(p,g),f=g-p);var m,y=Array(f+1);for(r=0;r<=f;++r)(m=y[r]=[]).x0=r>0?d[r-1]:c,m.x1=r<f?d[r]:h;if(isFinite(a)){if(a>0)for(r=0;r<s;++r)null!=(o=l[r])&&c<=o&&o<=h&&y[Math.min(f,Math.floor((o-c)/a))].push(i[r]);else if(a<0){for(r=0;r<s;++r)if(null!=(o=l[r])&&c<=o&&o<=h){let t=Math.floor((c-o)*a);y[Math.min(f,t+(d[t]<=o))].push(i[r])}}}else for(r=0;r<s;++r)null!=(o=l[r])&&c<=o&&o<=h&&y[tB(d,o,0,f)].push(i[r]);return y}return i.value=function(e){return arguments.length?(t="function"==typeof e?e:()=>e,i):t},i.domain=function(t){var n;return arguments.length?(e="function"==typeof t?t:(n=[t[0],t[1]],()=>n),i):e},i.thresholds=function(t){var e;return arguments.length?(n="function"==typeof t?t:(e=Array.isArray(t)?tG.call(t):t,()=>e),i):n},i})().value(t=>t[i]).thresholds(a)(t);if(s)l[l.length-1].x1=a[a.length-1];else{let t=l[0].x1-l[0].x0;l[l.length-1].x1=+l[l.length-1].x0+t}let u=s?[a[0],a[a.length-1]]:[l[0].x0,l[l.length-1].x1],c=Array.from(new Set(t.map(t=>t[o]))),h=[];return l.forEach(t=>{let e=`${t.x0}-${t.x1}`,n=this.aggregateBinDataByGroup(t);c.forEach(i=>{h.push({group:i,key:e,value:n[i]||0,bin:t.x0})})}),{bins:l,binsDomain:u}}getBinnedStackedData(){let t=this.getOptions(),{groupMapsTo:e}=t.data,n=this.getActiveDataGroupNames(),{bins:i}=this.getBinConfigurations(),r=this.getDataValuesGroupedByKeys({bins:i});return uk().keys(n)(r).map((t,i)=>Object.keys(t).filter(t=>!isNaN(t)).map(r=>{let o=t[r];return o[e]=n[i],o}))}getGroupedData(t){let e=this.getDisplayData(t),n={},{groupMapsTo:i}=this.getOptions().data;return e.map(t=>{let e=t[i];null!==n[e]&&void 0!==n[e]?n[e].push(t):n[e]=[t]}),Object.keys(n).map(t=>({name:t,data:n[t]}))}getStackKeys({bins:t=null,groups:e=null}={bins:null,groups:null}){let n;let i=this.getOptions(),r=this.getDisplayData(e);n=t?t.map(t=>`${t.x0}:${t.x1}`):dF(r.map(t=>{let e=this.services.cartesianScales.getDomainIdentifier(t);return t[e]instanceof Date?pe(t[e]):t[e]&&"function"==typeof t[e].toString?t[e].toString():t[e]}));let o=this.services.cartesianScales.domainAxisPosition,a=i.axes[o].scaleType;return a===tl.TIME?n.sort((t,e)=>{let n=new Date(t),i=new Date(e);return n-i}):(a===tl.LOG||a===tl.LINEAR)&&n.sort((t,e)=>t-e),n}getDataValuesGroupedByKeys({bins:t=null,groups:e=null}){let n=this.getOptions(),{groupMapsTo:i}=n.data,r=this.getDisplayData(e),o=this.getDataGroupNames(),a=this.getStackKeys({bins:t,groups:e});return t?a.map(e=>{let[n,r]=e.split(":"),a={x0:n,x1:r},s=t.find(t=>t.x0.toString()===n.toString());return o.forEach(t=>{a[t]=s.filter(e=>e[i]===t).length}),a}):a.map(t=>{let e={sharedStackKey:t};return o.forEach(n=>{let o=r.find(e=>{let r=this.services.cartesianScales.getDomainIdentifier(e);return e[i]===n&&Object.prototype.hasOwnProperty.call(e,r)&&(e[r]instanceof Date?pe(e[r])===t:e[r].toString()===t)}),a=this.services.cartesianScales.getRangeIdentifier(e);e[n]=o?o[a]:null}),e})}getStackedData({percentage:t=!1,groups:e=null,divergent:n=!1}){let i=this.getOptions(),{groupMapsTo:r}=i.data,o=this.getActiveDataGroupNames(e),a=this.getDataValuesGroupedByKeys({groups:e});if(t){let t=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i}(a.map(t=>[t.sharedStackKey,0]));a.forEach(e=>{o.forEach(n=>{t[e.sharedStackKey]+=e[n]})}),a.forEach(e=>{o.forEach(n=>{let i=t[e.sharedStackKey];t[e.sharedStackKey]?e[n]=e[n]/i*100:e[n]=0})})}return(n?uk().offset(uR):uk()).keys(o)(a).map((t,e)=>Object.keys(t).filter(t=>!isNaN(t)).map(n=>{let i=t[n];return i[r]=o[e],i}))}getOptions(){return this.state.options}set(t,e){this.state=Object.assign({},this.state,t);let n=Object.assign({skipUpdate:!1,animate:!0},e);n.skipUpdate||this.update(n.animate)}get(t){return t?this.state[t]:this.state}setOptions(t){let e=this.getOptions();fO(e,t),this.set({options:dP(e,t)})}update(t=!0){this.getDisplayData()&&(this.updateAllDataGroups(),this.setCustomColorScale(),this.setColorClassNames(),this.services.events.dispatchEvent(tt.Model.UPDATE,{animate:t}))}toggleDataLabel(t){let{ACTIVE:e,DISABLED:n}=dz.items.status,i=this.getDataGroups(),r=i.some(t=>t.status===n),o=i.filter(t=>t.status===e);if(r){if(1===o.length&&o[0].name===t)i.forEach((t,n)=>{i[n].status=e});else{let r=i.findIndex(e=>e.name===t);i[r].status=i[r].status===n?e:n}}else i.forEach((r,o)=>{i[o].status=r.name===t?e:n});let a=i.filter(t=>t.status===e),s=this.getOptions();i.some(t=>t.status===n)?s.data.selectedGroups=a.map(t=>t.name):s.data.selectedGroups=[],this.services.events.dispatchEvent(tt.Legend.ITEMS_UPDATE,{dataGroups:i}),this.set({dataGroups:i})}getIsFilled(t,e,n,i){let r=this.getOptions();return r.getIsFilled?r.getIsFilled(t,e,n,i):i}getFillColor(t,e,n){let i=this.getOptions(),r=fM(this.colorScale,t);return i.getFillColor?i.getFillColor(t,e,n,r):r}getStrokeColor(t,e,n){let i=this.getOptions(),r=fM(this.colorScale,t);return i.getStrokeColor?i.getStrokeColor(t,e,n,r):r}isUserProvidedColorScaleValid(){let t=fM(this.getOptions(),"color","scale"),e=this.getDataGroups();return null!=t&&0!=Object.keys(t).length&&e.some(e=>Object.keys(t).includes(e.name))}getColorClassName(t){let e=this.colorClassNames(t.dataGroupName),n=t.originalClassName;return t.classNameTypes.forEach(i=>n=t.originalClassName?`${n} ${i}-${e}`:`${i}-${e}`),n||""}getStatus(){return null}getAllDataGroupsNames(){return this.allDataGroups}transformToTabularData(t){console.warn("We've updated the charting data format to be tabular by default. The current format you're using is deprecated and will be removed in v1.0, read more here https://charts.carbondesignsystem.com/?path=/story/docs-tutorials--tabular-data-format");let e=[],{datasets:n,labels:i}=t;return n.forEach(t=>{t.data.forEach((n,r)=>{let o;let a=fM(t,"label");if(null===a){let t=fM(i,r);o=t||"Ungrouped"}else o=a;let s={group:o,key:i[r]};isNaN(n)?(s.value=n.value,s.date=n.date):s.value=n,e.push(s)})}),e}getTabularDataArray(){return[]}exportToCSV(){let t=this.getTabularDataArray().map(t=>t.map(t=>`"${("&ndash;"===t?"–":t).split(/[,;'"`]/).map(t=>(function(t){let e=t.trim();return["=","+","-","@","	","\r"].includes(e.charAt(0))?`\xa0${e}`:/[,\"\n]/.test(e)?`"${e}"`:e})(t)).join("")}"`)).map(t=>t.join(",")).join(`
`),e=this.getOptions(),n="myChart",i=fM(e,"fileDownload","fileName");"function"==typeof i?n=i("csv"):"string"==typeof i&&(n=i),this.services.files.downloadCSV(t,`${n}.csv`)}getTabularData(t){return Array.isArray(t)?t:this.transformToTabularData(t)}sanitize(t){return t=this.getTabularData(t)}updateAllDataGroups(){this.allDataGroups?this.getDataGroupNames().forEach(t=>{-1===this.allDataGroups.indexOf(t)&&this.allDataGroups.push(t)}):this.allDataGroups=this.getDataGroupNames()}generateDataGroups(t){let{groupMapsTo:e}=this.getOptions().data,{ACTIVE:n,DISABLED:i}=dz.items.status,r=this.getOptions(),o=dF(t.map(t=>t[e]));r.data.selectedGroups.length&&(r.data.selectedGroups.every(t=>o.includes(t))||(r.data.selectedGroups=[]));let a=t=>!r.data.selectedGroups.length||r.data.selectedGroups.includes(t)?n:i;return o.map(t=>({name:t,status:a(t)}))}setCustomColorScale(){if(!this.isUserProvidedColorScaleValid())return;let t=this.getOptions(),e=fM(t,"color","scale");Object.keys(e).forEach(t=>{this.allDataGroups.includes(t)||console.warn(`"${t}" does not exist in data groups.`)}),this.allDataGroups.filter(t=>e[t]).forEach(t=>this.colorScale[t]=e[t])}setColorClassNames(){let t=fM(this.getOptions(),"color","pairing"),e=fM(t,"numberOfVariants");(!e||e<this.allDataGroups.length)&&(e=this.allDataGroups.length);let n=fM(t,"option"),i=e>5?14:e,r=`${i}-color`;n=n<=d$.pairingOptions[r]?n:1;let o=this.allDataGroups.map((t,e)=>`${i}-${n}-${e%14+1}`);this.colorClassNames=a_().range(o).domain(this.allDataGroups)}},pu=class extends pl{constructor(t){super(t),this.axisFlavor=tD.DEFAULT}assignRangeAndDomains(){let{cartesianScales:t}=this.services,e=this.getOptions(),n=t.isDualAxes(),i={primaryDomain:t.domainAxisPosition,primaryRange:t.rangeAxisPosition,secondaryDomain:null,secondaryRange:null};return n&&(i.secondaryDomain=t.secondaryDomainAxisPosition,i.secondaryRange=t.secondaryRangeAxisPosition),Object.keys(i).forEach(n=>{let r=i[n];t.scales[r]?i[n]={position:r,label:t.getScaleLabel(r),identifier:fM(e,"axes",r,"mapsTo")}:i[n]=null}),i}getTabularDataArray(){let t=this.getDisplayData(),e=this.getOptions(),{groupMapsTo:n}=e.data,{primaryDomain:i,primaryRange:r,secondaryDomain:o,secondaryRange:a}=this.assignRangeAndDomains(),{number:s,code:l}=fM(this.getOptions(),"locale"),u=["Group",i.label,r.label,...o?[o.label]:[],...a?[a.label]:[]],c=t.map(t=>[t[n],null===t[i.identifier]?"&ndash;":t[i.identifier],null===t[r.identifier]||isNaN(t[r.identifier])?"&ndash;":s(t[r.identifier],l),...o?[null===t[o.identifier]?"&ndash;":t[o.identifier]]:[],...a?[null===t[a.identifier]||isNaN(t[a.identifier])?"&ndash;":t[a.identifier]]:[]]);return super.formatTable({headers:u,cells:c})}setData(t){let e;if(t&&(e=super.setData(t),fM(this.getOptions(),"zoomBar",tr.TOP,"enabled"))){let t=fM(this.getOptions(),"zoomBar",tr.TOP,"data");this.setZoomBarData(t)}return e}setZoomBarData(t){let e=t?this.sanitize(dd(t)):this.getDisplayData(),n=e,{cartesianScales:i}=this.services;if(e&&i.domainAxisPosition&&i.rangeAxisPosition){let t=i.getDomainIdentifier(),r=i.getRangeIdentifier(),o=e.map(e=>e[t].getTime());n=(o=dF(o).sort()).map(n=>{let i=0,o={};return e.forEach(e=>{e[t].getTime()===n&&(i+=e[r])}),o[t]=new Date(n),o[r]=i,o})}this.set({zoomBarData:n})}getZoomBarData(){return this.get("zoomBarData")}sanitizeDateValues(t){let e=this.getOptions();if(!e.axes)return t;let n=[];return Object.keys(tr).forEach(t=>{let i=tr[t],r=e.axes[i];if(r&&r.scaleType===tl.TIME){let t=r.mapsTo;(null!==t||void 0!==t)&&n.push(t)}}),n.length>0&&t.forEach(t=>{n.forEach(e=>{null===fM(t,e,"getTime")&&(t[e]=new Date(t[e]))})}),t}sanitize(t){return t=super.sanitize(t),t=this.sanitizeDateValues(t)}},pc=class extends pl{constructor(t){super(t)}getDataGroups(){return super.getDataGroups().filter(t=>"delta"!==t.name)}getTabularDataArray(){let t=this.getDisplayData(),e=this.getOptions(),{groupMapsTo:n}=e.data,{number:i,code:r}=fM(this.getOptions(),"locale"),o=[...t.map(t=>[t[n],null===t.value?"&ndash;":i(t.value,r)])];return super.formatTable({headers:["Group","Value"],cells:o})}},ph=class extends pl{constructor(t){super(t)}getMaximumDomain(t){return t.reduce((t,e)=>t+e.value,0)}getFillColor(t){let e=this.getOptions(),n=fM(e,"color","scale"),i=this.getStatus();return n||!i?super.getFillColor(t):null}getStatus(){let t=this.getOptions(),e=fM(this.getDisplayData()),n=(null==e?void 0:e.reduce((t,e)=>t+e.value,0))??0,i=fM(t,"meter","proportional")?n:n>100?100:n,r=fM(t,"meter","status","ranges");if(r){let t=r.filter(t=>t.range[0]<=i&&i<=t.range[1]);if(t.length>0)return t[0].status}return null}getTabularDataArray(){let t=this.getDisplayData(),e=this.getOptions(),{groupMapsTo:n}=e.data,i=this.getStatus(),r=fM(e,"meter","proportional"),{number:o,code:a}=fM(this.getOptions(),"locale"),s=[],l=[],u;if(null===r){u=100;let e=t[0];s=["Group","Value",...i?["Status"]:[]],l=[[e[n],null===e.value?"&ndash;":o(e.value,a),...i?[i]:[]]]}else u=fM(r,"total")||this.getMaximumDomain(t),s=["Group","Value","Percentage of total"],l=[...t.map(t=>{let e;e=null!==t.value&&void 0!==t.value?Number(t.value):0;let i=Number((t.value/u*100).toFixed(2));return[t[n],null===t.value?"&ndash;":o(e,a),o(i,a)+" %"]})];return super.formatTable({headers:s,cells:l})}};var pd=/\s/,pf=/^\s+/,pp=NaN,pg=/^[-+]0x[0-9a-f]+$/i,pm=/^0b[01]+$/i,py=/^0o[0-7]+$/i,pv=parseInt;function pb(t){if("number"==typeof t)return t;if(u5(t))return pp;if(u9(t)){var e,n="function"==typeof t.valueOf?t.valueOf():t;t=u9(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=(e=t)&&e.slice(0,function(t){for(var e=t.length;e--&&pd.test(t.charAt(e)););return e}(e)+1).replace(pf,"");var i=pm.test(t);return i||py.test(t)?pv(t.slice(2),i?2:8):pg.test(t)?pp:+t}var p_=function(){return uZ.Date.now()},px=Math.max,pE=Math.min;let pw=(()=>{let t=0,e=()=>`0000${(1679616*Math.random()<<0).toString(36)}`.slice(-4);return()=>`u${e()}${t+=1}`})();function pT(t){let e=[];for(let n=0,i=t.length;n<i;n++)e.push(t[n]);return e}function pS(t,e){let n=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function pO(t,e={}){let n=e.width||function(t){let e=pS(t,"border-left-width"),n=pS(t,"border-right-width");return t.clientWidth+e+n}(t),i=e.height||function(t){let e=pS(t,"border-top-width"),n=pS(t,"border-bottom-width");return t.clientHeight+e+n}(t);return{width:n,height:i}}function pM(t){return new Promise((e,n)=>{let i=new Image;i.decode=()=>e(i),i.onload=()=>e(i),i.onerror=n,i.crossOrigin="anonymous",i.decoding="async",i.src=t})}async function pA(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function pC(t,e,n){let i="http://www.w3.org/2000/svg",r=document.createElementNS(i,"svg"),o=document.createElementNS(i,"foreignObject");return r.setAttribute("width",`${e}`),r.setAttribute("height",`${n}`),r.setAttribute("viewBox",`0 0 ${e} ${n}`),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("externalResourcesRequired","true"),r.appendChild(o),o.appendChild(t),pA(r)}let pD=(t,e)=>{if(t instanceof e)return!0;let n=Object.getPrototypeOf(t);return null!==n&&(n.constructor.name===e.name||pD(n,e))};function pk(t,e,n){let i=window.getComputedStyle(t,n),r=i.getPropertyValue("content");if(""===r||"none"===r)return;let o=pw();try{e.className=`${e.className} ${o}`}catch{return}let a=document.createElement("style");a.appendChild(function(t,e,n){let i=`.${t}:${e}`,r=n.cssText?function(t){let e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}(n):pT(n).map(t=>{let e=n.getPropertyValue(t),i=n.getPropertyPriority(t);return`${t}: ${e}${i?" !important":""};`}).join(" ");return document.createTextNode(`${i}{${r}}`)}(o,n,i)),e.appendChild(a)}let pR="application/font-woff",pL="image/jpeg",pN={woff:pR,woff2:pR,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:pL,jpeg:pL,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function pP(t){let e=(function(t){let e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""})(t).toLowerCase();return pN[e]||""}function pI(t){return -1!==t.search(/^(data:)/)}function pB(t,e){return`data:${e};base64,${t}`}async function pU(t,e,n){let i=await fetch(t,e);if(404===i.status)throw Error(`Resource "${i.url}" not found`);let r=await i.blob();return new Promise((t,e)=>{let o=new FileReader;o.onerror=e,o.onloadend=()=>{try{t(n({res:i,result:o.result}))}catch(t){e(t)}},o.readAsDataURL(r)})}let pF={};async function pj(t,e,n){var i,r,o;let a,s;let l=(i=t,r=e,o=n.includeQueryParams,s=i.replace(/\?.*/,""),o&&(s=i),/ttf|otf|eot|woff2?/i.test(s)&&(s=s.replace(/.*\//,"")),r?`[${r}]${s}`:s);if(null!=pF[l])return pF[l];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());try{let i=await pU(t,n.fetchRequestInit,({res:t,result:n})=>(e||(e=t.headers.get("Content-Type")||""),n.split(/,/)[1]));a=pB(i,e)}catch(i){a=n.imagePlaceholder||"";let e=`Failed to fetch resource: ${t}`;i&&(e="string"==typeof i?i:i.message),e&&console.warn(e)}return pF[l]=a,a}async function pH(t){let e=t.toDataURL();return"data:,"===e?t.cloneNode(!1):pM(e)}async function p$(t,e){if(t.currentSrc){let e=document.createElement("canvas"),n=e.getContext("2d");e.width=t.clientWidth,e.height=t.clientHeight,null==n||n.drawImage(t,0,0,e.width,e.height);let i=e.toDataURL();return pM(i)}let n=t.poster,i=pP(n),r=await pj(n,i,e);return pM(r)}async function pz(t){var e;try{if(!(null===(e=null==t?void 0:t.contentDocument)||void 0===e)&&e.body)return await pZ(t.contentDocument.body,{},!0)}catch{}return t.cloneNode(!1)}async function pG(t,e){return pD(t,HTMLCanvasElement)?pH(t):pD(t,HTMLVideoElement)?p$(t,e):pD(t,HTMLIFrameElement)?pz(t):t.cloneNode(!1)}let pV=t=>null!=t.tagName&&"SLOT"===t.tagName.toUpperCase();async function pW(t,e,n){var i,r;let o=[];return 0===(o=pV(t)&&t.assignedNodes?pT(t.assignedNodes()):pD(t,HTMLIFrameElement)&&!(null===(i=t.contentDocument)||void 0===i)&&i.body?pT(t.contentDocument.body.childNodes):pT((null!==(r=t.shadowRoot)&&void 0!==r?r:t).childNodes)).length||pD(t,HTMLVideoElement)||await o.reduce((t,i)=>t.then(()=>pZ(i,n)).then(t=>{t&&e.appendChild(t)}),Promise.resolve()),e}async function pY(t,e){let n=t.querySelectorAll?t.querySelectorAll("use"):[];if(0===n.length)return t;let i={};for(let r=0;r<n.length;r++){let o=n[r].getAttribute("xlink:href");if(o){let n=t.querySelector(o),r=document.querySelector(o);n||!r||i[o]||(i[o]=await pZ(r,e,!0))}}let r=Object.values(i);if(r.length){let e="http://www.w3.org/1999/xhtml",n=document.createElementNS(e,"svg");n.setAttribute("xmlns",e),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";let i=document.createElementNS(e,"defs");n.appendChild(i);for(let t=0;t<r.length;t++)i.appendChild(r[t]);t.appendChild(n)}return t}async function pZ(t,e,n){return n||!e.filter||e.filter(t)?Promise.resolve(t).then(t=>pG(t,e)).then(n=>pW(t,n,e)).then(e=>(pD(e,Element)&&(function(t,e){let n=e.style;if(!n)return;let i=window.getComputedStyle(t);i.cssText?(n.cssText=i.cssText,n.transformOrigin=i.transformOrigin):pT(i).forEach(r=>{let o=i.getPropertyValue(r);"font-size"===r&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),pD(t,HTMLIFrameElement)&&"display"===r&&"inline"===o&&(o="block"),"d"===r&&e.getAttribute("d")&&(o=`path(${e.getAttribute("d")})`),n.setProperty(r,o,i.getPropertyPriority(r))})}(t,e),pk(t,e,":before"),pk(t,e,":after"),pD(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),pD(t,HTMLInputElement)&&e.setAttribute("value",t.value),function(t,e){if(pD(t,HTMLSelectElement)){let n=Array.from(e.children).find(e=>t.value===e.getAttribute("value"));n&&n.setAttribute("selected","")}}(t,e)),e)).then(t=>pY(t,e)):null}let pq=/url\((['"]?)([^'"]+?)\1\)/g,pX=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,pK=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function pQ(t,e,n,i,r){try{let o;let a=n?function(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;let n=document.implementation.createHTMLDocument(),i=n.createElement("base"),r=n.createElement("a");return n.head.appendChild(i),n.body.appendChild(r),e&&(i.href=e),r.href=t,r.href}(e,n):e,s=pP(e);if(r){let t=await r(a);o=pB(t,s)}else o=await pj(a,s,i);return t.replace(function(t){let e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}(e),`$1${o}$3`)}catch{}return t}function pJ(t){return -1!==t.search(pq)}async function p0(t,e,n){if(!pJ(t))return t;let i=function(t,{preferredFontFormat:e}){return e?t.replace(pK,t=>{for(;;){let[n,,i]=pX.exec(t)||[];if(!i)return"";if(i===e)return`src: ${n};`}}):t}(t,n);return(function(t){let e=[];return t.replace(pq,(t,n,i)=>(e.push(i),t)),e.filter(t=>!pI(t))})(i).reduce((t,i)=>t.then(t=>pQ(t,i,e,n)),Promise.resolve(i))}async function p1(t,e,n){var i;let r=null===(i=e.style)||void 0===i?void 0:i.getPropertyValue(t);if(r){let i=await p0(r,null,n);return e.style.setProperty(t,i,e.style.getPropertyPriority(t)),!0}return!1}async function p2(t,e){await p1("background",t,e)||await p1("background-image",t,e),await p1("mask",t,e)||await p1("mask-image",t,e)}async function p3(t,e){let n=pD(t,HTMLImageElement);if(!(n&&!pI(t.src))&&!(pD(t,SVGImageElement)&&!pI(t.href.baseVal)))return;let i=n?t.src:t.href.baseVal,r=await pj(i,pP(i),e);await new Promise((e,i)=>{t.onload=e,t.onerror=i,t.decode&&(t.decode=e),"lazy"===t.loading&&(t.loading="eager"),n?(t.srcset="",t.src=r):t.href.baseVal=r})}async function p5(t,e){let n=pT(t.childNodes).map(t=>p4(t,e));await Promise.all(n).then(()=>t)}async function p4(t,e){pD(t,Element)&&(await p2(t,e),await p3(t,e),await p5(t,e))}let p6={};async function p8(t){let e=p6[t];if(null!=e)return e;let n=await (await fetch(t)).text();return e={url:t,cssText:n},p6[t]=e,e}async function p7(t,e){let n=t.cssText,i=/url\(["']?([^"')]+)["']?\)/g,r=(n.match(/url\([^)]+\)/g)||[]).map(async r=>{let o=r.replace(i,"$1");return o.startsWith("https://")||(o=new URL(o,t.url).href),pU(o,e.fetchRequestInit,({result:t})=>(n=n.replace(r,`url(${t})`),[r,t]))});return Promise.all(r).then(()=>n)}function p9(t){if(null==t)return[];let e=[],n=t.replace(/(\/\*[\s\S]*?\*\/)/gi,""),i=RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){let t=i.exec(n);if(null===t)break;e.push(t[0])}n=n.replace(i,"");let r=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o=RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let t=r.exec(n);if(null===t){if(null===(t=o.exec(n)))break;r.lastIndex=o.lastIndex}else o.lastIndex=r.lastIndex;e.push(t[0])}return e}async function gt(t,e){let n=[],i=[];return t.forEach(n=>{if("cssRules"in n)try{pT(n.cssRules||[]).forEach((t,r)=>{if(t.type===CSSRule.IMPORT_RULE){let o=r+1,a=t.href,s=p8(a).then(t=>p7(t,e)).then(t=>p9(t).forEach(t=>{try{n.insertRule(t,t.startsWith("@import")?o+=1:n.cssRules.length)}catch(e){console.error("Error inserting rule from remote css",{rule:t,error:e})}})).catch(t=>{console.error("Error loading remote css",t.toString())});i.push(s)}})}catch(o){let r=t.find(t=>null==t.href)||document.styleSheets[0];null!=n.href&&i.push(p8(n.href).then(t=>p7(t,e)).then(t=>p9(t).forEach(t=>{r.insertRule(t,n.cssRules.length)})).catch(t=>{console.error("Error loading remote stylesheet",t)})),console.error("Error inlining remote css file",o)}}),Promise.all(i).then(()=>(t.forEach(t=>{if("cssRules"in t)try{pT(t.cssRules||[]).forEach(t=>{n.push(t)})}catch(e){console.error(`Error while reading CSS rules from ${t.href}`,e)}}),n))}async function ge(t,e){if(null==t.ownerDocument)throw Error("Provided element is not within a Document");let n=pT(t.ownerDocument.styleSheets),i=await gt(n,e);return i.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>pJ(t.style.getPropertyValue("src")))}async function gn(t,e){let n=await ge(t,e);return(await Promise.all(n.map(t=>{let n=t.parentStyleSheet?t.parentStyleSheet.href:null;return p0(t.cssText,n,e)}))).join(`
`)}async function gi(t,e){let n=null!=e.fontEmbedCSS?e.fontEmbedCSS:e.skipFonts?null:await gn(t,e);if(n){let e=document.createElement("style"),i=document.createTextNode(n);e.appendChild(i),t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}}async function gr(t,e={}){let{width:n,height:i}=pO(t,e),r=await pZ(t,e,!0);return await gi(r,e),await p4(r,e),function(t,e){let{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);let i=e.style;null!=i&&Object.keys(i).forEach(t=>{n[t]=i[t]})}(r,e),await pC(r,n,i)}async function go(t,e={}){let{width:n,height:i}=pO(t,e),r=await gr(t,e),o=await pM(r),a=document.createElement("canvas"),s=a.getContext("2d"),l=e.pixelRatio||function(){let t,e;try{e=process}catch{}let n=e&&e.env?e.env.devicePixelRatio:null;return n&&Number.isNaN(t=parseInt(n,10))&&(t=1),t||window.devicePixelRatio||1}(),u=e.canvasWidth||n,c=e.canvasHeight||i;return a.width=u*l,a.height=c*l,e.skipAutoScale||(a.width>16384||a.height>16384)&&(a.width>16384&&a.height>16384?a.width>a.height?(a.height*=16384/a.width,a.width=16384):(a.width*=16384/a.height,a.height=16384):a.width>16384?(a.height*=16384/a.width,a.width=16384):(a.width*=16384/a.height,a.height=16384)),a.style.width=`${u}`,a.style.height=`${c}`,e.backgroundColor&&(s.fillStyle=e.backgroundColor,s.fillRect(0,0,a.width,a.height)),s.drawImage(o,0,0,a.width,a.height),a}async function ga(t,e={}){return(await go(t,e)).toDataURL()}async function gs(t,e={}){return(await go(t,e)).toDataURL("image/jpeg",e.quality||1)}class gl{constructor(t,e){this.model=t,this.services=e,this.init()}init(){}update(){}setModel(t){this.model=t}setServices(t){this.services=t}}let gu=class t extends gl{constructor(t,e){super(t,e)}static getHTMLElementSize(t){return{width:t.clientWidth,height:t.clientHeight}}static getSVGElementSize(t,e={useAttrs:!1,useClientDimensions:!1,useBBox:!1,useBoundingRect:!1}){let n,i,r,o,a;t.attr||(t=nr(t));let s={width:0,height:0},l=t=>{t&&Object.keys(s).forEach(e=>{if(t[e]){let n=t[e],i=parseFloat(n);n&&i>s[e]&&-1===(""+n).indexOf("%")&&(s[e]=i)}})},u={width:t.attr("width"),height:t.attr("height")},c=t.node();try{"function"==typeof c.getBBox&&(i={width:(n=c.getBBox()).width,height:n.height})}catch(t){console.error(t)}try{"function"==typeof(null==c?void 0:c.getBoundingClientRect)&&(o={width:(r=c.getBoundingClientRect()).width,height:r.height})}catch(t){console.error(t)}if(c instanceof SVGSVGElement&&(a={width:c.clientWidth,height:c.clientHeight}),e){if(e.useAttrs&&(l(u),s.width>0&&s.height>0))return s;if(e.useClientDimensions&&(l(a),s.width>0&&s.height>0))return a;if(e.useBBox&&(l(i),s.width>0&&s.height>0))return i;if(e.useBoundingRect&&(l(o),s.width>0&&s.height>0))return o}try{let e={width:fM(t.node(),"width","baseVal","value"),height:fM(t.node(),"height","baseVal","value")};l(e)}catch{l(a),l(i),l(u)}return s}static appendOrSelect(t,e){let n=t.select(`${e}`);if(n.empty()){let n=e.split("#"),i,r;return 2===n.length?(i=n[0],r=(n=n[1].split("."))[0]):i=(n=e.split("."))[0],t.append(i).attr("id",r).attr("class",n.slice(1).join(" "))}return n}init(){this.initializeID(),this.styleHolderElement(),this.addMainContainer(),this.model.getOptions().resizable&&this.addResizeListener(),this.addHolderListeners(),this.handleFullscreenChange()}getChartID(){return this.chartID}getElementOffset(t,e=!1){let n={left:0,top:0},i=t.getBoundingClientRect(),r=e?{left:0,top:0}:this.getHolder().getBoundingClientRect();try{n.left=i.left-r.left,n.top=i.top-r.top}catch(t){console.error(t)}return n}generateElementIDString(t){return`chart-${this.chartID}-${t}`}initializeID(){this.chartID=Math.floor((1+Math.random())*281474976710656).toString(16)}addMainContainer(){let t=this.model.getOptions(),e=fM(t,"style","prefix"),n=nr(this.getHolder()).append("div").classed(`cds--${e}--chart-wrapper`,!0).attr("id",`chart-${this.getChartID()}`).style("height","100%").style("width","100%");n.append("g").attr("class","DONT_STYLE_ME_css_styles_verifier"),this.mainContainer=n.node()}update(){this.styleHolderElement()}styleHolderElement(){let t=this.getHolder(),{width:e,height:n,theme:i}=this.model.getOptions();e!==this.width&&(t.style.width=e,this.width=e),n!==this.height&&(t.style.height=n,this.height=n),nr(this.getHolder()).classed("cds--chart-holder",!0).attr("data-carbon-theme",i)}getHolder(){return this.model.get("holder")}exportToJPG(){let t=this,e=this.model.getOptions(),n=this.getHolder(),i=nr(n);i.classed("filled",!0),gs(this.getMainContainer(),{quality:1,filter:t=>!(t.classList&&t.classList.contains("cds--cc--toolbar"))}).then(function(n){var r;let o="myChart",a=fM(e,"fileDownload","fileName");"function"==typeof a?o=a("jpg"):"string"==typeof a&&(o=a),null==(r=t.services.files)||r.downloadImage(n,`${o}.jpg`),i.classed("filled",!1)})}exportToPNG(){let t=this,e=this.model.getOptions(),n=this.getHolder(),i=nr(n);i.classed("filled",!0),ga(this.getMainContainer(),{quality:1,filter:t=>!(t.classList&&t.classList.contains("cds--cc--toolbar"))}).then(function(n){var r;let o="myChart",a=fM(e,"fileDownload","fileName");"function"==typeof a?o=a("png"):"string"==typeof a&&(o=a),null==(r=t.services.files)||r.downloadImage(n,`${o}.png`),i.classed("filled",!1)}).catch(function(t){console.error("oops, something went wrong!",t)})}isFullScreenMode(){return nr(this.getHolder()).classed("fullscreen")}toggleFullscreen(){let t=this.getHolder();nr(t).classed("fullscreen")&&(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()}handleFullscreenChange(){document.addEventListener("fullscreenchange",()=>{let t=nr(this.getHolder()),e=t.classed("fullscreen");t.classed("fullscreen",!e)})}setSVGMaxHeight(){if(!this.model.getOptions().height){let{height:e}=t.getSVGElementSize(nr(this.mainContainer),{useBBox:!0}),n=nr(this.mainContainer).attr("class"),i=nr(this.mainContainer).selectAll(`.${n} > svg`),r=0;i.nodes().forEach(function(e){r+=Number(t.getSVGElementSize(nr(e),{useBBox:!0}).height)}),r<=e?nr(this.mainContainer).attr("height",r):nr(this.mainContainer).attr("height","100%")}}getMainContainer(){return this.mainContainer}addHolderListeners(){let t=this.getHolder();t&&nr(t).on("mouseover",()=>{var t;null==(t=this.services.events)||t.dispatchEvent(tt.Chart.MOUSEOVER)}).on("mouseout",()=>{var t;null==(t=this.services.events)||t.dispatchEvent(tt.Chart.MOUSEOUT)})}addResizeListener(){let t=this.getHolder();if(!t)return;let e=t.clientWidth,n=t.clientHeight,i=function(t,e,n){var i,r,o,a,s,l,u=0,c=!1,h=!1,d=!0;if("function"!=typeof t)throw TypeError("Expected a function");function f(e){var n=i,o=r;return i=r=void 0,u=e,a=t.apply(o,n)}function p(t){var n=t-l,i=t-u;return void 0===l||n>=e||n<0||h&&i>=o}function g(){var t,n,i,r=p_();if(p(r))return m(r);s=setTimeout(g,(t=r-l,n=r-u,i=e-t,h?pE(i,o-n):i))}function m(t){return s=void 0,d&&i?f(t):(i=r=void 0,a)}function y(){var t,n=p_(),o=p(n);if(i=arguments,r=this,l=n,o){if(void 0===s)return u=t=l,s=setTimeout(g,e),c?f(t):a;if(h)return clearTimeout(s),s=setTimeout(g,e),f(l)}return void 0===s&&(s=setTimeout(g,e)),a}return e=pb(e)||0,u9(n)&&(c=!!n.leading,o=(h="maxWait"in n)?px(pb(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),y.cancel=function(){void 0!==s&&clearTimeout(s),u=0,i=l=r=s=void 0},y.flush=function(){return void 0===s?a:m(p_())},y}(()=>{var i;t&&(Math.abs(e-t.clientWidth)>1||Math.abs(n-t.clientHeight)>1)&&(e=t.clientWidth,n=t.clientHeight,null==(i=this.services.events)||i.dispatchEvent(tt.Chart.RESIZE))},12.5);new ResizeObserver(i).observe(t)}},gc=class t extends gl{static appendOrUpdateLinearGradient(t){let e=t.svg.select(`defs linearGradient#${t.id}`);e.empty()&&(e=t.svg.append("defs").append("linearGradient").attr("id",t.id).attr("x1",t.x1).attr("x2",t.x2).attr("y1",t.y1).attr("y2",t.y2)),e.selectAll("stop").remove(),e.selectAll("stop").data(t.stops).enter().append("stop").attr("offset",t=>t.offset).style("stop-color",t=>t.color).style("stop-opacity",t=>t.opacity)}static getOffsetRatio(t){return(100*Math.abs(t[1])/Math.abs(t[0]-t[1])).toFixed(2)+"%"}static getStops(e,n){let i=e[0]<0&&e[1]>0,r=[{offset:"0%",color:n,opacity:"0.6"},{offset:"80%",color:n,opacity:"0"}];return i&&(r=[{offset:"0%",color:n,opacity:"0.6"},{offset:t.getOffsetRatio(e),color:n,opacity:"0"},{offset:"100%",color:n,opacity:"0.6"}]),r}};var gh=Math.PI,gd=2*gh,gf=gd-1e-6;function gp(){this._x0=this._y0=this._x1=this._y1=null,this._=""}gp.prototype=(function(){return new gp}).prototype={constructor:gp,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+o)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var o=this._x1,a=this._y1,s=n-t,l=i-e,u=o-t,c=a-e,h=u*u+c*c;if(r<0)throw Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6){if(Math.abs(c*s-l*u)>1e-6&&r){var d=n-o,f=i-a,p=s*s+l*l,g=Math.sqrt(p),m=Math.sqrt(h),y=r*Math.tan((gh-Math.acos((p+h-(d*d+f*f))/(2*g*m)))/2),v=y/m,b=y/g;Math.abs(v-1)>1e-6&&(this._+="L"+(t+v*u)+","+(e+v*c)),this._+="A"+r+","+r+",0,0,"+ +(c*d>u*f)+","+(this._x1=t+b*s)+","+(this._y1=e+b*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e)}},arc:function(t,e,n,i,r,o){t=+t,e=+e,n=+n,o=!!o;var a=n*Math.cos(i),s=n*Math.sin(i),l=t+a,u=e+s,c=1^o,h=o?i-r:r-i;if(n<0)throw Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-u)>1e-6)&&(this._+="L"+l+","+u),n&&(h<0&&(h=h%gd+gd),h>gf?this._+="A"+n+","+n+",0,1,"+c+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=gh)+","+c+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}},Array.prototype.slice;var gg={value:function(){}};function gm(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw Error("illegal type: "+t);i[t]=[]}return new gy(i)}function gy(t){this._=t}function gv(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=gg,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}gy.prototype=gm.prototype={constructor:gy,on:function(t,e){var n,i=this._,r=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw Error("unknown type: "+t);return{type:t,name:e}}),o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((n=(t=r[o]).type)&&(n=function(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}(i[n],t.name)))return n;return}if(null!=e&&"function"!=typeof e)throw Error("invalid callback: "+e);for(;++o<a;)if(n=(t=r[o]).type)i[n]=gv(i[n],t.name,e);else if(null==e)for(n in i)i[n]=gv(i[n],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new gy(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw Error("unknown type: "+t);for(i=this._[t],o=0,n=i.length;o<n;++o)i[o].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};let gb=Object.freeze(Object.defineProperty({__proto__:null,dispatch:gm},Symbol.toStringTag,{value:"Module"})),g_=function(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var n=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(e){var i=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,i.get?i:{enumerable:!0,get:function(){return t[e]}})}),n}(gb);g_.dispatch;var gx=(m={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},function(t){return null==m?void 0:m[t]}),gE=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,gw=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),gT=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,gS=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,gO="\ud800-\udfff",gM="\\u2700-\\u27bf",gA="a-z\\xdf-\\xf6\\xf8-\\xff",gC="A-Z\\xc0-\\xd6\\xd8-\\xde",gD="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",gk="['’]",gR="["+gD+"]",gL="["+gA+"]",gN="[^"+gO+gD+"\\d+"+gM+gA+gC+"]",gP="(?:\ud83c[\udde6-\uddff]){2}",gI="[\ud800-\udbff][\udc00-\udfff]",gB="["+gC+"]",gU="(?:"+gL+"|"+gN+")",gF="(?:"+gk+"(?:d|ll|m|re|s|t|ve))?",gj="(?:"+gk+"(?:D|LL|M|RE|S|T|VE))?",gH="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\ud83c[\udffb-\udfff])?",g$="[\\ufe0e\\ufe0f]?",gz="(?:\\u200d(?:"+["[^"+gO+"]",gP,gI].join("|")+")"+g$+gH+")*",gG="(?:"+["["+gM+"]",gP,gI].join("|")+")"+(g$+gH+gz),gV=RegExp([gB+"?"+gL+"+"+gF+"(?="+[gR,gB,"$"].join("|")+")","(?:"+gB+"|"+gN+")+"+gj+"(?="+[gR,gB+gU,"$"].join("|")+")",gB+"?"+gU+"+"+gF,gB+"+"+gj,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",gG].join("|"),"g"),gW=RegExp("['’]","g");function gY(t){return function(e){var n,i,r,o;return function(t,e,n,i){for(var r=-1,o=null==t?0:t.length;++r<o;)n=e(n,t[r],r,t);return n}((i=((n=hg(n=e))&&n.replace(gE,gx).replace(gw,"")).replace(gW,""),i=hg(i),void 0===r?(o=i,gS.test(o))?i.match(gV)||[]:i.match(gT)||[]:i.match(r)||[]),t,"")}}function gZ(t,e,n){var i,r,o;return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=pb(n))==n?n:0),void 0!==e&&(e=(e=pb(e))==e?e:0),i=pb(t),r=e,o=n,i==i&&(void 0!==o&&(i=i<=o?i:o),void 0!==r&&(i=i>=r?i:r)),i}cD(function(t,e,n){return function(t,e,n){if("function"!=typeof t)throw TypeError("Expected a function");return setTimeout(function(){t.apply(void 0,n)},e)}(t,pb(e)||0,n)}),gY(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()});class gq{constructor(t,e,n){if(this.type="",this.renderType=te.HTML,this.id="",this.parent=void 0,this.configs={},this.model=t,this.services=e,n&&(this.configs=n,this.configs.id)){let t=fM(this.model.getOptions(),"style","prefix");this.id=`${t}--${this.configs.id}`}this.parent||this.setParent(nr(this.services.domUtils.getMainContainer()))}init(){}render(t=!0){console.error("Error: Component did not provide the required render function.")}destroy(){}setModel(t){this.model=t}setServices(t){this.services=t}setParent(t){var e;let n=this.parent;if(this.parent=t,!(n&&n.node()===t.node())&&this.type){let t=fM(this.model.getOptions(),"style","prefix");null==(e=this.parent)||e.classed(`cds--${t}--${this.type}`,!0),n&&n.classed(`cds--${t}--${this.type}`,!1)}}getParent(){return this.parent}getComponentContainer(t={withinChartClip:!1}){if(this.type){let e=fM(this.model.getOptions(),"style","prefix"),n=this.id?`#${this.id}`:"",i=gu.appendOrSelect(this.parent,`${this.renderType===te.SVG?"svg":"div"}${n}.cds--${e}--${this.type}`);if(t.withinChartClip){let t=this.model.get("chartClipId");if(t){let e=nr(`#${t}`).select("rect");0!==e.size()&&parseFloat(e.attr("height"))>0&&i.attr("clip-path",`url(#${t})`)}}return i.attr("width","100%").attr("height","100%")}return this.parent}getOptions(){return this.configs.options?dP({},this.model.getOptions(),this.configs.options):this.model.getOptions()}}/*! @license DOMPurify 3.0.10 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.10/LICENSE */let{entries:gX,setPrototypeOf:gK,isFrozen:gQ,getPrototypeOf:gJ,getOwnPropertyDescriptor:g0}=Object,{freeze:g1,seal:g2,create:g3}=Object,{apply:g5,construct:g4}="u">typeof Reflect&&Reflect;g1||(g1=function(t){return t}),g2||(g2=function(t){return t}),g5||(g5=function(t,e,n){return t.apply(e,n)}),g4||(g4=function(t,e){return new t(...e)});let g6=ml(Array.prototype.forEach),g8=ml(Array.prototype.pop),g7=ml(Array.prototype.push),g9=ml(String.prototype.toLowerCase),mt=ml(String.prototype.toString),me=ml(String.prototype.match),mn=ml(String.prototype.replace),mi=ml(String.prototype.indexOf),mr=ml(String.prototype.trim),mo=ml(Object.prototype.hasOwnProperty),ma=ml(RegExp.prototype.test),ms=(i=TypeError,function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return g4(i,e)});function ml(t){return function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return g5(t,e,i)}}function mu(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g9;gK&&gK(t,null);let i=e.length;for(;i--;){let r=e[i];if("string"==typeof r){let t=n(r);t!==r&&(gQ(e)||(e[i]=t),r=t)}t[r]=!0}return t}function mc(t){let e=g3(null);for(let[n,i]of gX(t))mo(t,n)&&(Array.isArray(i)?e[n]=function(t){for(let e=0;e<t.length;e++)mo(t,e)||(t[e]=null);return t}(i):i&&"object"==typeof i&&i.constructor===Object?e[n]=mc(i):e[n]=i);return e}function mh(t,e){for(;null!==t;){let n=g0(t,e);if(n){if(n.get)return ml(n.get);if("function"==typeof n.value)return ml(n.value)}t=gJ(t)}return function(){return null}}let md=g1(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),mf=g1(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),mp=g1(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),mg=g1(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mm=g1(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),my=g1(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),mv=g1(["#text"]),mb=g1(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),m_=g1(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mx=g1(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),mE=g1(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),mw=g2(/\{\{[\w\W]*|[\w\W]*\}\}/gm),mT=g2(/<%[\w\W]*|[\w\W]*%>/gm),mS=g2(/\${[\w\W]*}/gm),mO=g2(/^data-[\-\w.\u00B7-\uFFFF]/),mM=g2(/^aria-[\-\w]+$/),mA=g2(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),mC=g2(/^(?:\w+script|data):/i),mD=g2(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),mk=g2(/^html$/i),mR=g2(/^[a-z][a-z\d]*(-[a-z\d]+)+$/i);var mL=Object.freeze({__proto__:null,MUSTACHE_EXPR:mw,ERB_EXPR:mT,TMPLIT_EXPR:mS,DATA_ATTR:mO,ARIA_ATTR:mM,IS_ALLOWED_URI:mA,IS_SCRIPT_OR_DATA:mC,ATTR_WHITESPACE:mD,DOCTYPE_NAME:mk,CUSTOM_ELEMENT:mR});let mN=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let n=null,i="data-tt-policy-suffix";e&&e.hasAttribute(i)&&(n=e.getAttribute(i));let r="dompurify"+(n?"#"+n:"");try{return t.createPolicy(r,{createHTML:t=>t,createScriptURL:t=>t})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};var mP=function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window,n=e=>t(e);if(n.version="3.0.10",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;let{document:i}=e,r=i,o=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:s,Node:l,Element:u,NodeFilter:c,NamedNodeMap:h=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:p}=e,g=u.prototype,m=mh(g,"cloneNode"),y=mh(g,"nextSibling"),v=mh(g,"childNodes"),b=mh(g,"parentNode");if("function"==typeof s){let t=i.createElement("template");t.content&&t.content.ownerDocument&&(i=t.content.ownerDocument)}let _,x="",{implementation:E,createNodeIterator:w,createDocumentFragment:T,getElementsByTagName:S}=i,{importNode:O}=r,M={};n.isSupported="function"==typeof gX&&"function"==typeof b&&E&&void 0!==E.createHTMLDocument;let{MUSTACHE_EXPR:A,ERB_EXPR:C,TMPLIT_EXPR:D,DATA_ATTR:k,ARIA_ATTR:R,IS_SCRIPT_OR_DATA:L,ATTR_WHITESPACE:N,CUSTOM_ELEMENT:P}=mL,{IS_ALLOWED_URI:I}=mL,B=null,U=mu({},[...md,...mf,...mp,...mm,...mv]),F=null,j=mu({},[...mb,...m_,...mx,...mE]),H=Object.seal(g3(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$=null,z=null,G=!0,V=!0,W=!1,Y=!0,Z=!1,q=!1,X=!1,K=!1,Q=!1,J=!1,tt=!1,te=!0,tn=!1,ti=!0,tr=!1,to={},ta=null,ts=mu({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),tl=null,tu=mu({},["audio","video","img","source","image","track"]),tc=null,th=mu({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),td="http://www.w3.org/1998/Math/MathML",tf="http://www.w3.org/2000/svg",tp="http://www.w3.org/1999/xhtml",tg=tp,tm=!1,ty=null,tv=mu({},[td,tf,tp],mt),tb=null,t_=["application/xhtml+xml","text/html"],tx=null,tE=null,tw=i.createElement("form"),tT=function(t){return t instanceof RegExp||t instanceof Function},tS=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(tE&&tE===t)){if(t&&"object"==typeof t||(t={}),t=mc(t),tx="application/xhtml+xml"===(tb=-1===t_.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE)?mt:g9,B=mo(t,"ALLOWED_TAGS")?mu({},t.ALLOWED_TAGS,tx):U,F=mo(t,"ALLOWED_ATTR")?mu({},t.ALLOWED_ATTR,tx):j,ty=mo(t,"ALLOWED_NAMESPACES")?mu({},t.ALLOWED_NAMESPACES,mt):tv,tc=mo(t,"ADD_URI_SAFE_ATTR")?mu(mc(th),t.ADD_URI_SAFE_ATTR,tx):th,tl=mo(t,"ADD_DATA_URI_TAGS")?mu(mc(tu),t.ADD_DATA_URI_TAGS,tx):tu,ta=mo(t,"FORBID_CONTENTS")?mu({},t.FORBID_CONTENTS,tx):ts,$=mo(t,"FORBID_TAGS")?mu({},t.FORBID_TAGS,tx):{},z=mo(t,"FORBID_ATTR")?mu({},t.FORBID_ATTR,tx):{},to=!!mo(t,"USE_PROFILES")&&t.USE_PROFILES,G=!1!==t.ALLOW_ARIA_ATTR,V=!1!==t.ALLOW_DATA_ATTR,W=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Y=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Z=t.SAFE_FOR_TEMPLATES||!1,q=t.WHOLE_DOCUMENT||!1,Q=t.RETURN_DOM||!1,J=t.RETURN_DOM_FRAGMENT||!1,tt=t.RETURN_TRUSTED_TYPE||!1,K=t.FORCE_BODY||!1,te=!1!==t.SANITIZE_DOM,tn=t.SANITIZE_NAMED_PROPS||!1,ti=!1!==t.KEEP_CONTENT,tr=t.IN_PLACE||!1,I=t.ALLOWED_URI_REGEXP||mA,tg=t.NAMESPACE||tp,H=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&tT(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(H.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&tT(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(H.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(H.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Z&&(V=!1),J&&(Q=!0),to&&(B=mu({},mv),F=[],!0===to.html&&(mu(B,md),mu(F,mb)),!0===to.svg&&(mu(B,mf),mu(F,m_),mu(F,mE)),!0===to.svgFilters&&(mu(B,mp),mu(F,m_),mu(F,mE)),!0===to.mathMl&&(mu(B,mm),mu(F,mx),mu(F,mE))),t.ADD_TAGS&&(B===U&&(B=mc(B)),mu(B,t.ADD_TAGS,tx)),t.ADD_ATTR&&(F===j&&(F=mc(F)),mu(F,t.ADD_ATTR,tx)),t.ADD_URI_SAFE_ATTR&&mu(tc,t.ADD_URI_SAFE_ATTR,tx),t.FORBID_CONTENTS&&(ta===ts&&(ta=mc(ta)),mu(ta,t.FORBID_CONTENTS,tx)),ti&&(B["#text"]=!0),q&&mu(B,["html","head","body"]),B.table&&(mu(B,["tbody"]),delete $.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw ms('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw ms('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=(_=t.TRUSTED_TYPES_POLICY).createHTML("")}else void 0===_&&(_=mN(p,o)),null!==_&&"string"==typeof x&&(x=_.createHTML(""));g1&&g1(t),tE=t}},tO=mu({},["mi","mo","mn","ms","mtext"]),tM=mu({},["foreignobject","desc","title","annotation-xml"]),tA=mu({},["title","style","font","a","script"]),tC=mu({},[...mf,...mp,...mg]),tD=mu({},[...mm,...my]),tk=function(t){let e=b(t);e&&e.tagName||(e={namespaceURI:tg,tagName:"template"});let n=g9(t.tagName),i=g9(e.tagName);return!!ty[t.namespaceURI]&&(t.namespaceURI===tf?e.namespaceURI===tp?"svg"===n:e.namespaceURI===td?"svg"===n&&("annotation-xml"===i||tO[i]):!!tC[n]:t.namespaceURI===td?e.namespaceURI===tp?"math"===n:e.namespaceURI===tf?"math"===n&&tM[i]:!!tD[n]:t.namespaceURI===tp?(e.namespaceURI!==tf||!!tM[i])&&(e.namespaceURI!==td||!!tO[i])&&!tD[n]&&(tA[n]||!tC[n]):!!("application/xhtml+xml"===tb&&ty[t.namespaceURI]))},tR=function(t){g7(n.removed,{element:t});try{t.parentNode.removeChild(t)}catch{t.remove()}},tL=function(t,e){try{g7(n.removed,{attribute:e.getAttributeNode(t),from:e})}catch{g7(n.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!F[t]){if(Q||J)try{tR(e)}catch{}else try{e.setAttribute(t,"")}catch{}}},tN=function(t){let e=null,n=null;if(K)t="<remove></remove>"+t;else{let e=me(t,/^[\r\n\t ]+/);n=e&&e[0]}"application/xhtml+xml"===tb&&tg===tp&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");let r=_?_.createHTML(t):t;if(tg===tp)try{e=new f().parseFromString(r,tb)}catch{}if(!e||!e.documentElement){e=E.createDocument(tg,"template",null);try{e.documentElement.innerHTML=tm?x:r}catch{}}let o=e.body||e.documentElement;return t&&n&&o.insertBefore(i.createTextNode(n),o.childNodes[0]||null),tg===tp?S.call(e,q?"html":"body")[0]:q?e.documentElement:o},tP=function(t){return w.call(t.ownerDocument||t,t,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION,null)},tI=function(t){return"function"==typeof l&&t instanceof l},tB=function(t,e,i){M[t]&&g6(M[t],t=>{t.call(n,e,i,tE)})},tU=function(t){let e=null;if(tB("beforeSanitizeElements",t,null),t instanceof d&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof h)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes))return tR(t),!0;let i=tx(t.nodeName);if(tB("uponSanitizeElement",t,{tagName:i,allowedTags:B}),t.hasChildNodes()&&!tI(t.firstElementChild)&&ma(/<[/\w]/g,t.innerHTML)&&ma(/<[/\w]/g,t.textContent))return tR(t),!0;if(!B[i]||$[i]){if(!$[i]&&tj(i)&&(H.tagNameCheck instanceof RegExp&&ma(H.tagNameCheck,i)||H.tagNameCheck instanceof Function&&H.tagNameCheck(i)))return!1;if(ti&&!ta[i]){let e=b(t)||t.parentNode,n=v(t)||t.childNodes;if(n&&e){let i=n.length;for(let r=i-1;r>=0;--r)e.insertBefore(m(n[r],!0),y(t))}}return tR(t),!0}return t instanceof u&&!tk(t)||("noscript"===i||"noembed"===i||"noframes"===i)&&ma(/<\/no(script|embed|frames)/i,t.innerHTML)?(tR(t),!0):(Z&&3===t.nodeType&&(e=t.textContent,g6([A,C,D],t=>{e=mn(e,t," ")}),t.textContent!==e&&(g7(n.removed,{element:t.cloneNode()}),t.textContent=e)),tB("afterSanitizeElements",t,null),!1)},tF=function(t,e,n){if(te&&("id"===e||"name"===e)&&(n in i||n in tw))return!1;if(!(V&&!z[e]&&ma(k,e))&&!(G&&ma(R,e))){if(!F[e]||z[e]){if(!(tj(t)&&(H.tagNameCheck instanceof RegExp&&ma(H.tagNameCheck,t)||H.tagNameCheck instanceof Function&&H.tagNameCheck(t))&&(H.attributeNameCheck instanceof RegExp&&ma(H.attributeNameCheck,e)||H.attributeNameCheck instanceof Function&&H.attributeNameCheck(e))||"is"===e&&H.allowCustomizedBuiltInElements&&(H.tagNameCheck instanceof RegExp&&ma(H.tagNameCheck,n)||H.tagNameCheck instanceof Function&&H.tagNameCheck(n))))return!1}else if(!tc[e]&&!ma(I,mn(n,N,""))&&!(("src"===e||"xlink:href"===e||"href"===e)&&"script"!==t&&0===mi(n,"data:")&&tl[t])&&!(W&&!ma(L,mn(n,N,"")))&&n)return!1}return!0},tj=function(t){return"annotation-xml"!==t&&me(t,P)},tH=function(t){tB("beforeSanitizeAttributes",t,null);let{attributes:e}=t;if(!e)return;let i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:F},r=e.length;for(;r--;){let o=e[r],{name:a,namespaceURI:s,value:l}=o,u=tx(a),c="value"===a?l:mr(l);if(i.attrName=u,i.attrValue=c,i.keepAttr=!0,i.forceKeepAttr=void 0,tB("uponSanitizeAttribute",t,i),c=i.attrValue,i.forceKeepAttr||(tL(a,t),!i.keepAttr))continue;if(!Y&&ma(/\/>/i,c)){tL(a,t);continue}Z&&g6([A,C,D],t=>{c=mn(c,t," ")});let h=tx(t.nodeName);if(tF(h,u,c)){if(tn&&("id"===u||"name"===u)&&(tL(a,t),c="user-content-"+c),_&&"object"==typeof p&&"function"==typeof p.getAttributeType&&!s)switch(p.getAttributeType(h,u)){case"TrustedHTML":c=_.createHTML(c);break;case"TrustedScriptURL":c=_.createScriptURL(c)}try{s?t.setAttributeNS(s,a,c):t.setAttribute(a,c),g8(n.removed)}catch{}}}tB("afterSanitizeAttributes",t,null)},t$=function t(e){let n=null,i=tP(e);for(tB("beforeSanitizeShadowDOM",e,null);n=i.nextNode();)tB("uponSanitizeShadowNode",n,null),tU(n)||(n.content instanceof a&&t(n.content),tH(n));tB("afterSanitizeShadowDOM",e,null)};return n.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,o=null,s=null,u=null;if((tm=!t)&&(t="<!-->"),"string"!=typeof t&&!tI(t)){if("function"==typeof t.toString){if("string"!=typeof(t=t.toString()))throw ms("dirty is not a string, aborting")}else throw ms("toString is not a function")}if(!n.isSupported)return t;if(X||tS(e),n.removed=[],"string"==typeof t&&(tr=!1),tr){if(t.nodeName){let e=tx(t.nodeName);if(!B[e]||$[e])throw ms("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof l)1===(o=(i=tN("<!---->")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===o.nodeName||"HTML"===o.nodeName?i=o:i.appendChild(o);else{if(!Q&&!Z&&!q&&-1===t.indexOf("<"))return _&&tt?_.createHTML(t):t;if(!(i=tN(t)))return Q?null:tt?x:""}i&&K&&tR(i.firstChild);let c=tP(tr?t:i);for(;s=c.nextNode();)tU(s)||(s.content instanceof a&&t$(s.content),tH(s));if(tr)return t;if(Q){if(J)for(u=T.call(i.ownerDocument);i.firstChild;)u.appendChild(i.firstChild);else u=i;return(F.shadowroot||F.shadowrootmode)&&(u=O.call(r,u,!0)),u}let h=q?i.outerHTML:i.innerHTML;return q&&B["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&ma(mk,i.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+i.ownerDocument.doctype.name+`>
`+h),Z&&g6([A,C,D],t=>{h=mn(h,t," ")}),_&&tt?_.createHTML(h):h},n.setConfig=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};tS(t),X=!0},n.clearConfig=function(){tE=null,X=!1},n.isValidAttribute=function(t,e,n){tE||tS({});let i=tx(t),r=tx(e);return tF(i,r,n)},n.addHook=function(t,e){"function"==typeof e&&(M[t]=M[t]||[],g7(M[t],e))},n.removeHook=function(t){if(M[t])return g8(M[t])},n.removeHooks=function(t){M[t]&&(M[t]=[])},n.removeAllHooks=function(){M={}},n}();let mI=t=>mP.sanitize(t,{USE_PROFILES:{html:!0,svg:!0,svgFilters:!0}}),mB=t=>mP.sanitize(t,{NAMESPACE:"http://www.w3.org/2000/svg",USE_PROFILES:{html:!0,svg:!0,svgFilters:!0}}),mU=t=>mP.sanitize(t,{ALLOWED_TAGS:[]}),mF=class t extends gq{constructor(){super(...arguments),this.type="toolbar",this.renderType=te.HTML}init(){let t=()=>this.updateOverflowMenu(!1);this.services.events.addEventListener(tt.Toolbar.SHOW_OVERFLOW_MENU,()=>{this.renderOverflowMenu(),document.body.addEventListener("click",t)}),this.services.events.addEventListener(tt.Toolbar.HIDE_OVERFLOW_MENU,()=>{document.body.removeEventListener("click",t)})}render(t=!0){let e=this.getComponentContainer().attr("role","toolbar").attr("aria-label","chart toolbar");if(fM(this.getOptions(),"data","loading"))e.html(""),this.overflowMenu=null;else{this.overflowMenu||(this.overflowMenu=e.append("div").attr("class","cds--overflow-menu-options cds--overflow-menu--flip cds--overflow-menu-options cds--overflow-menu--flip").attr("tabindex",-1).html("<ul role='menu'></ul>"));let{buttonList:t,overflowMenuItemList:n}=this.getControlConfigs();n&&t.push(this.getOverflowButtonConfig());let i=e.selectAll("div.toolbar-control").data(t,t=>t.id);i.exit().remove();let r=i.enter().append("div").attr("class","toolbar-control cds--overflow-menu cds--overflow-menu"),o=this;r.merge(i).classed("disabled",t=>t.shouldBeDisabled()).attr("role","button").attr("aria-disabled",t=>t.shouldBeDisabled()).attr("aria-label",t=>t.title).html(t=>`
			<button
				class="cds--overflow-menu__trigger cds--overflow-menu__trigger"
				aria-haspopup="true" aria-expanded="false" id="${this.services.domUtils.generateElementIDString(`control-${mU(t.id)}`)}" aria-label="${mU(t.title)}">
				<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" class="cds--overflow-menu__icon cds--overflow-menu__icon" viewBox="0 0 32 32" aria-hidden="true">
					${mB(t.iconSVG.content)}
				</svg>
			</button>`).each(function(t,e){nr(this).select("svg").style("pointer-events","none").style("will-change","transform").style("width",void 0!==t.iconSVG.width?t.iconSVG.width:"20px").style("height",void 0!==t.iconSVG.height?t.iconSVG.height:"20px"),nr(this).select("button").on("mouseover focus",function(e){let n=nr(this);n.classed("hovered",!0),o.services.events.dispatchEvent(tt.Toolbar.SHOW_TOOLTIP,{event:e,hoveredElement:n,content:t.title,noWrap:!0,placements:["top","bottom"]})}).on("mouseout blur",function(){o.services.events.dispatchEvent(tt.Toolbar.HIDE_TOOLTIP)}).on("click",e=>{t.shouldBeDisabled()||o.triggerFunctionAndEvent(t,e,this)}).on("keydown",n=>{n.key&&"Enter"===n.key||" "===n.key?(n.preventDefault(),o.triggerFunctionAndEvent(t,n,this)):n.key&&"ArrowLeft"===n.key?o.focusOnPreviousEnabledToolbarItem(e):n.key&&"ArrowRight"===n.key&&o.focusOnNextEnabledToolbarItem(e)})}),this.overflowButton=this.getComponentContainer().select(`button.cds--overflow-menu__trigger#${this.services.domUtils.generateElementIDString("control-toolbar-overflow-menu")}`)}}renderOverflowMenu(){let{overflowMenuItemList:t}=this.getControlConfigs(),e=this.overflowMenu.select("ul").selectAll("li.cds--overflow-menu-options__option").data(t,t=>fM(t,"id"));e.exit().remove();let n=e.enter().append("li").attr("id",t=>this.services.domUtils.generateElementIDString(`control-${t.id}`)).attr("class","cds--overflow-menu-options__option cds--overflow-menu-options__option").attr("role","menuitem").attr("tabindex",1);n.append("button").attr("class","cds--overflow-menu-options__btn cds--overflow-menu-options__btn"),n.merge(e).classed("cds--overflow-menu-options__option--disabled",t=>t.shouldBeDisabled()).classed("cds--overflow-menu-options__option--disabled",t=>t.shouldBeDisabled()).attr("aria-disabled",t=>t.shouldBeDisabled()).selectAll("button").text(t=>t.title)}isOverflowMenuOpen(){return this.overflowMenu.classed("is-open")}updateOverflowMenu(t){this.overflowMenu&&(this.overflowMenu.classed("is-open",t),this.overflowButton&&(this.overflowButton.attr("aria-expanded",t),nr(this.overflowButton.node().parentNode).classed("cds--overflow-menu--open",t).classed("cds--overflow-menu--open",t)),t?this.services.events.dispatchEvent(tt.Toolbar.SHOW_OVERFLOW_MENU):this.services.events.dispatchEvent(tt.Toolbar.HIDE_OVERFLOW_MENU))}focusOnPreviousEnabledToolbarItem(t){let e=this.getToolbarButtonItems(),n=e.length;for(let i=t-1;i>=0;i--)if(!e[i].shouldBeDisabled()){n=i;break}if(n<e.length){let t=nr(`button#${this.services.domUtils.generateElementIDString(`control-${e[n].id}`)}`).node();"focus"in t&&t.focus()}}focusOnNextEnabledToolbarItem(t){let e=this.getToolbarButtonItems(),n=-1;for(let i=t+1;i<e.length;i++)if(!e[i].shouldBeDisabled()){n=i;break}if(n>-1){let t=nr(`button#${this.services.domUtils.generateElementIDString(`control-${e[n].id}`)}`).node();"focus"in t&&t.focus()}}focusOnPreviousEnabledMenuItem(t){let e=this.getOverflowMenuItems(),n=e.length;for(let i=t-1;i>=0;i--)if(!e[i].shouldBeDisabled()){n=i;break}if(n<e.length){let t=nr(`#${this.services.domUtils.generateElementIDString(`control-${e[n].id}`)} button`).node();"focus"in t&&t.focus()}}focusOnNextEnabledMenuItem(t){let e=this.getOverflowMenuItems(),n=-1;for(let i=t+1;i<e.length;i++)if(!e[i].shouldBeDisabled()){n=i;break}if(n>-1){let t=nr(`#${this.services.domUtils.generateElementIDString(`control-${e[n].id}`)} button`).node();"focus"in t&&t.focus()}}toggleOverflowMenu(t){if(this.isOverflowMenuOpen())this.updateOverflowMenu(!1);else{this.updateOverflowMenu(!0);let e=this;this.getOverflowMenuItems().forEach((n,i)=>{let r=nr(`#${this.services.domUtils.generateElementIDString(`control-${n.id}`)}`);null!==r&&(r.on("click",()=>{e.triggerFunctionAndEvent(n,t,r.node()),e.updateOverflowMenu(!1)}),r.on("keydown",o=>{o&&"Enter"===o.key?e.triggerFunctionAndEvent(n,t,r.node()):o&&"ArrowUp"===o.key?e.focusOnPreviousEnabledMenuItem(i):o&&"ArrowDown"===o.key?e.focusOnNextEnabledMenuItem(i):o&&"Escape"===o.key&&e.updateOverflowMenu(!1),o.preventDefault()}))}),e.focusOnNextEnabledMenuItem(-1)}t&&t.stopImmediatePropagation()}triggerFunctionAndEvent(t,e,n){"function"==typeof t.shouldBeDisabled&&t.shouldBeDisabled()||("function"==typeof t.clickFunction&&t.clickFunction(e),this.services.events.dispatchEvent(tt.Toolbar.BUTTON_CLICK,{control:t,event:e,element:n}))}getControlConfigs(){let e=fM(this.getOptions(),"toolbar","numberOfIcons")-1,n=fM(this.getOptions(),"toolbar","controls"),i=[],r=[],o=[];return n.forEach(n=>{let a=null;if(n.type===tS.CUSTOM)null===fM(n,"id")&&(n.id=`toolbar-button-${t.buttonID++}`),null===fM(n,"shouldBeDisabled")&&(n.shouldBeDisabled=()=>!1),a=n;else{let t=this.services.domUtils.isFullScreenMode();n.type===tS.MAKE_FULLSCREEN&&t?n.type=tS.EXIT_FULLSCREEN:n.type!==tS.EXIT_FULLSCREEN||t||(n.type=tS.MAKE_FULLSCREEN),a=this.getControlConfigByType(n.type)}a&&(a.text=n.text?n.text:n.type,-1!==a.id.indexOf("toolbar-export")?i.push(a):r.length<e?null===fM(a,"iconSVG","content")?o.push(a):r.push(a):o.push(a))}),o.push(...i),o.length?{buttonList:r,overflowMenuItemList:o}:{buttonList:r}}getToolbarButtonItems(){let{buttonList:t,overflowMenuItemList:e}=this.getControlConfigs();return e&&t.push(this.getOverflowButtonConfig()),t||[]}getOverflowMenuItems(){let{overflowMenuItemList:t}=this.getControlConfigs();return t||[]}getOverflowButtonConfig(){let{moreOptions:t}=fM(this.model.getOptions(),"locale","translations","toolbar");return{id:"toolbar-overflow-menu",title:t,shouldBeDisabled:()=>!1,iconSVG:{content:`<circle cx="16" cy="8" r="2"></circle>
				<circle cx="16" cy="16" r="2"></circle>
				<circle cx="16" cy="24" r="2"></circle>`},clickFunction:t=>this.toggleOverflowMenu(t)}}getControlConfigByType(t){let e;let n=this.services.zoom&&this.services.zoom.isZoomBarEnabled()&&!this.services.zoom.isEmptyState(),i=this.model.getDisplayData(),r=this.model.getOptions(),{exportAsCSV:o,exportAsJPG:a,exportAsPNG:s,zoomIn:l,zoomOut:u,resetZoom:c,makeFullScreen:h,exitFullScreen:d,showAsTable:f}=fM(r,"locale","translations","toolbar");switch(t){case tS.ZOOM_IN:n&&(e={id:"toolbar-zoomIn",title:l,shouldBeDisabled:()=>this.services.zoom.isMinZoomDomain(),iconSVG:{content:this.getControlIconByType(t)},clickFunction:()=>this.services.zoom.zoomIn()});break;case tS.ZOOM_OUT:n&&(e={id:"toolbar-zoomOut",title:u,shouldBeDisabled:()=>this.services.zoom.isMaxZoomDomain(),iconSVG:{content:this.getControlIconByType(t)},clickFunction:()=>this.services.zoom.zoomOut()});break;case tS.RESET_ZOOM:n&&(e={id:"toolbar-resetZoom",title:c,shouldBeDisabled:()=>this.services.zoom.isMaxZoomDomain(),iconSVG:{content:this.getControlIconByType(t)},clickFunction:()=>this.services.zoom.resetZoomDomain()});break;case tS.MAKE_FULLSCREEN:e={id:"toolbar-makefullscreen",iconSVG:{content:this.getControlIconByType(t),width:"15px",height:"15px"},title:h,shouldBeDisabled:()=>!1,clickFunction:()=>{this.services.domUtils.toggleFullscreen()}};break;case tS.EXIT_FULLSCREEN:e={id:"toolbar-exitfullscreen",iconSVG:{content:this.getControlIconByType(t),width:"15px",height:"15px"},title:d,shouldBeDisabled:()=>!1,clickFunction:()=>{this.services.domUtils.toggleFullscreen()}};break;case tS.SHOW_AS_DATATABLE:e={id:"toolbar-showasdatatable",iconSVG:{content:this.getControlIconByType(t)},title:f,shouldBeDisabled:()=>0===i.length,clickFunction:()=>this.services.events.dispatchEvent(tt.Modal.SHOW)};break;case tS.EXPORT_CSV:e={id:"toolbar-export-CSV",title:o,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(t)},clickFunction:()=>this.model.exportToCSV()};break;case tS.EXPORT_PNG:e={id:"toolbar-export-PNG",title:s,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(t)},clickFunction:()=>this.services.domUtils.exportToPNG()};break;case tS.EXPORT_JPG:e={id:"toolbar-export-JPG",title:a,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(t)},clickFunction:()=>this.services.domUtils.exportToJPG()};break;default:throw Error("Not supported toolbar control type: "+t)}return e}getControlIconByType(t){switch(t){case tS.ZOOM_IN:return`<polygon points="19 13 15 13 15 9 13 9 13 13 9 13 9 15 13 15 13 19 15 19 15 15 19 15 19 13"/>
						<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>`;case tS.ZOOM_OUT:return`<rect x="9" y="13" width="10" height="2"/>
						<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>`;case tS.RESET_ZOOM:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case tS.MAKE_FULLSCREEN:return'<polygon points="21 2 21 4 26.59 4 17 13.58 18.41 15 28 5.41 28 11 30 11 30 2 21 2"/><polygon points="15 18.42 13.59 17 4 26.59 4 21 2 21 2 30 11 30 11 28 5.41 28 15 18.42"/>';case tS.EXIT_FULLSCREEN:return'<polygon points="4 18 4 20 10.586 20 2 28.582 3.414 30 12 21.414 12 28 14 28 14 18 4 18"/><polygon points="30 3.416 28.592 2 20 10.586 20 4 18 4 18 14 28 14 28 12 21.414 12 30 3.416"/>';case tS.SHOW_AS_DATATABLE:return'<rect x="4" y="6" width="18" height="2"/><rect x="4" y="12" width="18" height="2"/><rect x="4" y="18" width="18" height="2"/><rect x="4" y="24" width="18" height="2"/><rect x="26" y="6" width="2" height="2"/><rect x="26" y="12" width="2" height="2"/><rect x="26" y="18" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/>';case tS.EXPORT_CSV:case tS.EXPORT_JPG:case tS.EXPORT_PNG:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';default:throw Error("Not supported toolbar control type: "+t)}}};mF.buttonID=0;let mj=class t extends gq{constructor(e,n,i,r){super(e,n,r),this.type="layout",this.configs=r,this.children=i,this._instanceID=t.instanceID++,this.init()}init(){this.children.forEach(t=>{t.components.forEach(t=>{t.init()})})}getPreferedAndFixedSizeSum(){let t=this.parent,e=0;return t.selectAll(`div.layout-child-${this._instanceID}`).filter(t=>{let e=fM(t,"growth");return e===tp.PREFERRED||e===tp.FIXED}).each(function(t){e+=t.size}),e}getNumOfStretchChildren(){return this.parent.selectAll(`div.layout-child-${this._instanceID}`).filter(t=>fM(t,"growth")===tp.STRETCH).size()}render(t=!0){let e=this.parent,{width:n,height:i}=gu.getHTMLElementSize(e.node()),r=this.configs.direction===tf.ROW||this.configs.direction===tf.ROW_REVERSE,o=fM(this.model.getOptions(),"style","prefix"),a=e.classed(`cds--${o}--layout-row`,this.configs.direction===tf.ROW).classed(`cds--${o}--layout-row-reverse`,this.configs.direction===tf.ROW_REVERSE).classed(`cds--${o}--layout-column`,this.configs.direction===tf.COLUMN).classed(`cds--${o}--layout-column-reverse`,this.configs.direction===tf.COLUMN_REVERSE).classed(`cds--${o}--layout-alignitems-center`,this.configs.alignItems===tg.CENTER).selectAll(`div.layout-child-${this._instanceID}`).data(this.children,t=>t.id);a.enter().append("div").merge(e.selectAll(`div.layout-child-${this._instanceID}`)).attr("class",t=>`layout-child layout-child-${this._instanceID} ${t.id}`).each(function(e){e.components.forEach(n=>{let i=nr(this),r=fM(e,"renderType")===te.SVG;n.setParent(r?gu.appendOrSelect(i,"svg.layout-svg-wrapper").attr("width","100%").attr("height","100%"):i);let o=fM(e,"growth");(o===tp.PREFERRED||o===tp.FIXED)&&n.render(t)})}),e.selectAll(`div.layout-child-${this._instanceID}`).style("height",null).style("width",null).each(function(t){let e=fM(t,"growth"),o=fM(t,"renderType")===te.SVG?gu.getSVGElementSize(nr(this).select("svg.layout-svg-wrapper"),{useBBox:!0}):gu.getHTMLElementSize(this);if(e===tp.PREFERRED){let e=r?o.width:o.height,a=r?n:i;t.size=e/a*100}}),a.exit().remove(),this.children.filter(t=>fM(t,"growth")===tp.STRETCH).forEach(t=>{t.size=(100-+this.getPreferedAndFixedSizeSum())/+this.getNumOfStretchChildren()});let s=e.selectAll(`div.layout-child-${this._instanceID}`).data(this.children,t=>t.id);r?s.style("width",t=>`${t.size/100*n}px`).style("height","100%"):s.style("height",t=>`${t.size/100*i}px`).style("width","100%"),s.each(function(e){e.components.forEach(n=>{fM(e,"growth")===tp.STRETCH&&n.render(t)})})}setModel(t){super.setModel(t),this.children.forEach(e=>{e.components.forEach(e=>e.setModel(t))})}setServices(t){super.setServices(t),this.children.forEach(e=>{e.components.forEach(e=>e.setServices(t))})}destroy(){this.children.forEach(t=>{t.components.forEach(t=>t.destroy())})}};mj.instanceID=Math.floor(99999999999*Math.random());class mH extends gq{constructor(){super(...arguments),this.type="spacer"}render(t=!1){this.getComponentContainer().style("width",`${this.configs.size||dW.default.size}px`).style("height",`${this.configs.size||dW.default.size}px`).attr("opacity",0)}}var m$={prefix:"bx",selectorTabbable:`
    a[href], area[href], input:not([disabled]):not([tabindex='-1']),
    button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']),
    textarea:not([disabled]):not([tabindex='-1']),
    iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]
  `,selectorFocusable:`
    a[href], area[href], input:not([disabled]),
    button:not([disabled]),select:not([disabled]),
    textarea:not([disabled]),
    iframe, object, embed, *[tabindex], *[contenteditable=true]
  `};function mz(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function mG(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function mV(t){return(mV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mW(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function mY(t,e){return(mY=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mZ(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mq(t){return(mq=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mX(t){return(mX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mK(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function mQ(){return(mQ="u">typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m0(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function mJ(t,e){return(mJ=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m0(t){return(m0=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m1(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.addEventListener.apply(t,n),{release:function(){return t.removeEventListener.apply(t,n),null}}}function m2(t){return(m2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m3(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function m5(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function m4(t,e){return(m4=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m6(t){return(m6=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m8(t,e){var n=t.target,i=t.currentTarget;if("function"==typeof n.matches){if(n.matches(e))return n;if(n.matches("".concat(e," *"))){var r=n.closest(e);if((i.nodeType===Node.DOCUMENT_NODE?i.documentElement:i).contains(r))return r}}}function m7(t){if(!t||"function"==typeof t)return{launchingElement:null,launchingEvent:null};var e=t.delegateTarget||t.currentTarget||t,n=t.currentTarget&&t;if(e&&!e.nodeType)throw TypeError("DOM Node should be given for launching element.");if(n&&!n.type)throw TypeError("DOM event should be given for launching event.");return{launchingElement:e,launchingEvent:n}}function m9(t){return(m9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ye(t,e){return(ye=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yn(t){return(yn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yi(t){return(yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yr(t,e){return(yr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yo(t){return(yo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ya(t){return(ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ys(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function yl(t,e){return(yl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yu(t){return(yu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yl(t,e)}(o,t);var e,n,i,r=(e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var t,n=yu(o);if(e){var i=yu(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===ya(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,o),(n=r.call(this,t,e))._handleFocusinListener=void 0,n._handleKeydownListener=void 0,n._handleFocusin=function(t){var e=n.element.querySelector(n.options.selectorModalContainer)||n.element;n.element.classList.contains(n.options.classVisible)&&!e.contains(t.target)&&n.options.selectorsFloatingMenus.every(function(e){return!m8(t,e)})&&n.element.querySelector(m$.selectorTabbable).focus()},n._hookCloseActions(),n}return n=[{key:"createdByLauncher",value:function(t){this.show(t)}},{key:"shouldStateBeChanged",value:function(t){return"shown"===t?!this.element.classList.contains(this.options.classVisible):this.element.classList.contains(this.options.classVisible)}},{key:"_changeState",value:function(t,e,n){var i,r=this;if(this._handleFocusinListener&&(this._handleFocusinListener=this.unmanage(this._handleFocusinListener).release()),"shown"===t){var o="onfocusin"in this.element.ownerDocument.defaultView,a=o?"focusin":"focus";this._handleFocusinListener=this.manage(m1(this.element.ownerDocument,a,this._handleFocusin,!o))}"hidden"===t?(this.element.classList.toggle(this.options.classVisible,!1),this.element.ownerDocument.body.classList.toggle(this.options.classBody,!1),(this.options.selectorFocusOnClose||this.previouslyFocusedNode)&&(this.element.ownerDocument.querySelector(this.options.selectorFocusOnClose)||this.previouslyFocusedNode).focus()):"shown"===t&&(this.element.classList.toggle(this.options.classVisible,!0),this.element.ownerDocument.body.classList.toggle(this.options.classBody,!0)),i=this.manage(m1(this.element,"transitionend",function(){i&&(i=r.unmanage(i).release()),"shown"===t&&r.element.offsetWidth>0&&r.element.offsetHeight>0&&(r.previouslyFocusedNode=r.element.ownerDocument.activeElement,(r.element.querySelector(r.options.selectorPrimaryFocus)||r.element.querySelector(m$.selectorTabbable)).focus()),n()}))}},{key:"_hookCloseActions",value:function(){var t=this;this.manage(m1(this.element,"click",function(e){var n=m8(e,t.options.selectorModalClose);n&&(e.delegateTarget=n),(n||e.target===t.element)&&t.hide(e)})),this._handleKeydownListener&&(this._handleKeydownListener=this.unmanage(this._handleKeydownListener).release()),this._handleKeydownListener=this.manage(m1(this.element.ownerDocument.body,"keydown",function(e){27===e.which&&t.shouldStateBeChanged("hidden")&&(e.stopPropagation(),t.hide(e))}))}}],i=[{key:"options",get:function(){var t=m$.prefix;return{selectorInit:"[data-modal]",selectorModalClose:"[data-modal-close]",selectorPrimaryFocus:"[data-modal-primary-focus]",selectorsFloatingMenus:[".".concat(t,"--overflow-menu-options"),".".concat(t,"--tooltip"),".flatpickr-calendar"],selectorModalContainer:".".concat(t,"--modal-container"),classVisible:"is-visible",classBody:"".concat(t,"--body--with-modal-open"),attribInitTarget:"data-modal-target",initEventNames:["click"],eventBeforeShown:"modal-beingshown",eventAfterShown:"modal-shown",eventBeforeHidden:"modal-beinghidden",eventAfterHidden:"modal-hidden"}}}],n&&ys(o.prototype,n),i&&ys(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o.components=new WeakMap,o}(function(){for(var t,e,n,i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];return(function t(e){return e.reduce(function(e,n){var i;return Array.isArray(n)?e.push.apply(e,function(t){if(Array.isArray(t))return mG(t)}(i=t(n))||function(t){if("u">typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(i)||function(t,e){if(t){if("string"==typeof t)return mG(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mG(t,e)}}(i)||function(){throw TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()):e.push(n),e},[])})(r).reduce(function(t,e){return e(t)},(t=function t(){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,t)},e&&mz(t.prototype,e),n&&mz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t))}(function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mY(t,e)}(o,t);var e,n,i,r=(e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var t,n=mq(o);if(e){var i=mq(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===mV(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return mZ(t)}(this,t)});function o(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,t,n)).children=[],!t||t.nodeType!==Node.ELEMENT_NODE)throw TypeError("DOM element should be given to initialize this widget.");return e.element=t,e.options=Object.assign(Object.create(e.constructor.options),n),e.constructor.components.set(e.element,mZ(e)),e}return n=[{key:"release",value:function(){for(var t=this.children.pop();t;t=this.children.pop())t.release();return this.constructor.components.delete(this.element),null}}],i=[{key:"create",value:function(t,e){return this.components.get(t)||new this(t,e)}}],n&&mW(o.prototype,n),i&&mW(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(t)},function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yr(t,e)}(r,t);var e,n,i=(e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var t,n=yo(r);if(e){var i=yo(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===yi(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function r(){return function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,r),i.apply(this,arguments)}return n=[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object.assign(Object.create(this.options),n);if(!e||e.nodeType!==Node.ELEMENT_NODE&&e.nodeType!==Node.DOCUMENT_NODE)throw TypeError("DOM document or DOM element should be given to search for and initialize this widget.");if(e.nodeType===Node.ELEMENT_NODE&&e.matches(i.selectorInit))this.create(e,n);else{var r=i.initEventNames.map(function(r){return m1(e,r,function(e){var r=m8(e,"[".concat(i.attribInitTarget,"]"));if(r){e.delegateTarget=r;var o=r.ownerDocument.querySelectorAll(r.getAttribute(i.attribInitTarget));if(o.length>1)throw Error("Target widget must be unique.");if(1===o.length){"A"===r.tagName&&e.preventDefault();var a=t.create(o[0],n);"function"==typeof a.createdByLauncher&&a.createdByLauncher(e)}}})});return{release:function(){for(var t=r.pop();t;t=r.pop())t.release()}}}return""}}],function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r.forLazyInit=!0,r}(t)},[function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m4(t,e)}(o,t);var e,n,i,r=(e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var t,n=m6(o);if(e){var i=m6(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===m2(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function o(){return function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return n=[{key:"_changeState",value:function(){throw Error("_changeState() should be overridden to perform actual change in state.")}},{key:"changeState",value:function(){for(var t=this,e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var r="string"==typeof n[0]?n.shift():void 0,o=Object(n[0])===n[0]&&"function"!=typeof n[0]?n.shift():void 0,a="function"==typeof n[0]?n.shift():void 0;if("function"==typeof this.shouldStateBeChanged&&!this.shouldStateBeChanged(r,o)){a&&a(null,!0);return}var s={group:o&&o.group,state:r},l=[s.group,r].filter(Boolean).join("-").split("-").map(function(t){return t[0].toUpperCase()+t.substr(1)}).join(""),u=new CustomEvent(this.options["eventBefore".concat(l)],{bubbles:!0,cancelable:!0,detail:o}),c=o&&o.delegatorNode||this.element;if(c.dispatchEvent(u)){var h=[r,o].filter(Boolean);this._changeState.apply(this,((function(t){if(Array.isArray(t))return m3(t)})(h)||function(t){if("u">typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(h)||function(t,e){if(t){if("string"==typeof t)return m3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m3(t,e)}}(h)||function(){throw TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()).concat([function(){c.dispatchEvent(new CustomEvent(t.options["eventAfter".concat(l)],{bubbles:!0,cancelable:!0,detail:o})),a&&a()}]))}else if(a){var d=Error("Changing state (".concat(JSON.stringify(s),") has been canceled."));d.canceled=!0,a(d)}}}],m5(o.prototype,n),i&&m5(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(t)},function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ye(t,e)}(o,t);var e,n,i,r=(e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var t,n=yn(o);if(e){var i=yn(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===m9(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function o(){return function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return n=[{key:"show",value:function(t,e){t&&"function"!=typeof t||(e=t),this.changeState("shown",m7(t),e)}},{key:"hide",value:function(t,e){t&&"function"!=typeof t||(e=t),this.changeState("hidden",m7(t),e)}}],yt(o.prototype,n),i&&yt(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(t)}],function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mJ(t,e)}(o,t);var e,n,i,r=(e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var t,n=m0(o);if(e){var i=m0(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===mX(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function o(){var t;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return(t=r.call.apply(r,[this].concat(n))).handles=new Set,t}return n=[{key:"manage",value:function(t){return this.handles.add(t),t}},{key:"unmanage",value:function(t){return this.handles.delete(t),t}},{key:"release",value:function(){var t=this;return this.handles.forEach(function(e){e.release(),t.handles.delete(e)}),mQ(m0(o.prototype),"release",this).call(this)}}],mK(o.prototype,n),i&&mK(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(t)}));class yh extends gq{constructor(t,e,n){super(t,e,n),this.type="modal",this.isEventListenerAdded=!1,this.handleShowModal=()=>{let t=this.services.domUtils.getChartID();this.modal.attr("data-modal",!0).attr("class","cds--modal").attr("role","dialog").attr("aria-modal",!0).attr("aria-labelledby",`${t}__modal-title`).attr("aria-describedby",`${t}__modal-description`).attr("tabindex",-1),this.modal.html(this.getModalHTML()),this.modal.select("div.cds--modal-footer button.cds--btn").on("click",()=>this.model.exportToCSV()),yc.create(this.modal.node()).show(),document.addEventListener("modal-hidden",this.handleHideModal)},this.handleHideModal=()=>{this.modal.attr("role",null).attr("aria-modal",null).attr("aria-labelledby",null).attr("aria-describedby",null).attr("tabindex",null),document.removeEventListener("modal-hidden",this.handleHideModal)},this.init()}addEventListeners(){this.services.events.addEventListener(tt.Modal.SHOW,this.handleShowModal)}removeEventListeners(){this.services.events.removeEventListener(tt.Modal.SHOW,this.handleShowModal)}getModalHTML(){let t=this.services.domUtils.getChartID(),e=this.model.getOptions(),{title:n,downloadAsCSV:i}=fM(e,"locale","translations","tabularRep"),r=fM(e,"style","prefix"),o=this.model.getTabularDataArray();return`
		<div class="cds--modal-container">
			<div class="cds--modal-header">

				<p class="cds--modal-header__label cds--type-delta" id="modal-title">${n}</p>

				<p class="cds--modal-header__heading cds--type-beta" id="${t}__modal-description">${mU(e.title)}</p>

				<button class="cds--modal-close" type="button" data-modal-close aria-label="close modal"  data-modal-primary-focus>
					<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" aria-label="Close" width="20" height="20" viewBox="0 0 32 32" role="img" class="cds--modal-close__icon">
						<path d="M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4 14.6 16 8 22.6 9.4 24 16 17.4 22.6 24 24 22.6 17.4 16 24 9.4z"></path>
					</svg>
				</button>
			</div>

			<div class="cds--modal-content">
				<table class="cds--data-table cds--data-table--no-border">
					<thead>
						<tr>
							${h_(o,0).map(t=>`<th scope="col">
								<div class="cds--table-header-label">${mU(t)}</div>
							</th>`).join("")}
						</tr>
					</thead>

					<tbody>${o.slice(1).map(t=>`
							<tr>
								${t.map(t=>`<td>${mU(t)}</td>`).join("")}
							</tr>`).join("")}
					</tbody>
				</table>
			</div>

			<div class="cds--modal-footer">
			  <div class="cds--${r}-modal-footer-spacer"></div>
			  <button class="cds--btn cds--btn--primary" type="button" data-modal-primary-focus>${i}</button>
			</div>
		</div>`}render(t=!1){let e=this.model.getOptions();if(!this.isEventListenerAdded){let t=nr(this.services.domUtils.getHolder()),n=fM(e,"style","prefix");this.modal=gu.appendOrSelect(t,`div.cds--${n}--modal`),this.addEventListeners(),this.isEventListenerAdded=!0}}destroy(){this.removeEventListeners(),this.isEventListenerAdded=!1}}class yd extends gq{constructor(){super(...arguments),this.type="title",this.renderType=te.HTML}render(t=!1){let e=this.getComponentContainer(),n=fM(this.getOptions(),"title"),i=e.selectAll("p.title").data([n]);if(i.enter().append("p").classed("title",!0).attr("role","heading").attr("aria-level",2).merge(i).html(t=>mU(t)),i.node()&&i.node().offsetWidth<i.node().scrollWidth){let t=this;i.on("mouseover",function(e){t.services.events.dispatchEvent(tt.Tooltip.SHOW,{event:e,hoveredElement:i,content:i.text()})}).on("mousemove",function(e){t.services.events.dispatchEvent(tt.Tooltip.MOVE,{event:e})}).on("mouseout",function(){t.services.events.dispatchEvent(tt.Tooltip.HIDE)})}i.exit().remove()}truncateTitle(t,e){if(e<=0)return;let n=t.text();if(t.node().getComputedTextLength()>e){t.append("tspan").text("...");let i=gu.appendOrSelect(t,"tspan").node().getComputedTextLength(),r=t.text(),o=this.getSubstringIndex(t.node(),0,r.length-1,e-i);t.html(r.substring(0,o-1)).append("tspan").text("...");let a=this;t.on("mouseover",function(e){a.services.events.dispatchEvent(tt.Tooltip.SHOW,{event:e,hoveredElement:t,content:n})}).on("mousemove",function(t){a.services.events.dispatchEvent(tt.Tooltip.MOVE,{event:t})}).on("mouseout",function(){a.services.events.dispatchEvent(tt.Tooltip.HIDE)})}}getMaxTitleWidth(){return gu.getSVGElementSize(this.parent.node(),{useAttrs:!0}).width}getSubstringIndex(t,e,n,i){let r=Math.floor((n+e)/2);return t.getSubStringLength(0,r)>i?this.getSubstringIndex(t,e,r,i):t.getSubStringLength(0,r)<i?t.getSubStringLength(0,r+1)>i?r:this.getSubstringIndex(t,r,n,i):r}}class yf extends gq{constructor(){super(...arguments),this.type="legend",this.renderType=te.HTML}render(t=!1){let e=this.getOptions(),n=fM(e,"legend"),i=fM(n,"alignment"),r=fM(e,"legend","orientation"),o=this.model.getDataGroups(),{DISABLED:a}=dz.items.status,s=o.some(t=>t.status===a),l=fM(n,"order"),u=this.getComponentContainer().classed("center-aligned",i===tc.CENTER).classed("right-aligned",i===tc.RIGHT).classed(r,!0).classed("has-deactivated-items",s).attr("role",pn.GROUP).attr("aria-label","Data groups").attr("data-name","legend-items");l&&(o=this.sortDataGroups(o,l));let c=u.selectAll("div.legend-item").data(o,t=>t.name),h=c.enter().append("div").attr("class","legend-item");h.merge(u.selectAll("div.legend-item")).classed("active",function(t){return t.status===dz.items.status.ACTIVE});let d=fM(this.getOptions(),"legend","clickable");u.classed("clickable",d&&o.length>1);let f=dz.checkbox.radius,p=h.append("div").classed("checkbox",!0),g=p.merge(c.select("div.checkbox")).attr("role",pn.CHECKBOX).attr("tabindex",d?0:-1).attr("aria-labelledby",(t,e)=>this.services.domUtils.generateElementIDString(`legend-datagroup-${e}-title`)).attr("aria-checked",({status:t})=>t===dz.items.status.ACTIVE).attr("width",2*f).attr("height",2*f).attr("class",t=>this.model.getColorClassName({classNameTypes:[ti.BACKGROUND],dataGroupName:t.name,originalClassName:"checkbox"})).style("background",t=>t.status===dz.items.status.ACTIVE?this.model.getFillColor(t.name)||this.model.getStrokeColor(t.name):null).classed("active",function(t){return t.status===dz.items.status.ACTIVE});p.append("svg").attr("focusable",!1).attr("preserveAspectRatio","xMidYMid meet").attr("xmlns","http://www.w3.org/2000/svg").attr("width","11").attr("height","11").attr("viewBox","0 0 31 28").attr("aria-hidden",!0).style("will-change","transform").append("path").attr("d","M13 21.2l-7.1-7.1-1.4 1.4 7.1 7.1L13 24 27.1 9.9l-1.4-1.5z"),h.append("p").merge(c.select("p"));let m=fM(e,"legend","additionalItems");if(m&&o.length){let t=this,e=u.selectAll("div.additional-item").data(m);e.exit().remove();let n=e.enter().append("div").merge(e).classed("legend-item",!0).classed("additional",!0).attr("aria-labelledby",(t,e)=>this.services.domUtils.generateElementIDString(`legend-datagroup-${g.size()+e}-title`));n.selectAll("*").remove();let i,r=1;n.append("svg").classed("icon",!0).each(function(e){let n=nr(this);i&&i==e.type?r++:(i=e.type,r=1),t.addAdditionalItem(n,e,r)}),n.append("p").merge(n.select("p")),this.truncateLegendText()}c.exit().on("mouseover",null).on("click",null).on("mouseout",null).remove(),d&&h.size()>1&&this.addEventListeners()}sortDataGroups(t,e){if(t.sort((t,n)=>e.indexOf(t.name)-e.indexOf(n.name)),e.length<t.length){let n=t.length-e.length;return t.slice(n).concat(t.slice(0,n))}return t}addAdditionalItem(t,e,n){let{width:i,height:r}=dz.area;if(e.type===tM.RADIUS?t.style("width",`${r}px`).style("height",`${r}px`):t.style("width",`${i}px`).style("height",`${r}px`),e.type===tM.RADIUS){let{iconData:n,fill:i,stroke:r}=dz.radius;t.attr("fill","none").selectAll("circle").data(n).enter().append("circle").classed("radius",!0).attr("role",pn.IMG).attr("aria-label","radius").attr("cx",t=>t.cx).attr("cy",t=>t.cy).attr("r",t=>t.r).style("fill",e.fill?e.fill:i).style("stroke",e.stroke?e.stroke:r)}else if(e.type===tM.LINE){let r=dz.line;t.select("line.line").empty()&&t.append("line").classed(`line-${n}`,!0).attr("role",pn.IMG).attr("aria-label","line").attr("x1",0).attr("y1",r.yPosition).attr("x2",i).attr("y2",r.yPosition).style("stroke",e.stroke?e.stroke:r.stroke).style("stroke-width",r.strokeWidth)}else if(e.type===tM.AREA)t.select("rect.area").empty()&&t.append("rect").classed(`area-${n}`,!0).attr("role",pn.IMG).attr("aria-label","area").attr("width",i).attr("height",r).style("fill",n>3&&!e.fill?dz.area.fill:e.fill).style("stroke",e.stroke);else if(e.type===tM.SIZE){let{iconData:n,fill:i,stroke:r}=dz.size;t.attr("fill","none").attr("role",pn.IMG).attr("aria-label","size").selectAll("rect").data(n).enter().append("rect").classed("size",!0).attr("width",t=>t.width).attr("height",t=>t.height).attr("y",()=>0).style("fill",e.fill?e.fill:i).style("stroke",e.stroke?e.stroke:r).style("stroke-width",1)}else if(e.type===tM.QUARTILE){let{iconData:e}=dz.quartile;t.selectAll("rect").attr("role",pn.IMG).attr("aria-label","quartile").data(e).enter().append("rect").attr("class",(t,e)=>`quartile-${0===e?"wrapper":"line"}`).attr("x",t=>t.x).attr("y",t=>t.y).attr("width",t=>t.width).attr("height",t=>t.height)}else if(e.type===tM.ZOOM){let{iconData:n,color:i}=fM(dz,"zoom"),r=t.attr("role",pn.IMG).attr("aria-label","zoom").selectAll("g.icon").data(n).enter();r.append("g").attr("x",t=>t.x).attr("y",t=>t.y).attr("width",t=>t.width).attr("height",t=>t.height).append("polygon").attr("points","7.7 4.82 5.78 4.82 5.78 2.89 4.82 2.89 4.82 4.82 2.89 4.82 2.89 5.78 4.82 5.78 4.82 7.7 5.78 7.7 5.78 5.78 7.7 5.78 7.7 4.82").attr("fill",()=>e.color?e.color:i),r.append("path").attr("d","M9.36,8.67A5.22,5.22,0,0,0,10.59,5.3,5.3,5.3,0,1,0,5.3,10.59,5.22,5.22,0,0,0,8.67,9.36L12.32,13l.68-.68Zm-4.06,1A4.34,4.34,0,1,1,9.63,5.3,4.33,4.33,0,0,1,5.3,9.63Z").attr("fill",()=>e.color?e.color:i)}}truncateLegendText(){let t=this.getComponentContainer(),e=fM(this.getOptions(),"legend","truncation"),n=fM(e,"type"),i=fM(e,"threshold"),r=fM(e,"numCharacter"),o=t.selectAll("div.legend-item p");o.attr("id",function(){return(this.parentNode.querySelector("div.checkbox")||this.parentNode).getAttribute("aria-labelledby")}),n!==ta.NONE?o.html(function(t){let e=mU(t.name);return e.length>i&&e.length!==r?fS(e,n,r):e}):o.html(t=>mU(t.name))}addEventListeners(){let t=this,e=this.getComponentContainer(),n=this.getOptions(),i=fM(n,"legend"),r=fM(i,"truncation");e.selectAll("div.legend-item").on("mouseover",function(e){t.services.events.dispatchEvent(tt.Legend.ITEM_HOVER,{hoveredElement:nr(this)});let n=nr(this);n.select("div.checkbox").classed("hovered",!0);let i=n.datum();i.name.length>r.threshold&&r.numCharacter<i.name.length&&r.type!==ta.NONE&&t.services.events.dispatchEvent(tt.Tooltip.SHOW,{event:e,hoveredElement:n,content:i.name})}).on("mousemove",function(e){nr(this).datum().name.length>r.threshold&&r.type!==ta.NONE&&t.services.events.dispatchEvent(tt.Tooltip.MOVE,{event:e})}).on("click",function(){t.services.events.dispatchEvent(tt.Legend.ITEM_CLICK,{clickedElement:nr(this)});let e=nr(this).datum();t.model.toggleDataLabel(e.name)}).on("mouseout",function(){let e=nr(this);e.select("div.checkbox").classed("hovered",!1),e.datum().name.length>r.threshold&&r.type!==ta.NONE&&t.services.events.dispatchEvent(tt.Tooltip.HIDE),t.services.events.dispatchEvent(tt.Legend.ITEM_MOUSEOUT,{hoveredElement:e})}),e.selectAll("div.legend-item div.checkbox").on("keyup",function(e){e.key&&"Tab"===e.key&&t.services.events.dispatchEvent(tt.Legend.ITEM_HOVER,{hoveredElement:nr(this)})}),e.selectAll("div.legend-item div.checkbox").on("keydown",function(e,n){e.key&&" "===e.key?(e.preventDefault(),t.model.toggleDataLabel(n.name)):e.key&&"Tab"===e.key&&t.services.events.dispatchEvent(tt.Legend.ITEM_MOUSEOUT,{hoveredElement:nr(this)})}),e.selectAll("g.additional-item").on("mouseover",function(e){let n=nr(this),i=n.datum();i.name.length>r.threshold&&t.services.events.dispatchEvent(tt.Tooltip.SHOW,{event:e,hoveredElement:n,content:i.name})})}}class yp extends gq{constructor(t,e,n){super(t,e,n),this.type="chart-clip",this.renderType=te.SVG,this.chartClipId="chart-clip-id-"+Math.floor(99999999999*Math.random()),this.init()}init(){this.model.set({chartClipId:this.chartClipId},{skipUpdate:!0})}render(t=!0){this.createClipPath()}createClipPath(){let t=this.parent,{cartesianScales:e}=this.services;if(!e)throw Error("Service cartesianScales was undefined");let n=e.getMainXScale(),i=e.getMainYScale(),[r,o]=n.range(),[a,s]=i.range();if(!t)throw Error("svg is undefined");this.chartClipPath=gu.appendOrSelect(t,`clipPath.${this.type}`).attr("id",this.chartClipId);let l=gu.appendOrSelect(this.chartClipPath,`rect.${this.type}`);o-r>0&&l.attr("x",r).attr("y",s).attr("width",o-r).attr("height",a-s),this.chartClipPath.merge(l).lower()}}class yg extends yp{constructor(){super(...arguments),this.type="canvas-chart-clip",this.chartClipId="canvas-chart-clip-id-"+Math.floor(99999999999*Math.random())}createClipPath(){let t=this.parent,{width:e,height:n}=gu.getSVGElementSize(this.parent,{useAttrs:!0});this.chartClipPath=gu.appendOrSelect(t,`clipPath.${this.type}`).attr("id",this.chartClipId);let i=gu.appendOrSelect(this.chartClipPath,`rect.${this.type}`);i.attr("x",0).attr("y",0).attr("width",e).attr("height",n),this.chartClipPath.merge(i).lower()}}(y=x||(x={})).LEFT="left",y.RIGHT="right",y.TOP="top",y.BOTTOM="bottom";var ym=((_={})[x.LEFT]=function(t,e,n){return{top:t.top-Math.round(e.offsetHeight/2)+Math.round(n.height/2),left:Math.round(t.left-e.offsetWidth)}},_[x.RIGHT]=function(t,e,n){return{top:t.top-Math.round(e.offsetHeight/2)+Math.round(n.height/2),left:Math.round(t.left+n.width)}},_[x.TOP]=function(t,e,n){return{top:Math.round(t.top-e.offsetHeight),left:t.left-Math.round(e.offsetWidth/2)+Math.round(n.width/2)}},_[x.BOTTOM]=function(t,e,n){return{top:Math.round(t.top+n.height),left:t.left-Math.round(e.offsetWidth/2)+Math.round(n.width/2)}},_),yy="u">typeof window?window:{innerHeight:0,scrollY:0,innerWidth:0,scrollX:0},yv=function(){function t(t){void 0===t&&(t={}),this.positions=ym,this.positions=Object.assign({},ym,t)}return t.prototype.getRelativeOffset=function(t){for(var e={left:t.offsetLeft,top:t.offsetTop};t.offsetParent&&"static"===getComputedStyle(t.offsetParent).position;)e.left+=t.offsetLeft,e.top+=t.offsetTop,t=t.offsetParent;return e},t.prototype.getAbsoluteOffset=function(t){for(var e=t,n={top:0,left:0};e.offsetParent;){var i=getComputedStyle(e.offsetParent);"static"===i.position&&i.marginLeft&&i.marginTop&&(parseInt(i.marginTop,10)&&(n.top+=parseInt(i.marginTop,10)),parseInt(i.marginLeft,10)&&(n.left+=parseInt(i.marginLeft,10))),e=e.offsetParent}var r=t.getBoundingClientRect(),o=document.body.getBoundingClientRect();return{top:r.top-o.top+n.top,left:r.left-o.left+n.left}},t.prototype.findRelative=function(t,e,n){var i=this.getRelativeOffset(t),r=t.getBoundingClientRect();return this.calculatePosition(i,r,e,n)},t.prototype.findAbsolute=function(t,e,n){var i=this.getAbsoluteOffset(t),r=t.getBoundingClientRect();return this.calculatePosition(i,r,e,n)},t.prototype.findPosition=function(t,e,n,i){void 0===i&&(i=this.getAbsoluteOffset.bind(this));var r=i(t),o=t.getBoundingClientRect();return this.calculatePosition(r,o,e,n)},t.prototype.findPositionAt=function(t,e,n){return this.calculatePosition(t,{top:0,left:0,height:0,width:0},e,n)},t.prototype.getPlacementBox=function(t,e){var n=t.offsetHeight+e.top,i=t.offsetWidth+e.left;return{top:e.top,bottom:n,left:e.left,right:i}},t.prototype.addOffset=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),Object.assign({},t,{top:t.top+e,left:t.left+n})},t.prototype.setElement=function(t,e){t.style.top=e.top+"px",t.style.left=e.left+"px"},t.prototype.findBestPlacement=function(t,e,n,i,r){var o=this;void 0===i&&(i=this.defaultContainerFunction.bind(this)),void 0===r&&(r=this.findPosition.bind(this));var a=n.map(function(n){var a=r(t,e,n),s=o.getPlacementBox(e,a),l=0,u=0,c=i();s.top<c.top?l=c.top-s.top:s.bottom>c.height&&(l=s.bottom-c.height),s.left<c.left?u=c.left-s.left:s.right>c.width&&(u=s.right-c.width),l&&!u?u=1:u&&!l&&(l=1);var h=e.offsetHeight*e.offsetWidth;return{placement:n,weight:(h-l*u)/h}});return a.sort(function(t,e){return e.weight-t.weight}),a[0].placement},t.prototype.findBestPlacementAt=function(t,e,n,i){var r=this;return void 0===i&&(i=this.defaultContainerFunction.bind(this)),this.findBestPlacement(null,e,n,i,function(e,n,i){return r.findPositionAt(t,n,i)})},t.prototype.defaultContainerFunction=function(){return{top:0,left:0,height:yy.innerHeight,width:yy.innerWidth}},t.prototype.calculatePosition=function(t,e,n,i){return this.positions[i]?this.positions[i](t,n,e):(console.error("No function found for placement, defaulting to 0,0"),{left:0,top:0})},t}();new yv;class yb extends gq{constructor(t,e,n){super(t,e,n),this.type="tooltip",this.renderType=te.HTML,this.isEventListenerAdded=!1,this.lastTriggeredEventType="",this.positionService=new yv,this.handleShowTooltip=t=>{let e;let n=t.detail.data||t.detail.items,i=this.formatItems(this.getItems(t));e=t.detail.content?`<div class="title-tooltip"><p>${mI(t.detail.content)}</p></div>`:mI(this.getTooltipHTML(i));let r=gu.appendOrSelect(this.tooltip,"div.content-box");if(fM(this.getOptions(),"tooltip","customHTML")){if(t.detail.content){let e=`<div class="title-tooltip"><p>${mI(t.detail.content)}</p></div>`;r.html(e)}else r.html(`<div class="title-tooltip"><p>${mI(this.model.getOptions().tooltip.customHTML(n,e))}</p></div>`)}else r.html(e);r.selectAll(".datapoint-tooltip").each(function(t,e){let n=i[e];i[e]&&i[e].color&&nr(this).select(".tooltip-color").attr("class","tooltip-color").style("background-color",n.color)}),this.positionTooltip(t),this.tooltip.classed("hidden",!1).attr("aria-hidden",!1),this.lastTriggeredEventType=t.type},this.handleHideTooltip=()=>{this.tooltip.classed("hidden",!0).attr("aria-hidden",!0)},this.init()}addTooltipEventListener(){this.services.events.addEventListener(tt.Tooltip.MOVE,t=>{this.lastTriggeredEventType!==tt.Toolbar.SHOW_TOOLTIP&&!1===this.tooltip.classed("hidden")&&this.positionTooltip(t)}),this.services.events.addEventListener(tt.Tooltip.SHOW,this.handleShowTooltip),this.services.events.addEventListener(tt.Tooltip.HIDE,this.handleHideTooltip),this.services.events.addEventListener(tt.Chart.MOUSEOUT,this.handleHideTooltip),this.services.events.addEventListener(tt.Toolbar.SHOW_TOOLTIP,this.handleShowTooltip),this.services.events.addEventListener(tt.Toolbar.HIDE_TOOLTIP,this.handleHideTooltip)}removeTooltipEventListener(){this.services.events.removeEventListener(tt.Tooltip.MOVE,null),this.services.events.removeEventListener(tt.Tooltip.SHOW,this.handleShowTooltip),this.services.events.removeEventListener(tt.Tooltip.HIDE,this.handleHideTooltip),this.services.events.removeEventListener(tt.Chart.MOUSEOUT,this.handleHideTooltip),this.services.events.removeEventListener(tt.Toolbar.SHOW_TOOLTIP,this.handleShowTooltip),this.services.events.removeEventListener(tt.Toolbar.HIDE_TOOLTIP,this.handleHideTooltip)}getItems(t){return t.detail.items?t.detail.items:[]}formatItems(t){let e=this.getOptions(),n=fM(e,"tooltip","truncation","type"),i=fM(e,"tooltip","truncation","threshold"),r=fM(e,"tooltip","truncation","numCharacter");return n!==ta.NONE?t.map(t=>{let e=t.labelIcon?12:0;return t.value=t.value?this.valueFormatter(t.value,t.label):t.value,t.label&&t.label.length+e>i&&(t.label=fS(t.label,n,r)),t.value&&t.value.length>i&&(t.value=fS(t.value,n,r)),t}):t.map(t=>(t.value=t.value?this.valueFormatter(t.value,t.label):t.value,t))}getTooltipHTML(t){return'<ul class="multi-tooltip">'+t.map(t=>`<li>
					<div class="datapoint-tooltip${t.bold?" bold":""}">
						${t.class||t.color?`<div class="tooltip-color ${t.class}"></div>`:""}
						<div class="label">
						<p>${t.label||""}</p>
						${t.labelIcon?`<span class="label-icon"/>${t.labelIcon}</span>`:""}
						</div>
						${void 0===t.value||null===t.value?"":`<p class="value"/>${t.value}</p>`}
					</div>
				</li>`).join("")+"</ul>"}valueFormatter(t,e){let n=this.getOptions(),i=fM(n,"tooltip","valueFormatter"),{code:r,number:o,date:a}=fM(n,"locale");if(i)return i(t,e);if("function"==typeof t.getTime)return a(t,r,{month:"short",day:"numeric",year:"numeric"});try{if("string"==typeof t&&/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(t)){let e=new Date(t);return a(e,r,{month:"short",day:"numeric",year:"numeric"})}}catch{}return o(t,r)}render(t=!1){let e=this.getOptions(),n=fM(e,"tooltip","enabled");if(n){let t=nr(this.services.domUtils.getHolder()),n=fM(e,"style","prefix");this.tooltip=gu.appendOrSelect(t,`div.cds--${n}--tooltip`),this.tooltip.style("max-width",null).attr("role","tooltip"),this.isEventListenerAdded||(this.addTooltipEventListener(),this.isEventListenerAdded=!0),this.tooltip.classed("hidden",!0)}else!n&&this.isEventListenerAdded&&(this.removeTooltipEventListener(),this.isEventListenerAdded=!1)}addOffsetByPlacement(t,e,n){let i=Object.assign({},t);return e==x.LEFT?i.left-=n:e==x.RIGHT?i.left+=n:e==x.TOP?i.top-=n:e==x.BOTTOM&&(i.top+=n),i}positionTooltip(t){let e=this.services.domUtils.getHolder(),n=e.offsetWidth,i=e.offsetHeight,r=this.tooltip.node(),o=this.getOptions(),a=fM(o,"zoomBar","top","enabled"),s=!!fM(t,"detail","noWrap"),l=Array.isArray(fM(t,"detail","placements")),u=l?fM(t,"detail","placements"):[x.RIGHT,x.LEFT,x.TOP,x.BOTTOM],c,{horizontalOffset:h,defaultOffset:d}=dY;if(this.tooltip.select("div.title-tooltip").classed("title-tooltip-nowrap",s),l){let e=fM(t,"detail","event","target"),o=this.services.domUtils.getElementOffset(e,!0);c=this.positionService.findBestPlacementAt(o,r,u,()=>({top:0,left:0,width:n,height:i}));let a=this.positionService.findPosition(e,r,c,()=>this.services.domUtils.getElementOffset(e));a=this.addOffsetByPlacement(a,c,d),this.positionService.setElement(r,a);return}let f=fM(t,"detail","mousePosition");if(f){let t=fM(o,"zoomBar","top","type"),e=dq.height[t];a&&(f[1]+=e+dq.spacerHeight)}else f=no(fM(t,"detail","event"),e);(c=f[0]/n>.9?x.LEFT:f[0]/n<.1?x.RIGHT:this.positionService.findBestPlacementAt({left:f[0],top:f[1]},r,u,()=>({top:void 0,left:void 0,width:n,height:i})))===x.LEFT&&(h*=-1);let p=this.positionService.findPositionAt({left:f[0]+h,top:f[1]},r,c);this.positionService.setElement(r,p)}}let y_=class t extends gq{constructor(){super(...arguments),this.type="grid-brush",this.renderType=te.SVG,this.selectionSelector="rect.selection",this.frontSelectionSelector="rect.frontSelection"}render(e=!0){let n=this.parent,i=this.getComponentContainer();if(!n)throw Error("SVG was not defined");let r=gu.appendOrSelect(n,"svg.chart-grid-backdrop"),o=gu.appendOrSelect(r,`g.${this.type}`),a=gu.appendOrSelect(o,this.selectionSelector),{width:s,height:l}=gu.getSVGElementSize(r,{useAttrs:!0}),{cartesianScales:u}=this.services,c=u.getMainXScaleType(),h=u.getMainXScale(),[d]=h.range();i.attr("transform",`translate(${d},0)`);let f=gu.appendOrSelect(i,this.frontSelectionSelector);if(h&&c===tl.TIME){let e,n=this.model.get("zoomDomain");void 0===n&&(n=this.services.zoom.getDefaultZoomBarDomain())&&this.model.set({zoomDomain:n},{animate:!1});let i=e=>{let n=e[1]-e[0],i="0,"+n.toString(),r=Math.floor(l/t.DASH_LENGTH),o=r*t.DASH_LENGTH;for(let e=0;e<r;e++)i+=","+t.DASH_LENGTH;i+=","+(l-o),r%2==1&&(i+=",0"),i+=","+n.toString()+","+l.toString(),f.attr("stroke-dasharray",i)},u=(t,e)=>{let i=lw().range([0,s]).domain(n),r=[i.invert(t),i.invert(e)];r[0].valueOf()===r[1].valueOf()&&(r=this.services.zoom.getDefaultZoomBarDomain()),(n[0].valueOf()!==r[0].valueOf()||n[1].valueOf()!==r[1].valueOf())&&this.services.zoom.handleDomainChange(r)};0!=l&&0!=s&&(e=oe(rJ).extent([[0,0],[s-1,l]]).on("start brush end",t=>{let e=t.selection;null===e||e[0]===e[1]||(f.attr("x",parseFloat(a.attr("x"))+parseFloat(r.attr("x"))).attr("y",a.attr("y")).attr("width",a.attr("width")).attr("height",a.attr("height")).style("cursor","pointer").style("display",null),i(e))}).on("end.brushed",t=>{let n=t.selection;null!==n&&(u(n[0],n[1]),o.call(e.move,null),f.style("display","none"))}),o.call(e));let c=this.services.zoom.getZoomRatio();r.on("click",function(t){if(t.shiftKey){let t=this.services.domUtils.getHolder(),e=no(o.node(),t)[0],n=e-s*c/2;n<0&&(n=0);let i=e+s*c/2;i>s&&(i=s),u(n,i)}})}}};y_.DASH_LENGTH=4;class yx extends gq{constructor(){super(...arguments),this.type="zoom-bar",this.renderType=te.SVG,this.MIN_SELECTION_DIFF=9e-10,this.brushSelector="g.zoom-bar-brush",this.clipId="zoomBarClip-"+Math.floor(99999999999*Math.random()),this.brush=oe(rJ),this.highlightStrokeWidth=1}init(){this.services.events.addEventListener(tt.ZoomBar.UPDATE,this.render.bind(this));let t=fM(this.getOptions(),"zoomBar",tr.TOP,"data");this.model.setZoomBarData(t)}render(t=!0){let e=this.getComponentContainer(),n=this.services.zoom.isZoomBarLoading(tr.TOP),i=this.services.zoom.isZoomBarLocked(tr.TOP),r=fM(this.getOptions(),"zoomBar",tr.TOP,"type"),o=fM(this.getOptions(),"axes",tr.BOTTOM,"highlights"),a=dq.height[r],{width:s}=gu.getSVGElementSize(this.parent,{useAttrs:!0});if(0===s)return;let l=0,u=this.model.get("axesMargins");u&&u.left&&(l=u.left);let c=gu.appendOrSelect(e,"svg.zoom-container").attr("width","100%").attr("height",a).attr("opacity",1);if(gu.appendOrSelect(e,"rect.zoom-spacer").attr("x",0).attr("y",a).attr("width","100%").attr("height",dq.spacerHeight).attr("opacity",1).attr("fill","none"),r===to.GRAPH_VIEW?gu.appendOrSelect(c,"rect.zoom-bg").attr("x",l).attr("y",0).attr("width",s-l).attr("height","100%").classed("zoom-bg-skeleton",n).style("stroke",n?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null):r===to.SLIDER_VIEW&&gu.appendOrSelect(c,"rect.zoom-slider-bg").attr("x",l).attr("y",a/2-1).attr("width",s-l).attr("height",2).classed("zoom-slider-bg-skeleton",n).style("stroke",n?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null),n){this.renderSkeleton(c,l,s);return}let{cartesianScales:h}=this.services,d=h.getMainXScale(),f=h.getMainYScale(),p=h.getMainXScaleType();if(d&&p===tl.TIME){let t=this.services.zoom.getZoomBarData();if(function(t){if(null==t)return!0;if(cR(t)&&(u4(t)||"string"==typeof t||"function"==typeof t.splice||cG(t)||cQ(t)||cF(t)))return!t.length;var e=h5(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(cN(t))return!c5(t).length;for(var n in t)if(dN.call(t,n))return!1;return!0}(t)||1===t.length)return;this.xScale=d.copy(),this.yScale=f.copy();let n=this.services.zoom.getDefaultZoomBarDomain(t);t=this.compensateDataForDefaultDomain(t,n);let u=this.model.get("initialZoomDomain"),h=fM(this.getOptions(),"zoomBar",tr.TOP,"initialZoomDomain");h&&h[0]&&h[1]&&(h[0]=new Date(h[0]),h[1]=new Date(h[1])),h&&!(u&&u[0].valueOf()===h[0].valueOf()&&u[1].valueOf()===h[1].valueOf())?this.model.set({initialZoomDomain:dP([],h),zoomDomain:h?dP([],h):n},{skipUpdate:!0}):null===h&&null!==u&&this.model.set({initialZoomDomain:null,zoomDomain:dP([],n)},{skipUpdate:!0}),this.xScale.range([l,s]).domain(n),this.maxSelectionRange=this.xScale.range(),this.yScale.range([0,a-6]).domain(tU(t,t=>t.value));let p=this.model.get("zoomDomain");if(r===to.GRAPH_VIEW&&(this.renderZoomBarArea(c,"path.zoom-graph-area-unselected",t,null),this.updateClipPath(e,this.clipId,0,0,0,0),this.renderZoomBarArea(c,"path.zoom-graph-area",t,this.clipId),this.renderZoomBarBaseline(c,l,s),o)){let t=o.highlightStartMapsTo,e=o.highlightEndMapsTo,n=o.color,i=o.labelMapsTo;o.data.forEach((r,o)=>{gu.appendOrSelect(c,`rect.highlight-${o}`).attr("height",a-2*this.highlightStrokeWidth).attr("y",this.highlightStrokeWidth).attr("x",this.xScale(r[t])).attr("width",this.xScale(r[e])-this.xScale(r[t])).style("fill",n&&n.scale[r[i]]?n.scale[r[i]]:null).style("fill-opacity",.1).style("stroke",n&&n.scale[r[i]]?n.scale[r[i]]:null).style("stroke-dasharray","2, 2").attr("stroke-width","1px")})}this.addBrushEventListener(p,l,s);let g=gu.appendOrSelect(e,this.brushSelector).call(this.brush);if(void 0!==p){if(p[0].valueOf()===p[1].valueOf())g.call(this.brush.move,this.xScale.range()),this.updateBrushHandle(this.getComponentContainer(),this.xScale.range());else{let t=p.map(t=>this.xScale(t));t[1]-t[0]<this.MIN_SELECTION_DIFF||(g.call(this.brush.move,t),this.updateBrushHandle(this.getComponentContainer(),t))}}i&&(this.brush.filter(()=>!1),g.selectAll("rect").attr("cursor","auto"))}}addBrushEventListener(t,e,n){let i=fM(this.getOptions(),"zoomBar",tr.TOP,"type"),r=dq.height[i];this.brush.extent([[e,0],[n,r]]).on("start brush end",null).on("start brush end",e=>{let n=e.selection;null===n?this.handleBrushedEvent(e,t,this.xScale,this.xScale.range()):n[0]===n[1]||this.handleBrushedEvent(e,t,this.xScale,n)})}handleBrushedEvent(t,e,n,i){let r=[n.invert(i[0]),n.invert(i[1])];if(this.updateBrushHandle(this.getComponentContainer(),i),null!=t.sourceEvent&&("mousemove"===t.sourceEvent.type||"mouseup"===t.sourceEvent.type||"mousedown"===t.sourceEvent.type||"touchstart"===t.sourceEvent.type||"touchmove"===t.sourceEvent.type||"touchend"===t.sourceEvent.type)){let n;(void 0===e||e[0]!==r[0]||e[1]!==r[1])&&this.services.zoom.handleDomainChange(r,{dispatchEvent:!1}),"start"===t.type?n=tt.ZoomBar.SELECTION_START:"brush"===t.type?n=tt.ZoomBar.SELECTION_IN_PROGRESS:"end"===t.type&&(n=tt.ZoomBar.SELECTION_END,this.services.events.dispatchEvent(tt.ZoomDomain.CHANGE,{newDomain:r})),this.services.events.dispatchEvent(n,{selection:i,newDomain:r})}}updateBrushHandle(t,e){let n=this,i=dq.handleWidth,r=fM(this.getOptions(),"zoomBar",tr.TOP,"type"),o=dq.height[r],a=-i/2,s=dq.handleBarWidth,l=r===to.GRAPH_VIEW?dq.handleBarHeight:6,u=-s/2,c=(o-l)/2;t.select(this.brushSelector).selectAll("rect.handle").data([{type:"w"},{type:"e"}]).attr("x",function(t){return"w"===t.type?Math.max(e[0]+a,n.maxSelectionRange[0]):"e"===t.type?Math.min(e[1]+a,n.maxSelectionRange[1]-i):void 0}).attr("y",0).attr("width",i).attr("height",o).attr("cursor","ew-resize").style("display",null);let h=t.select(this.brushSelector).selectAll("rect.handle-bar").data([{type:"w"},{type:"e"}]);h.enter().append("rect").attr("class",function(t){return"handle-bar handle-bar--"+t.type}),h.attr("x",function(t){return"w"===t.type?Math.max(e[0]+u,n.maxSelectionRange[0]-a+u):"e"===t.type?Math.min(e[1]+u,n.maxSelectionRange[1]+a+u):void 0}).attr("y",c).attr("width",s).attr("height",l).attr("cursor","ew-resize"),r===to.SLIDER_VIEW&&this.updateSliderSelectedArea(e),this.updateClipPath(t,this.clipId,e[0],0,e[1]-e[0],o)}updateSliderSelectedArea(t){let e=fM(this.getOptions(),"zoomBar",tr.TOP,"type"),n=dq.height[e],i=this.getComponentContainer().select("svg.zoom-container");gu.appendOrSelect(i,"rect.zoom-slider-selected-area").attr("x",t[0]).attr("y",n/2-1).attr("width",t[1]-t[0]).attr("height",2)}renderZoomBarArea(t,e,n,i){let{cartesianScales:r}=this.services,o=r.getMainXAxisPosition(),a=r.getMainYAxisPosition(),s=r.getMainXScaleType(),l=r.getMainYScaleType(),u=(t,e,n)=>i=>r.getValueFromScale(t,e,n,i),c=u(this.xScale,s,o),h=u(this.yScale,l,a),d=fM(this.getOptions(),"zoomBar",tr.TOP,"type"),f=dq.height[d],p=(function(t,e,n){var i=null,r=lT(!0),o=null,a=lW,s=null,l=lI(u);function u(u){var c,h,d,f,p,g=(u=lG(u)).length,m=!1,y=Array(g),v=Array(g);for(null==o&&(s=a(p=l())),c=0;c<=g;++c){if(!(c<g&&r(f=u[c],c,u))===m){if(m=!m)h=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),d=c-1;d>=h;--d)s.point(y[d],v[d]);s.lineEnd(),s.areaEnd()}}m&&(y[c]=+t(f,c,u),v[c]=+e(f,c,u),s.point(i?+i(f,c,u):y[c],n?+n(f,c,u):v[c]))}if(p)return s=null,p+""||null}function c(){return lq().defined(r).curve(a).context(o)}return t="function"==typeof t?t:void 0===t?lY:lT(+t),e="function"==typeof e?e:lT(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?lZ:lT(+n),u.x=function(e){return arguments.length?(t="function"==typeof e?e:lT(+e),i=null,u):t},u.x0=function(e){return arguments.length?(t="function"==typeof e?e:lT(+e),u):t},u.x1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:lT(+t),u):i},u.y=function(t){return arguments.length?(e="function"==typeof t?t:lT(+t),n=null,u):e},u.y0=function(t){return arguments.length?(e="function"==typeof t?t:lT(+t),u):e},u.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:lT(+t),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(i).y(e)},u.defined=function(t){return arguments.length?(r="function"==typeof t?t:lT(!!t),u):r},u.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),u):a},u.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),u):o},u})().x(t=>c(t)).y0(f).y1(t=>f-h(t)),g=gu.appendOrSelect(t,e).datum(n).attr("d",p);i&&g.attr("clip-path",`url(#${i})`)}updateClipPath(t,e,n,i,r,o){let a=gu.appendOrSelect(t,"clipPath").attr("id",e);gu.appendOrSelect(a,"rect").attr("x",n).attr("y",i).attr("width",r).attr("height",o)}compensateDataForDefaultDomain(t,e){if(!t||t.length<2)return;let n=dd(t),i=this.services.cartesianScales.getDomainIdentifier(),r=this.services.cartesianScales.getRangeIdentifier();if(Number(e[0])<Number(n[0][i])){let t={};t[i]=e[0],t[r]=0,n.unshift(t)}if(Number(e[1])>Number(n[n.length-1][i])){let t={};t[i]=e[1],t[r]=0,n.push(t)}return n}renderZoomBarBaseline(t,e,n,i=!1){let r=fM(this.model.getOptions(),"zoomBar",tr.TOP,"type"),o=dq.height[r],a=lq()([[e,o],[n,o]]);gu.appendOrSelect(t,"path.zoom-bg-baseline").attr("d",a).classed("zoom-bg-baseline-skeleton",i).style("stroke",i?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}renderSkeleton(t,e,n){this.renderZoomBarArea(t,"path.zoom-graph-area-unselected",[],null),this.renderZoomBarArea(t,"path.zoom-graph-area",[],this.clipId),this.brush.on("start brush end",null),gu.appendOrSelect(this.getComponentContainer(),this.brushSelector).html(null),fM(this.getOptions(),"zoomBar",tr.TOP,"type")===to.GRAPH_VIEW&&this.renderZoomBarBaseline(t,e,n,!0)}destroy(){this.brush.on("start brush end",null),this.services.events.removeEventListener(tt.ZoomBar.UPDATE,this.render.bind(this))}}class yE extends gq{constructor(t,e){super(t,e),this.type="threshold",this.renderType=te.SVG,this.positionService=new yv}render(t=!1){let e=fM(this.getOptions(),"axes"),n=[];Object.keys(e).forEach(t=>{if(Object.values(tr).includes(t)){let i=e[t];i.thresholds&&i.thresholds.length>0&&n.push({axisPosition:t,thresholds:i.thresholds,correspondingDatasets:null==i?void 0:i.correspondingDatasets,mapsTo:null==i?void 0:i.mapsTo})}});let i=this.getComponentContainer({withinChartClip:!0}).selectAll("g.axis-thresholds").data(n,t=>t.axisPosition);i.exit().attr("opacity",0).remove();let r=i.enter().append("g").merge(i);r.attr("class",t=>`axis-thresholds ${t.axisPosition}`);let o=r.selectAll("g.threshold-group").data(t=>t.thresholds.map(e=>(e.axisPosition=t.axisPosition,e.datum=this.constructDatumObj(t,e),e)));o.exit().attr("opacity",0).remove();let a=o.enter().append("g");a.append("line").attr("class","threshold-line"),a.append("rect").attr("class","threshold-hoverable-area"),a.merge(o).attr("class","threshold-group");let s=this;r.each(function({axisPosition:e}){let n=s.services.cartesianScales.getScaleByPosition(e),i=s.services.cartesianScales.getScaleTypeByPosition(e),r=null,o=null;e===tr.LEFT||e===tr.RIGHT?(o=n,r=s.services.cartesianScales.getMainXScale()):(r=n,o=s.services.cartesianScales.getMainYScale());let a=i===tl.LABELS,[l,u]=r.range(),[c,h]=o.range(),{cartesianScales:d}=s.services,f=d.getOrientation(),[p,g]=fD(t=>d.getDomainValue(t),t=>d.getRangeValue(t),f),m=nr(this);e===tr.TOP||e===tr.BOTTOM?(m.selectAll("line.threshold-line").transition().call(e=>s.services.transitions.setupTransition({transition:e,name:"threshold-line-update",animate:t})).attr("y1",h).attr("y2",c).attr("x1",({datum:t})=>p(t)+(a?n.step()/2:0)).attr("x2",({datum:t})=>p(t)+(a?n.step()/2:0)).style("stroke",({fillColor:t})=>t),m.selectAll("rect.threshold-hoverable-area").attr("x",0).attr("y",({datum:t})=>-p(t)).attr("width",Math.abs(c-h)).classed("rotate",!0)):(m.selectAll("line.threshold-line").transition().call(e=>s.services.transitions.setupTransition({transition:e,name:"threshold-line-update",animate:t})).attr("x1",l).attr("x2",u).attr("y1",({datum:t})=>g(t)+(a?n.step()/2:0)).attr("y2",({datum:t})=>g(t)+(a?n.step()/2:0)).style("stroke",({fillColor:t})=>t),m.selectAll("rect.threshold-hoverable-area").attr("x",l).attr("y",({datum:t})=>g(t)).attr("width",Math.abs(u-l)).classed("rotate",!1))}),this.services.events.addEventListener(tt.Threshold.SHOW,t=>{this.setThresholdLabelPosition(t.detail),this.label.classed("hidden",!1)}),this.services.events.addEventListener(tt.Threshold.HIDE,()=>{this.label.classed("hidden",!0)}),this.appendThresholdLabel(),this.addEventListeners()}getFormattedValue(t){let{value:e,axisPosition:n}=t,i=this.getOptions(),r=this.services.cartesianScales.getScaleTypeByPosition(n),{code:o,number:a}=fM(i,"locale");if(r===tl.TIME){let t=[tr.LEFT,tr.RIGHT].includes(n),r=this.services.cartesianScales.getMainXScale(),o=this.services.cartesianScales.getMainYScale(),a=t?o:r,s=fM(i,"timeScale"),l=f7(a.ticks(),fM(s,"timeInterval"));return f6(e,0,a.ticks(),l,s,i.locale)}return a(e,o)}appendThresholdLabel(){let t=nr(this.services.domUtils.getHolder()),e=fM(this.getOptions(),"style","prefix");this.label=gu.appendOrSelect(t,`div.cds--${e}--threshold--label`).classed("hidden",!0)}setThresholdLabelPosition({event:t,datum:e}){let n=this.services.domUtils.getHolder(),i=no(t,n),r=e.valueFormatter?e.valueFormatter(e.value):this.getFormattedValue(e);this.label.html(mU(`${e.label||"Threshold"}: ${r}`)).style("background-color",e.fillColor);let o=this.label.node(),a=this.positionService.findBestPlacementAt({left:i[0],top:i[1]},o,[x.RIGHT,x.LEFT,x.TOP,x.BOTTOM],()=>({top:void 0,left:void 0,width:n.offsetWidth,height:n.offsetHeight})),s=this.positionService.findPositionAt({left:i[0],top:i[1]},o,a);this.positionService.setElement(o,s)}constructDatumObj(t,e){let n={};return t.correspondingDatasets&&(n.group=fM(t,"correspondingDatasets",0)),n[t.mapsTo]=e.value,n}addEventListeners(){let t=this;this.getComponentContainer({withinChartClip:!0}).selectAll("rect.threshold-hoverable-area").on("mouseover mousemove",function(e){nr(this.parentNode).select("line.threshold-line").classed("active",!0),t.services.events.dispatchEvent(tt.Threshold.SHOW,{event:e,hoveredElement:nr(this),datum:nr(this).datum()})}).on("mouseout",function(e){nr(this.parentNode).select("line.threshold-line").classed("active",!1),t.services.events.dispatchEvent(tt.Threshold.HIDE,{event:e,hoveredElement:nr(this),datum:nr(this).datum()})})}}class yw extends gq{constructor(t,e){super(t,e),this.type="highlight",this.renderType=te.SVG,this.positionService=new yv,this.highlightStrokeWidth=1}render(t=!1){let e=fM(this.getOptions(),"axes"),n=[];Object.keys(e).forEach(t=>{if(Object.values(tr).includes(t)){let i=e[t];i.highlights&&i.highlights.data.length>0&&n.push({axisPosition:t,highlightStartMapsTo:i.highlights.highlightStartMapsTo,highlightEndMapsTo:i.highlights.highlightEndMapsTo,labelMapsTo:i.highlights.labelMapsTo,highlight:i.highlights.data,color:i.highlights.color})}});let i=this.getComponentContainer({withinChartClip:!0}).selectAll("g.axis-highlight").data(n,t=>t.axisPosition);i.exit().attr("opacity",0).remove();let r=i.enter().append("g").merge(i);r.attr("class",t=>`axis-highlight ${t.axisPosition}`);let o=r.selectAll("g.highlight-group").data(t=>t.highlight.map(e=>(e.axisPosition=t.axisPosition,e.highlightStartMapsTo=t.highlightStartMapsTo,e.labelMapsTo=t.labelMapsTo,e.color=t.color,e.highlightEndMapsTo=t.highlightEndMapsTo,e)));o.exit().attr("opacity",0).remove();let a=o.enter().append("g");a.append("rect").attr("class","highlight-bar"),a.append("line").attr("class","highlight-line"),a.merge(o).attr("class","highlight-group");let s=this;r.each(function({axisPosition:e}){let n=s.services.cartesianScales.getMainXScale(),i=s.services.cartesianScales.getMainYScale(),[r,o]=n.range(),[a,l]=i.range(),{cartesianScales:u}=s.services,c=u.getOrientation(),[h,d]=fD(t=>u.getDomainValue(t),t=>u.getRangeValue(t),c),f=nr(this);e===tr.TOP||e===tr.BOTTOM?f.selectAll("rect.highlight-bar").transition().call(e=>s.services.transitions.setupTransition({transition:e,name:"highlight-bar-update",animate:t})).attr("y",Math.max(l+s.highlightStrokeWidth,0)).attr("height",Math.max(a-2*s.highlightStrokeWidth,0)).attr("x",({highlightStartMapsTo:t,...e})=>h(e[t])).attr("width",({highlightStartMapsTo:t,highlightEndMapsTo:e,...n})=>Math.max(h(n[e])-h(n[t]),0)).style("stroke",({color:t,labelMapsTo:e,...n})=>t&&t.scale[n[e]]?t.scale[n[e]]:null).style("stroke-dasharray","2, 2").attr("stroke-width",s.highlightStrokeWidth+"px").style("fill-opacity",.1).style("fill",({color:t,labelMapsTo:e,...n})=>t&&t.scale[n[e]]?t.scale[n[e]]:null):f.selectAll("rect.highlight-bar").transition().call(e=>s.services.transitions.setupTransition({transition:e,name:"highlight-bar-update",animate:t})).attr("x",r).attr("width",Math.max(o-r,0)).attr("y",({highlightEndMapsTo:t,...e})=>d(e[t])).attr("height",({highlightStartMapsTo:t,highlightEndMapsTo:e,...n})=>Math.max(d(n[t])-d(n[e]),0)).style("stroke",({color:t,labelMapsTo:e,...n})=>t&&t.scale[n[e]]?t.scale[n[e]]:null).style("stroke-dasharray","2, 2").attr("stroke-width",s.highlightStrokeWidth+"px").style("fill-opacity",.1).style("fill",({color:t,labelMapsTo:e,...n})=>t&&t.scale[n[e]]?t.scale[n[e]]:null)})}}class yT extends yb{getItems(t){let e;if(t.detail.items)return t.detail.items;let{data:n}=t.detail;if(!n||!n.length||!n[0])return[];let i=this.getOptions(),{cartesianScales:r}=this.services,o=r.getDomainIdentifier(),a=r.isDualAxes(),{groupMapsTo:s}=i.data,l=r.getDomainLabel(),u=r.getRangeLabel(),c=n[0][o];if(1===n.length){let o=n[0],h=r.getRangeIdentifier(o);if(a){let t=r.getRangeAxisPosition({datum:o,groups:[o[s]]});u=r.getScaleLabel(t)}let d=o[h];e=[{label:l,value:c},...Array.isArray(d)&&2===d.length?[{label:"Start",value:d[0]},{label:"End",value:d[1]}]:[{label:u,value:o[h]}]],t.detail.additionalItems&&t.detail.additionalItems.forEach(t=>e.push({label:t.label,value:t.value})),e.push({label:h_(i,"locale.translations.group")||h_(i,"tooltip.groupLabel"),value:o[s],color:this.model.getFillColor(o[s]),class:this.model.getColorClassName({classNameTypes:[ti.TOOLTIP],dataGroupName:o[s]})})}else if(n.length>1&&(e=(e=[{label:l,value:c}]).concat(n.map(t=>{let e=t[r.getRangeIdentifier(t)];return{label:t[s],value:Array.isArray(e)&&2===e.length?`${e[0]} - ${e[1]}`:e,color:this.model.getFillColor(t[s]),class:this.model.getColorClassName({classNameTypes:[ti.TOOLTIP],dataGroupName:t[s]})}}).sort((t,e)=>e.value-t.value)),!a&&!0===fM(i,"tooltip","showTotal"))){let t=r.getRangeIdentifier();e.push({label:h_(i,"locale.translations.total")||h_(i,"tooltip.totalLabel")||"Total",value:n.reduce((e,n)=>e+n[t],0),bold:!0})}return e}}class yS extends gq{constructor(){super(...arguments),this.type="grid",this.renderType=te.SVG}render(t=!0){let e=fM(this.getOptions(),"grid","x","enabled"),n=fM(this.getOptions(),"grid","y","enabled");this.drawBackdrop(e,n),!(!e&&!n)&&(e&&(gu.appendOrSelect(this.backdrop,"g.x.grid"),this.drawXGrid(t)),n&&(gu.appendOrSelect(this.backdrop,"g.y.grid"),this.drawYGrid(t)))}drawXGrid(t){let e=this.parent,n=this.backdrop.attr("height"),i=this.services.cartesianScales.getMainXScale(),r=t7(i).tickSizeInner(-n).tickSizeOuter(0);if(fM(this.getOptions(),"grid","x","alignWithAxisTicks")){let t=this.services.cartesianScales.getDomainAxisPosition(),e=fM(this.getOptions(),"axes",t,"ticks","values");e&&r.tickValues(e)}else{let t=fM(this.getOptions(),"grid","x","numberOfTicks");r.ticks(t)}let o=e.select(".x.grid").attr("transform",`translate(${-this.backdrop.attr("x")}, ${n})`);t?o.transition().call(e=>this.services.transitions.setupTransition({transition:e,name:"grid-update",animate:t})).call(r):o.call(r),this.cleanGrid(o)}drawYGrid(t){let e=this.parent,n=this.backdrop.attr("width"),i=this.services.cartesianScales.getMainYScale(),r=t9(i).tickSizeInner(-n).tickSizeOuter(0);if(fM(this.getOptions(),"grid","y","alignWithAxisTicks")){let t=this.services.cartesianScales.getRangeAxisPosition(),e=fM(this.getOptions(),"axes",t,"ticks","values");e&&r.tickValues(e)}else{let t=fM(this.getOptions(),"grid","y","numberOfTicks");r.ticks(t)}let o=e.select(".y.grid").attr("transform",`translate(0, ${-this.backdrop.attr("y")})`);t?o.transition().call(e=>this.services.transitions.setupTransition({transition:e,name:"grid-update",animate:t})).call(r):o.call(r),this.cleanGrid(o)}getGridlineThreshold(t){let e;let n=this.parent,i=n.selectAll(".x.grid .tick").nodes().sort((t,e)=>Number(fT(t).tx)-Number(fT(e).tx)),r=-1;if(!i.length)return;i.forEach(e=>{t[0]>=+fT(e).tx&&r++});let o=r+1<i.length?r+1:i.length,a=i[r],s=i[o];if(a){if(s)e=+fT(s).tx-+fT(a).tx;else{let t=n.select("rect.chart-grid-backdrop").node();e=gu.getSVGElementSize(t).width-+fT(a).tx}}else e=+fT(s).tx;let{threshold:l}=this.getOptions().tooltip.gridline;return e*l}getActiveGridline(t){let e=fM(this.getOptions,"tooltip","gridline","threshold"),n=e||this.getGridlineThreshold(t);return this.parent.selectAll(".x.grid .tick").filter(function(){let e=fT(this),i={min:Number(e.tx)-n,max:Number(e.tx)+n};return i.min<=t[0]&&t[0]<=i.max})}drawBackdrop(t,e){let n=this.parent,i=this.services.cartesianScales.getMainXScale(),r=this.services.cartesianScales.getMainYScale(),[o,a]=i.range(),[s,l]=r.range();this.backdrop=gu.appendOrSelect(n,"svg.chart-grid-backdrop");let u=gu.appendOrSelect(this.backdrop,t||e?"rect.chart-grid-backdrop.stroked":"rect.chart-grid-backdrop");this.backdrop.merge(u).attr("x",o).attr("y",l).attr("width",Math.abs(a-o)).attr("height",Math.abs(s-l)).lower(),u.attr("width","100%").attr("height","100%")}cleanGrid(t){t.selectAll("text").remove(),t.select(".domain").remove()}}class yO extends gq{constructor(t,e,n){super(t,e,n),this.type="axes",this.renderType=te.SVG,this.truncation={[tr.LEFT]:!1,[tr.RIGHT]:!1,[tr.TOP]:!1,[tr.BOTTOM]:!1},n&&(this.configs=n),this.margins=this.configs.margins}render(t=!0){let e,n,i,r,o;let{position:a}=this.configs,s=this.getOptions(),l=fM(s,"axes",a,"visible"),u=this.getComponentContainer(),{width:c,height:h}=gu.getSVGElementSize(u,{useAttrs:!0}),d=gu.appendOrSelect(u,`g.axis.${a}`);if(a===tr.BOTTOM||a===tr.TOP?(e=this.configs.axes[tr.LEFT]?this.margins.left:0,n=this.configs.axes[tr.RIGHT]?c-this.margins.right:c):(e=h-this.margins.bottom,n=this.margins.top),!this.services.cartesianScales)throw Error("Services cartesianScales undefined");let f=this.services.cartesianScales.getScaleByPosition(a);switch(this.scaleType===tl.LABELS||this.scaleType===tl.LABELS_RATIO?f.rangeRound([e,n]):f.range([e,n]),a){case tr.LEFT:i=t9;break;case tr.BOTTOM:i=t7;break;case tr.RIGHT:i=t8;break;case tr.TOP:i=t6}d.attr("aria-label",`${a} axis`);let p=!d.select("g.ticks").empty(),g=gu.appendOrSelect(d,"g.ticks");p||(g.attr("role",`${pn.GRAPHICS_OBJECT} ${pn.GROUP}`),g.attr("aria-label",`${a} ticks`));let m=gu.appendOrSelect(d,"g.ticks.invisible").style("opacity","0").style("pointer-events","none").attr("aria-hidden",!0).attr("aria-label",`invisible ${a} ticks`),y=fM(s,"axes",a),v=this.scaleType===tl.TIME||y.scaleType===tl.TIME,b=a===tr.LEFT||a===tr.RIGHT,_=this.model.get("zoomDomain");if(_&&v&&!b&&f.domain(_),!l){g.attr("aria-hidden",!0);return}let x=fM(y,"scaleType"),E=fM(s,"data","loading"),w=fM(y,"ticks","number"),T=fM(y,"ticks","values"),S=fM(y,"truncation","type"),O=fM(y,"truncation","threshold"),M=fM(y,"truncation","numCharacter"),A=null!==w,C=fM(s,"timeScale"),D=gu.appendOrSelect(m,"g.tick"),k=gu.appendOrSelect(D,"text").text("0"),R=gu.getSVGElementSize(k.node(),{useBBox:!0}).height;D.remove();let L=this.scaleType||y.scaleType||tl.LINEAR,N=i(f).tickSizeOuter(0);if(f.ticks){let t;if(A?t=w:(t=dj.ticks.number,b&&(t=this.getNumberOfFittingTicks(h,R,dj.ticks.verticalSpaceRatio))),1===f.ticks().length&&0===f.ticks()[0]&&(t=0),N.ticks(t),v){if(f.ticks(t).length){let e=fM(s,"timeScale","addSpaceOnEdges"),n=fM(s,"axes",a,"domain"),i=f.copy();e&&!n&&i.nice(t);let r=i.ticks(t);e&&r.length>2&&!n&&(r.splice(r.length-1,1),r.splice(0,1)),N.tickValues(r)}else N.tickValues([])}}let P=fM(y,"ticks","formatter"),{code:I,number:B}=fM(s,"locale");if(v){let t=f7(N.tickValues(),fM(s,"timeScale","timeInterval"));r=null===P?(e,n)=>f6(e,n,N.tickValues(),t,C,s.locale):(e,n)=>{let i=f6(e,n,N.tickValues(),t,C,s.locale);return P(e,n,i)}}else null===P?L===tl.LINEAR&&(r=t=>B(t,I)):r=P;N.tickFormat(r);let[U,F]=this.services.cartesianScales.getScaleByPosition(a).domain();if(T){if(v)T.forEach((t,e)=>{void 0===t.getTime&&(T[e]=new Date(t))}),o=T.filter(t=>{let e=t.getTime();return e>=new Date(U).getTime()&&e<=new Date(F).getTime()});else if(x===tl.LABELS){let t=this.services.cartesianScales.getScaleByPosition(a).domain();o=T.filter(e=>t.includes(e))}else o=T.filter(t=>t>=U&&t<=F);N.tickValues(o)}switch(a){case tr.LEFT:g.attr("transform",`translate(${this.margins.left}, 0)`);break;case tr.BOTTOM:g.attr("transform",`translate(0, ${h-this.margins.bottom})`);break;case tr.RIGHT:g.attr("transform",`translate(${c-this.margins.right}, 0)`);break;case tr.TOP:g.attr("transform",`translate(0, ${this.margins.top})`)}let j=this.model.isDataEmpty();if(y.title){let t;let e=gu.appendOrSelect(d,"text.axis-title").html(j||E?"":mU(y.title)),n=fM(y,"titleOrientation");switch(a){case tr.LEFT:n===tO.RIGHT?e.attr("transform","rotate(90)").attr("y",0).attr("x",f.range()[0]/2).attr("dy","-0.5em").style("text-anchor","middle"):e.attr("transform","rotate(-90)").attr("y",0).attr("x",-(f.range()[0]/2)).attr("dy","0.75em").style("text-anchor","middle");break;case tr.BOTTOM:e.attr("transform",`translate(${this.margins.left/2+f.range()[1]/2}, ${h+4})`).style("text-anchor","middle");break;case tr.RIGHT:n===tO.LEFT?e.attr("transform","rotate(-90)").attr("y",c).attr("x",-(f.range()[0]/2)).style("text-anchor","middle"):e.attr("transform","rotate(90)").attr("y",-c).attr("x",f.range()[0]/2).attr("dy","0.75em").style("text-anchor","middle");break;case tr.TOP:t=gu.getSVGElementSize(e,{useBBox:!0}).height,e.attr("transform",`translate(${this.margins.left/2+f.range()[1]/2}, ${t/2})`).style("text-anchor","middle")}}if(v){let e=f7(N.tickValues(),fM(s,"timeScale","timeInterval")),n=C.showDayName,i=g;t&&(g=g.transition().call(e=>this.services.transitions.setupTransition({transition:e,name:"axis-update",animate:t}))),g=g.call(N),i.selectAll(".tick").data(N.tickValues(),f).order().select("text").style("font-weight",(t,i)=>f4(t,i,N.tickValues(),e,n)?"bold":"normal")}else g=t&&p?g.transition().call(e=>this.services.transitions.setupTransition({transition:e,name:"axis-update",animate:t})).call(N):g.call(N);if(m.call(N),a===tr.BOTTOM||a===tr.TOP){let t=!1,e=fM(y,"ticks","rotation");if(e===tw.ALWAYS)t=!0;else if(e===tw.NEVER)t=!1;else if(!e||e===tw.AUTO){if(f.step)t=m.selectAll("g.tick text").nodes().some(t=>gu.getSVGElementSize(t,{useBBox:!0}).width>=f.step());else{let e;t=!1;let n=m.append("text").text("A"),i=gu.getSVGElementSize(n.node(),{useBBox:!0}).width;m.selectAll("g.tick").each(function(){let n=nr(this),r=parseFloat(fM(fT(this),"tx"));null!==r&&e+n.text().length*i*.8>=r&&(t=!0),e=r}),n.remove()}}t?(A||(N.ticks(this.getNumberOfFittingTicks(c,R,dj.ticks.horizontalSpaceRatio)),m.call(N),g.call(N)),d.selectAll("g.ticks g.tick text").attr("transform","rotate(-45)").attr("text-anchor",a===tr.TOP?"start":"end")):d.selectAll("g.ticks g.tick text").attr("transform",null).attr("text-anchor",null)}if(E?d.attr("opacity",0):d.attr("opacity",1),g.selectAll("g.tick").attr("aria-label",t=>t),m.selectAll("g.tick").attr("aria-label",t=>t),S!==ta.NONE&&x===tl.LABELS&&!T){let t=this.services.cartesianScales.getScaleDomain(a);if(t.length>0){let e=u.select(`g.axis.${a} g.ticks g.tick`).html();d.selectAll("g.ticks g.tick").html(e);let n=this;d.selectAll("g.tick text").data(t).text(function(t){return t.length>O?(n.truncation[a]=!0,fS(t,S,M)):t}),this.getInvisibleAxisRef().selectAll("g.tick text").data(t).text(function(t){return t.length>O?fS(t,S,M):t}),d.selectAll("g.ticks").html(this.getInvisibleAxisRef().html()),d.selectAll("g.tick text").data(t)}}this.addEventListeners()}addEventListeners(){let t=this.getComponentContainer(),{position:e}=this.configs,n=gu.appendOrSelect(t,`g.axis.${e}`),i=this.getOptions(),r=fM(i,"axes",e),o=fM(r,"scaleType"),a=fM(r,"truncation","threshold"),s=this;n.selectAll("g.tick text").on("mouseover",function(t,e){s.services.events.dispatchEvent(tt.Axis.LABEL_MOUSEOVER,{event:t,element:nr(this),datum:e}),o===tl.LABELS&&e.length>a&&s.services.events.dispatchEvent(tt.Tooltip.SHOW,{event:t,hoveredElement:nr(this),content:e})}).on("mousemove",function(t,e){s.services.events.dispatchEvent(tt.Axis.LABEL_MOUSEMOVE,{event:t,element:nr(this),datum:e}),o===tl.LABELS&&e.length>a&&s.services.events.dispatchEvent(tt.Tooltip.MOVE,{event:t})}).on("click",function(t,e){s.services.events.dispatchEvent(tt.Axis.LABEL_CLICK,{event:t,element:nr(this),datum:e})}).on("mouseout",function(t,e){s.services.events.dispatchEvent(tt.Axis.LABEL_MOUSEOUT,{event:t,element:nr(this),datum:e}),o===tl.LABELS&&s.services.events.dispatchEvent(tt.Tooltip.HIDE)})}getInvisibleAxisRef(){let{position:t}=this.configs;return this.getComponentContainer().select(`g.axis.${t} g.ticks.invisible`)}getTitleRef(){let{position:t}=this.configs;return this.getComponentContainer().select(`g.axis.${t} text.axis-title`)}getNumberOfFittingTicks(t,e,n){return gZ(Math.floor(t/(e*n)),2,dj.ticks.number)}destroy(){let t=this.getComponentContainer(),{position:e}=this.configs;gu.appendOrSelect(t,`g.axis.${e}`).selectAll("g.tick text").on("mouseover",null).on("mousemove",null).on("mouseout",null)}}class yM extends yO{constructor(t,e,n){super(t,e,n)}render(t=!0){super.render(t),super.destroy();let e=this.configs.position,n=this.getComponentContainer(),i=gu.appendOrSelect(n,`g.axis.${e}`),r=this;i.selectAll("g.tick").each(function(t,n){let i=nr(this);i.classed("tick-hover",!0).attr("tabindex",0===n?0:-1);let o=i.select("text"),{width:a,height:s}=gu.getSVGElementSize(o,{useBBox:!0}),l=gu.appendOrSelect(i,"rect.axis-holder"),u=0,c=0;switch(e){case tr.LEFT:u=-a+Number(o.attr("x")),c=-(s/2);break;case tr.RIGHT:u=Math.abs(Number(o.attr("x"))),c=-(s/2);break;case tr.TOP:u=-(a/2),c=-s+Number(o.attr("y"))/2,r.truncation[e]&&(u=0,l.attr("transform","rotate(-45)"));break;case tr.BOTTOM:u=-(a/2),c=s/2-2,r.truncation[e]&&(u=-a,l.attr("transform","rotate(-45)"))}l.attr("x",u-dj.hover.rectanglePadding).attr("y",c).attr("width",a+2*dj.hover.rectanglePadding).attr("height",s).lower()}),this.addEventListeners()}addEventListeners(){let t=this.getComponentContainer(),{position:e}=this.configs,n=gu.appendOrSelect(t,`g.axis.${e}`),i=this.getOptions(),r=fM(i,"axes",e),o=fM(r,"scaleType"),a=fM(r,"truncation","threshold"),s=this;n.selectAll("g.tick.tick-hover").on("mouseover",function(t){let e=nr(this).select("text"),n=e.datum();s.services.events.dispatchEvent(tt.Axis.LABEL_MOUSEOVER,{event:t,element:e,datum:n}),o===tl.LABELS&&n.length>a&&s.services.events.dispatchEvent(tt.Tooltip.SHOW,{event:t,element:e,datum:n})}).on("mousemove",function(t){let e=nr(this).select("text"),n=e.datum();s.services.events.dispatchEvent(tt.Axis.LABEL_MOUSEMOVE,{event:t,element:e,datum:n}),s.services.events.dispatchEvent(tt.Tooltip.MOVE,{event:t})}).on("click",function(t){s.services.events.dispatchEvent(tt.Axis.LABEL_CLICK,{event:t,element:nr(this).select("text"),datum:nr(this).select("text").datum()})}).on("mouseout",function(t){s.services.events.dispatchEvent(tt.Axis.LABEL_MOUSEOUT,{event:t,element:nr(this).select("text"),datum:nr(this).select("text").datum()}),o===tl.LABELS&&s.services.events.dispatchEvent(tt.Tooltip.HIDE)}).on("focus",function(t){let e={clientX:0,clientY:0};if(t.target){t.target.focus();let n=t.target.getBoundingClientRect();e.clientX=n.x,e.clientY=n.y}s.services.events.dispatchEvent(tt.Axis.LABEL_FOCUS,{event:{...t,...e},element:nr(this),datum:nr(this).select("text").datum()})}).on("blur",function(t){s.services.events.dispatchEvent(tt.Axis.LABEL_BLUR,{event:t,element:nr(this),datum:nr(this).select("text").datum()})}).on("keydown",function(t){t.key&&"Escape"===t.key&&(s.services.events.dispatchEvent(tt.Tooltip.HIDE),s.services.events.dispatchEvent(tt.Axis.LABEL_BLUR,{event:t,element:nr(this),datum:nr(this).select("text").datum()})),e===tr.LEFT||e===tr.RIGHT?t.key&&"ArrowUp"===t.key?s.goNext(this,t):t.key&&"ArrowDown"===t.key&&s.goPrevious(this,t):t.key&&"ArrowLeft"===t.key?s.goPrevious(this,t):t.key&&"ArrowRight"===t.key&&s.goNext(this,t)})}goNext(t,e){t.nextElementSibling&&"path"!==t.nextElementSibling.tagName&&t.nextElementSibling.dispatchEvent(new Event("focus")),e.preventDefault()}goPrevious(t,e){t.previousElementSibling&&"path"!==t.previousElementSibling.tagName&&t.previousElementSibling.dispatchEvent(new Event("focus")),e.preventDefault()}destroy(){let t=this.getComponentContainer(),{position:e}=this.configs;gu.appendOrSelect(t,`g.axis.${e}`).selectAll("g.tick.tick-hover").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("focus",null).on("blur",null)}}class yA extends gq{constructor(){super(...arguments),this.type="2D-axes",this.renderType=te.SVG,this.children={},this.thresholds=[],this.margins={top:0,right:0,bottom:0,left:0}}render(t=!1){let e={},n=Object.keys(tr),i=fM(this.getOptions(),"axes");n.forEach(t=>{i[tr[t]]&&(e[tr[t]]=!0)}),this.configs.axes=e,n.forEach(t=>{let e=tr[t];if(this.configs.axes[e]&&!this.children[e]){let t={position:e,axes:this.configs.axes,margins:this.margins},n=this.model.axisFlavor===tD.DEFAULT?new yO(this.model,this.services,t):new yM(this.model,this.services,t);n.setModel(this.model),n.setServices(this.services),n.setParent(this.parent),this.children[e]=n}}),Object.keys(this.children).forEach(e=>{this.children[e].render(t)});let r={};Object.keys(this.children).forEach(t=>{let e;let n=this.children[t],i=n.configs.position,o=n.getInvisibleAxisRef(),{width:a,height:s}=gu.getSVGElementSize(o,{useBBox:!0});switch(n.getTitleRef().empty()?e=0:(e=gu.getSVGElementSize(n.getTitleRef(),{useBBox:!0}).height,(i===tr.LEFT||i===tr.RIGHT)&&(e+=5)),i){case tr.TOP:r.top=s+e;break;case tr.BOTTOM:r.bottom=s+e;break;case tr.LEFT:r.left=a+e;break;case tr.RIGHT:r.right=a+e}}),this.services.events.dispatchEvent(tt.Axis.RENDER_COMPLETE),Object.keys(r).some(t=>this.margins[t]!==r[t])&&(this.margins=Object.assign(this.margins,r),this.model.set({axesMargins:this.margins},{skipUpdate:!0}),this.services.events.dispatchEvent(tt.ZoomBar.UPDATE),Object.keys(this.children).forEach(t=>{let e=this.children[t];e.margins=this.margins}),this.render(!0))}}class yC extends gq{constructor(){super(...arguments),this.type="skeleton"}render(t=!0){let e=fM(this.getOptions(),"data","loading");e?this.renderSkeleton(e):this.removeSkeleton()}renderSkeleton(t){if(this.configs.skeleton===ty.GRID)this.renderGridSkeleton(t);else if(this.configs.skeleton===ty.VERT_OR_HORIZ)this.renderVertOrHorizSkeleton(t);else if(this.configs.skeleton===ty.PIE)this.renderPieSkeleton(t);else if(this.configs.skeleton===ty.DONUT)this.renderDonutSkeleton(t);else throw Error(`"${this.configs.skeleton}" is not a valid Skeleton type.`)}renderGridSkeleton(t){this.setScales(),this.drawBackdrop(t),this.drawXGrid(t),this.drawYGrid(t),t&&this.setShimmerEffect("shimmer-lines")}renderVertOrHorizSkeleton(t){let e=this.services.cartesianScales.getOrientation();this.setScales(),this.drawBackdrop(t),e===ts.VERTICAL&&this.drawYGrid(t),e===ts.HORIZONTAL&&this.drawXGrid(t),this.setShimmerEffect("shimmer-lines")}renderPieSkeleton(t){let e=this.computeOuterRadius();this.drawRing(e,0,t),t&&this.setShimmerEffect("shimmer-areas")}renderDonutSkeleton(t){let e=this.computeOuterRadius(),n=this.computeInnerRadius();this.drawRing(e,n,t),t&&this.setShimmerEffect("shimmer-areas")}setScales(){let t=this.services.cartesianScales.getMainXScale().range(),e=this.services.cartesianScales.getMainYScale().range();this.xScale=aC().domain([0,1]).range(t),this.yScale=aC().domain([0,1]).range(e)}drawBackdrop(t){let e=this.parent,{width:n,height:i}=gu.getSVGElementSize(e,{useAttrs:!0});this.backdrop=gu.appendOrSelect(e,"svg.chart-skeleton.DAII").attr("width",n).attr("height",i);let r=gu.appendOrSelect(this.backdrop,"rect.chart-skeleton-backdrop");r.attr("width","100%").attr("height","100%");let[o]=this.xScale.range(),[,a]=this.yScale.range();this.backdrop.merge(r).attr("x",o).attr("y",a),r.classed("shimmer-effect-lines",t).classed("empty-state-lines",!t).style("stroke",t?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawXGrid(t){let e=+this.backdrop.attr("width"),n=fM(this.getOptions(),"grid","x","numberOfTicks"),i=this.xScale.ticks(n).map(t=>t*e),r=gu.appendOrSelect(this.backdrop,"g.x.skeleton"),o=r.selectAll("line").data(i);o.enter().append("line").merge(o).attr("x1",t=>t).attr("x2",t=>t).attr("y1",0).attr("y2","100%"),r.selectAll("line").classed("shimmer-effect-lines",t).classed("empty-state-lines",!t).style("stroke",t?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawYGrid(t){let e=+this.backdrop.attr("height"),n=this.backdrop.attr("width"),i=fM(this.getOptions(),"grid","y","numberOfTicks"),r=this.xScale.ticks(i).map(t=>t*e),o=gu.appendOrSelect(this.backdrop,"g.y.skeleton"),a=o.selectAll("line").data(r);a.enter().append("line").merge(a).attr("x1",0).attr("x2",n).attr("y1",t=>t).attr("y2",t=>t),o.selectAll("line").classed("shimmer-effect-lines",t).classed("empty-state-lines",!t).style("stroke",t?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawRing(t,e,n=!0){let i=this.parent,{width:r,height:o}=gu.getSVGElementSize(i,{useAttrs:!0}),a=gu.appendOrSelect(i,"svg.chart-skeleton").attr("width",r).attr("height",o),s=0===e?"pie":"donut",l=fM(this.getOptions(),s,"alignment");gu.appendOrSelect(a,"rect.chart-skeleton-area-container").attr("width",r).attr("height",o).attr("fill","none");let u=lz().innerRadius(e).outerRadius(t).startAngle(0).endAngle(2*Math.PI),c=t+Math.abs(dV.radiusOffset),h=t+(Math.min(r,o)-2*t)/2,d=gu.appendOrSelect(a,"path").attr("class","skeleton-area-shape").attr("transform",`translate(${c}, ${h})`).attr("d",u).classed("shimmer-effect-areas",n).classed("empty-state-areas",!n).style("fill",n?`url(#${this.services.domUtils.generateElementIDString("shimmer-areas")})`:null),f=t+dV.xOffset;l===tc.CENTER?f=r/2:l===tc.RIGHT&&(f=r-t-dV.xOffset);let p=t+dV.yOffset;d.attr("transform",`translate(${f}, ${p})`)}computeOuterRadius(){let{width:t,height:e}=gu.getSVGElementSize(this.parent,{useAttrs:!0});return Math.min(t,e)/2+dV.radiusOffset}computeInnerRadius(){return this.computeOuterRadius()*(3/4)}setShimmerEffect(t){let e="stop-bg-shimmer",n=this.parent.select(".chart-skeleton"),{width:i}=gu.getSVGElementSize(this.parent,{useAttrs:!0}),r=gu.appendOrSelect(n,"defs").lower(),o=gu.appendOrSelect(r,"linearGradient").attr("id",this.services.domUtils.generateElementIDString(t)).attr("class",t).attr("x1",0-3*.2*i).attr("x2",i).attr("y1",0).attr("y2",0).attr("gradientUnits","userSpaceOnUse").attr("gradientTransform","translate(0, 0)"),a=`
			<stop class="${e}" offset="0"></stop>
			<stop class="stop-shimmer" offset="0.2"></stop>
			<stop class="${e}" offset="0.4"></stop>
		`;o.html(a),function t(){o.attr("gradientTransform",`translate(${0-3*.2*i}, 0)`).transition().duration(2e3).delay(1e3).ease(rU).attr("gradientTransform",`translate(${i+3*.2*i}, 0)`).on("end",t)}()}removeSkeleton(){this.parent.select(".chart-skeleton").remove()}}class yD extends gq{constructor(){super(...arguments),this.type="zero-line",this.renderType=te.SVG}render(t){let e=this.services.cartesianScales.getRangeAxisPosition({groups:this.configs.groups}),n=this.services.cartesianScales.getScaleByPosition(e),[i,r]=n.domain(),o=this.getComponentContainer();if(!(i>0&&r<0||i<0&&r>0)){o.selectAll("line.domain").remove();return}let[a,s]=this.services.cartesianScales.getDomainScale().range(),l=+n(0)+.5;l||(l=n.range()[0]);let u=fA({x0:a,x1:s,y0:l,y1:l},this.services.cartesianScales.getOrientation());gu.appendOrSelect(o,"line.domain").transition().call(e=>this.services.transitions.setupTransition({transition:e,name:"zero-line-update",animate:t})).attr("y1",u.y0).attr("y2",u.y1).attr("x1",u.x0).attr("x2",u.x1)}}class yk extends yd{constructor(){super(...arguments),this.type="meter-title",this.renderType=te.SVG}render(t=!1){let e=fM(this.model.getDisplayData(),0),n=this.getOptions(),i=this.getComponentContainer(),{groupMapsTo:r}=n.data,o=n.locale.translations.meter.title;if(fM(n,"meter","proportional"))this.displayTotal(),this.displayBreakdownTitle();else{let t=i.selectAll("text.meter-title").data(o?[o]:[e[r]]);t.enter().append("text").classed("meter-title",!0).merge(t).attr("x",0).attr("y","1em").text(t=>t),t.exit().remove(),this.appendPercentage()}this.displayStatus();let a=this.getMaxTitleWidth(),s=gu.appendOrSelect(i,"text.meter-title");a>0&&s.node().getComputedTextLength()>a&&this.truncateTitle(s,a)}displayBreakdownTitle(){let t;let e=this.getComponentContainer(),n=this.getOptions(),i=this.model.getMaximumDomain(this.model.getDisplayData()),r=fM(n,"meter","proportional","total"),o=fM(n,"meter","proportional","unit")?fM(n,"meter","proportional","unit"):"";if(i===r)t=null;else{let e=null!==r?r-i:i,a=fM(n,"meter","proportional","breakdownFormatter"),{code:s,number:l}=fM(n,"locale");t=null!==a?a({datasetsTotal:i,total:r}):`${l(i,s)} ${o} used (${l(e,s)} ${o} available)`}let a=e.selectAll("text.proportional-meter-title").data([t]);a.enter().append("text").classed("proportional-meter-title",!0).merge(a).attr("x",0).attr("y","1em").text(t=>t),a.exit().remove();let s=this.getMaxTitleWidth(),l=gu.appendOrSelect(e,"text.proportional-meter-title");s>0&&l.node().getComputedTextLength()>s&&this.truncateTitle(l,s)}displayTotal(){let t=this.getComponentContainer(),e=this.getOptions(),n=fM(e,"meter","proportional","total"),i=n?fM(e,"meter","proportional","total"):this.model.getMaximumDomain(this.model.getDisplayData()),r=fM(e,"meter","proportional","unit")?fM(e,"meter","proportional","unit"):"",o=fM(e,"meter","proportional","totalFormatter"),{code:a,number:s}=fM(e,"locale"),l=null!==o?o(i):`${s(n,a)} ${r} total`,u=gu.getHTMLElementSize(this.parent.node()).width,c=t.selectAll("text.proportional-meter-total").data([l]);c.enter().append("text").classed("proportional-meter-total",!0).merge(c).attr("x",this.model.getStatus()&&"string"!=typeof u?u-dG.total.paddingRight:u).attr("y","1em").attr("text-anchor","end").text(t=>t),c.exit().remove()}displayStatus(){let t=this.getComponentContainer(),e=gu.getHTMLElementSize(this.parent.node()).width||0,n=this.model.getStatus(),i=dG.status.indicatorSize/2,r=gu.appendOrSelect(t,"g.status-indicator").attr("class",null!==n?`status-indicator status--${n}`:"").attr("transform",`translate(${e-i}, 0)`),o=n?[n]:[],a=r.selectAll("circle.status").data(o);a.enter().append("circle").merge(a).attr("class","status").attr("r",i).attr("cx",0).attr("cy",8);let s=r.selectAll("path.innerFill").data(o);s.enter().append("path").merge(s).attr("d",this.getStatusIconPathString(n)).attr("transform",`translate(-${i}, 0)`).attr("class","innerFill"),s.exit().remove(),a.exit().remove()}appendPercentage(){let t=fM(this.model.getDisplayData(),0,"value"),{code:e,number:n}=fM(this.getOptions(),"locale"),i=this.getComponentContainer(),r=gu.appendOrSelect(i,"text.meter-title"),o=!0===fM(this.getOptions(),"meter","statusBar","percentageIndicator","enabled")?[t]:[],a=i.selectAll("text.percent-value").data(o),s=dG.statusBar.paddingRight;a.enter().append("text").classed("percent-value",!0).merge(a).text(t=>`${null!=t?n(t,e):0}%`).attr("x",+r.attr("x")+r.node().getComputedTextLength()+s).attr("y",r.attr("y")),a.exit().remove()}truncateTitle(t,e){super.truncateTitle(t,e);let n=gu.appendOrSelect(this.parent,"tspan"),i=dG.statusBar.paddingRight,r=Math.ceil(n.node().getComputedTextLength());gu.appendOrSelect(this.parent,"text.percent-value").attr("x",+t.attr("x")+t.node().getComputedTextLength()+r+i)}getMaxTitleWidth(){let t=fM(this.getOptions(),"meter","proportional"),e=gu.getHTMLElementSize(this.parent.node()).width;if(null!==t){let t=gu.appendOrSelect(this.parent,"text.proportional-meter-total").node(),n=gu.getSVGElementSize(t,{useBBox:!0}).width;return e-n-dG.total.paddingLeft}{let t=gu.appendOrSelect(this.parent,"text.percent-value"),n=dG.statusBar.paddingRight,i=t.node().getComputedTextLength(),r=gu.appendOrSelect(this.parent,"g.status-indicator").node(),o=gu.getSVGElementSize(r,{useBBox:!0}).width+dG.status.paddingLeft;return e-i-n-o}}getStatusIconPathString(t){switch(t){case tE.SUCCESS:return"M6.875 11.3125 3.75 8.1875 4.74375 7.25 6.875 9.34375 11.50625 4.75 12.5 5.7375 Z";case tE.DANGER:return"M10.7 11.5 4.5 5.3 5.3 4.5 11.5 10.7 Z";case tE.WARNING:return"M7.9375,11.125 C7.41973305,11.125 7,11.544733 7,12.0625 C7,12.580267 7.41973305,13 7.9375,13 C8.45526695,13 8.875,12.580267 8.875,12.0625 C8.875,11.544733 8.45526695,11.125 7.9375,11.125 M7.3125, 3 8.5625, 3 8.5625, 9.875 7.3125, 9.875, 7.3125, 3 Z"}}}class yR extends gq{getBarWidth(){let t=this.getOptions();if(t.bars.width)return t.bars.width;let e=this.model.getDisplayData().length,n=this.services.cartesianScales.getMainXScale(),i=gu.getSVGElementSize(this.parent,{useAttrs:!0}).width;if(!n.step){let n=fM(t,"bars","spacingFactor");return Math.min(t.bars.maxWidth,i*n/e)}return Math.min(t.bars.maxWidth,n.step()/2)}isOutsideZoomedDomain(t,e){if(this.model.getDisplayData().length<=1)return!1;let n=this.model.get("zoomDomain");if(void 0!==n){let i=this.services.cartesianScales.getDomainScale();return t<i(n[0])||e>i(n[1])}return!1}}let yL="4,10 8,6 12,10",yN="12,6 8,10 4,6";class yP extends gq{constructor(){super(...arguments),this.type="gauge",this.renderType=te.SVG}getValue(){var t;return(null==(t=this.model.getData().find(t=>"value"===t.group))?void 0:t.value)??null}getValueRatio(){return gZ(this.getValue(),0,100)/100}getDelta(){var t;return(null==(t=this.model.getData().find(t=>"delta"===t.group))?void 0:t.value)??null}getArcRatio(){let t=this.getOptions();return fM(t,"gauge","type")===t_.FULL?1:.5}getArcSize(){return this.getArcRatio()*Math.PI*2}getStartAngle(){let t=this.getArcSize();return t===2*Math.PI?0:-t/2}getArrow(t){let e=this.getOptions();switch(fM(e,"gauge","deltaArrow","direction")){case tx.UP:return yL;case tx.DOWN:return yN;default:return t>0?yL:yN}}render(t=!0){let e=this.getComponentContainer().attr("width","100%").attr("height","100%"),n=this.getOptions(),i=this.getValue(),r=this.getValueRatio(),o=this.getArcSize(),a=this.getStartAngle(),s=a+r*o,l=a+o,u=this.computeRadius(),c=this.getInnerRadius();this.backgroundArc=lz().innerRadius(c).outerRadius(u).startAngle(s).endAngle(l),this.arc=lz().innerRadius(c).outerRadius(u).startAngle(a).endAngle(s),gu.appendOrSelect(e,"path.arc-background").attr("d",this.backgroundArc);let h=e.selectAll("path.arc-foreground").data([i]);h.enter().append("path").merge(h).attr("class",this.model.getColorClassName({classNameTypes:[ti.FILL],dataGroupName:"value",originalClassName:"arc-foreground"})).style("fill",()=>fM(this.getOptions(),"color","scale","value")).attr("d",this.arc).attr("role",pn.GRAPHICS_SYMBOL).attr("aria-roledescription","value").attr("aria-label",t=>t),this.drawValueNumber(),this.drawDelta(),h.exit().remove();let d=fM(n,"gauge","alignment"),{width:f}=gu.getSVGElementSize(this.getParent(),{useAttrs:!0}),p=u;d===tc.CENTER?p=f/2:d===tc.RIGHT&&(p=f-u),e.attr("x",p).attr("y",u),this.addEventListeners()}drawValueNumber(){let t=this.getComponentContainer(),e=this.getOptions(),n=fM(e,"gauge","type"),i=this.getValue(),r=this.getDelta(),o=this.computeRadius(),a=fM(e,"gauge","valueFontSize"),s=fM(e,"gauge","deltaFontSize"),l=fM(e,"gauge","numberSpacing"),u=fM(e,"gauge","showPercentageSymbol"),c=0;n!==t_.FULL||r?n===t_.SEMI&&r&&(c=-(s(o)+l)):c=s(o);let h=gu.appendOrSelect(t,"g.gauge-numbers").attr("transform",`translate(0, ${c})`),d=a(o),f=gu.appendOrSelect(h,"g.gauge-value-number"),{code:p,number:g}=fM(e,"locale"),m=fM(e,"gauge","numberFormatter"),y=f.selectAll("text.gauge-value-number").data([i]);y.enter().append("text").attr("class","gauge-value-number").merge(y).style("font-size",`${d}px`).attr("text-anchor","middle").text(t=>{let e;return e=null!=t?Number(t.toFixed(2))%1!=0?t.toFixed(2):t.toFixed():0,m?m(e):g(Number(e),p)});let{width:v}=gu.getSVGElementSize(gu.appendOrSelect(t,"text.gauge-value-number"),{useBBox:!0}),b=d/2,_=gu.appendOrSelect(f,"text.gauge-value-symbol").style("font-size",`${b}px`).attr("x",v/2).text(u?"%":""),{width:x,height:E}=gu.getSVGElementSize(_,{useBBox:!0});_.attr("y",`-${E/2}px`),f.attr("transform",`translate(-${x/2}, 0)`)}drawDelta(){let t=this,e=this.getComponentContainer(),n=this.getOptions(),i=this.getDelta(),{code:r,number:o}=fM(n,"locale");if(i){let a=this.computeRadius(),s=i?fM(n,"gauge","deltaFontSize"):()=>0,l=i?fM(n,"gauge","numberFormatter"):()=>null,u=fM(n,"gauge","deltaArrow","size"),c=fM(n,"gauge","numberSpacing"),h=fM(n,"gauge","showPercentageSymbol"),d=gu.appendOrSelect(e,"g.gauge-numbers"),f=gu.appendOrSelect(d,"g.gauge-delta").attr("transform",`translate(0, ${s(a)+c})`),p=gu.appendOrSelect(f,"text.gauge-delta-number"),g=h?"%":"";p.data(null===i?[]:[i]),p.enter().append("text").classed("gauge-delta-number",!0).merge(p).attr("text-anchor","middle").style("font-size",`${s(a)}px`).text(t=>{let e;return e=null!=t?Number(t.toFixed(2))%1!=0?t.toFixed(2):t.toFixed():0,l?`${l(e)}${g}`:`${o(Number(e),r)}${g}`});let{width:m}=gu.getSVGElementSize(gu.appendOrSelect(e,".gauge-delta-number"),{useBBox:!0}),y=fM(n,"gauge","deltaArrow","enabled"),v=f.selectAll("svg.gauge-delta-arrow").data(null!==i&&y?[i]:[]);v.enter().append("svg").merge(v).attr("class","gauge-delta-arrow").attr("x",-u(a)-m/2).attr("y",-u(a)/2-.35*s(a)).attr("width",u(a)).attr("height",u(a)).attr("viewBox","0 0 16 16").each(function(){let e=nr(this);gu.appendOrSelect(e,"rect.gauge-delta-arrow-backdrop").attr("width","16").attr("height","16").attr("fill","none");let r=fM(n,"gauge","status");gu.appendOrSelect(e,"polygon.gauge-delta-arrow").attr("class",null!==r?`gauge-delta-arrow status--${r}`:"").attr("points",t.getArrow(i))}),v.exit().remove(),p.exit().remove()}else{let t=e.select("g.gauge-delta");t.empty()||t.remove()}}getInnerRadius(){let t=this.computeRadius(),e=fM(this.getOptions(),"gauge","arcWidth");return t-e}addEventListeners(){let t=this;this.parent.selectAll("path.arc-foreground").on("mouseover",function(e,n){t.services.events.dispatchEvent(tt.Gauge.ARC_MOUSEOVER,{event:e,element:nr(this),datum:n})}).on("mousemove",function(e,n){let i=nr(this);t.services.events.dispatchEvent(tt.Gauge.ARC_MOUSEMOVE,{event:e,element:i,datum:n})}).on("click",function(e,n){t.services.events.dispatchEvent(tt.Gauge.ARC_CLICK,{event:e,element:nr(this),datum:n})}).on("mouseout",function(e,n){let i=nr(this);t.services.events.dispatchEvent(tt.Gauge.ARC_MOUSEOUT,{event:e,element:i,datum:n})})}computeRadius(){let t=this.getOptions(),e=fM(t,"gauge","type"),{width:n,height:i}=gu.getSVGElementSize(this.parent,{useAttrs:!0});return e===t_.SEMI?Math.min(n/2,i):Math.min(n/2,i/2)}}class yI extends gq{constructor(){super(...arguments),this.type="meter",this.renderType=te.SVG}getStackedBounds(t,e){let n=0;return t.map((t,i)=>0!==i?(n+=e(t.value),{...t,width:Math.abs(e(t.value)-dG.dividerWidth),x:n-e(t.value)}):(n=e(t.value),{...t,width:Math.abs(e(t.value)-dG.dividerWidth),x:0}))}render(t=!0){let e;let n=this,i=this.getComponentContainer(),r=this.getOptions(),o=fM(r,"meter","proportional"),a=this.model.getDisplayData(),s=this.model.getStatus(),{width:l}=gu.getSVGElementSize(i,{useAttrs:!0}),{groupMapsTo:u}=r.data;e=null===fM(r,"meter","proportional")?100:fM(r,"meter","proportional","total")||this.model.getMaximumDomain(this.model.getDisplayData());let c=aC().domain([0,e]).range([0,l]),h=this.getStackedBounds(a,c),d=fM(r,"meter","height");gu.appendOrSelect(i,"rect.container").attr("x",0).attr("y",0).attr("width",l).attr("height",d||(o?dG.height.proportional:dG.height.default)),gu.appendOrSelect(i,"line.rangeIndicator").attr("x1",l).attr("x2",l).attr("y1",0).attr("y2",d||(o?dG.height.proportional:dG.height.default));let f=i.selectAll("rect.value").data(h),p=null==s||n.model.isUserProvidedColorScaleValid()||o?"value":`value status--${s}`;f.enter().append("rect").classed("value",!0).merge(f).attr("x",t=>t.x).attr("y",0).attr("height",()=>d||(o?dG.height.proportional:dG.height.default)).attr("class",t=>this.model.getColorClassName({classNameTypes:[ti.FILL],dataGroupName:t[u],originalClassName:p})).transition().call(e=>this.services.transitions.setupTransition({transition:e,name:"meter-bar-update",animate:t})).attr("width",t=>t.value>e?c(e):t.width).style("fill",t=>n.model.getFillColor(t[u],null,t)).attr("role",pn.GRAPHICS_SYMBOL).attr("aria-roledescription","value").attr("aria-label",t=>t.value),f.exit().remove();let g=fM(r,"meter","peak"),m=g;null!==g&&(g>e?m=e:g<a[0].value&&(m=a[0].value>e?e:a[0].value));let y=i.selectAll("line.peak").data(null==m?[]:[m]);y.enter().append("line").classed("peak",!0).merge(y).attr("y1",0).attr("y2",()=>d||(o?dG.height.proportional:dG.height.default)).transition().call(e=>this.services.transitions.setupTransition({transition:e,name:"peak-line-update",animate:t})).attr("x1",t=>c(t)).attr("x2",t=>c(t)).attr("role",pn.GRAPHICS_SYMBOL).attr("aria-roledescription","peak").attr("aria-label",t=>t),y.exit().remove(),this.services.domUtils.setSVGMaxHeight(),this.addEventListeners()}addEventListeners(){let t=this.getOptions(),{groupMapsTo:e}=t.data,n=this,i=fM(t,"meter","proportional");this.parent.selectAll("rect.value").on("mouseover",function(t,r){let o=nr(this);n.services.events.dispatchEvent(tt.Meter.METER_MOUSEOVER,{event:t,element:o,datum:r}),i&&(o.classed("hovered",!0),n.services.events.dispatchEvent(tt.Tooltip.SHOW,{event:t,hoveredElement:o,items:[{label:r[e],value:r.value}]}))}).on("mousemove",function(t,e){let r=nr(this);n.services.events.dispatchEvent(tt.Meter.METER_MOUSEMOVE,{event:t,element:r,datum:e}),i&&n.services.events.dispatchEvent(tt.Tooltip.MOVE,{event:t})}).on("click",function(t,e){n.services.events.dispatchEvent(tt.Meter.METER_CLICK,{event:t,element:nr(this),datum:e})}).on("mouseout",function(t,e){let r=nr(this);n.services.events.dispatchEvent(tt.Meter.METER_MOUSEOUT,{event:t,element:r,datum:e}),i&&(r.classed("hovered",!1),n.services.events.dispatchEvent(tt.Tooltip.HIDE,{hoveredElement:r}))})}destroy(){this.parent.selectAll("rect.value").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("click",null)}}class yB extends yR{constructor(){super(...arguments),this.type="simple-bar",this.renderType=te.SVG,this.handleLegendOnHover=t=>{let{hoveredElement:e}=t.detail,{groupMapsTo:n}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-simple-bar").call(t=>this.services.transitions.setupTransition({transition:t,name:"legend-hover-simple-bar"})).attr("opacity",t=>t[n]!==e.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-simple-bar").call(t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-simple-bar"})).attr("opacity",1)}}init(){let t=this.services.events;t.addEventListener(tt.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(tt.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t){let e=this.getOptions(),{groupMapsTo:n}=e.data,i=this.getComponentContainer({withinChartClip:!0}),r=this.model.getDisplayData(this.configs.groups),o=this.services.cartesianScales.getOrientation(),a=i.selectAll("path.bar").data(r,t=>t[n]);a.exit().attr("opacity",0).remove(),a.enter().append("path").attr("opacity",0).merge(a).classed("bar",!0).attr("width",this.getBarWidth.bind(this)).transition().call(e=>this.services.transitions.setupTransition({transition:e,name:"bar-update-enter",animate:t})).attr("class",t=>this.model.getColorClassName({classNameTypes:[ti.FILL],dataGroupName:t[n],originalClassName:"bar"})).style("fill",t=>{let e=this.services.cartesianScales.getDomainIdentifier(t);return this.model.getFillColor(t[n],t[e],t)}).attr("d",t=>{let e,n;let i=this.services.cartesianScales.getRangeIdentifier(),r=this.getBarWidth(),a=t[i],s=this.services.cartesianScales.getDomainValue(t)-r/2,l=s+r;if(Array.isArray(a)&&2===a.length)e=this.services.cartesianScales.getRangeValue(a[0]),n=this.services.cartesianScales.getRangeValue(a[1]);else{let i=this.services.cartesianScales.getRangeScale().domain()[0];e=this.services.cartesianScales.getRangeValue(Math.max(0,i)),n=this.services.cartesianScales.getRangeValue(t)}let u=Math.abs(n-e);if(0!==u&&u<2&&(n=a>0&&o===ts.VERTICAL||a<0&&o===ts.HORIZONTAL?e-2:e+2),!this.isOutsideZoomedDomain(s,l))return fC({x0:s,x1:l,y0:e,y1:n},o)}).attr("opacity",1).attr("role",pn.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",t=>t.value),this.addEventListeners()}addEventListeners(){let t=this;this.parent.selectAll("path.bar").on("mouseover",function(e,n){let i=nr(this);i.classed("hovered",!0),t.services.events.dispatchEvent(tt.Bar.BAR_MOUSEOVER,{event:e,element:i,datum:n}),t.services.events.dispatchEvent(tt.Tooltip.SHOW,{event:e,hoveredElement:i,data:[n]})}).on("mousemove",function(e,n){t.services.events.dispatchEvent(tt.Bar.BAR_MOUSEMOVE,{event:e,element:nr(this),datum:n}),t.services.events.dispatchEvent(tt.Tooltip.MOVE,{event:e})}).on("click",function(e,n){t.services.events.dispatchEvent(tt.Bar.BAR_CLICK,{event:e,element:nr(this),datum:n})}).on("mouseout",function(e,n){let i=nr(this);i.classed("hovered",!1),t.services.events.dispatchEvent(tt.Bar.BAR_MOUSEOUT,{event:e,element:i,datum:n}),t.services.events.dispatchEvent(tt.Tooltip.HIDE,{hoveredElement:i})})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);let t=this.services.events;t.removeEventListener(tt.Legend.ITEM_HOVER,this.handleLegendOnHover),t.removeEventListener(tt.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class yU extends gl{zoomIn(t,e,n){let i,r,o;let a=n||dH;t&&(i=t.x,r=t.y,o=2);let{width:s,height:l}=gu.getSVGElementSize(this.services.domUtils.getHolder(),{useClientDimensions:!0});e.transition().duration(a.duration).ease(a.ease).attr("transform",`translate(${s/2}, ${l/2}) scale(${o}) translate(${-i},${-r})`),this.services.events.dispatchEvent(tt.CanvasZoom.CANVAS_ZOOM_IN,{element:nr(t)})}zoomOut(t,e){let n=e||dH;t.transition().duration(n.duration).ease(n.ease).attr("transform",""),this.services.events.dispatchEvent(tt.CanvasZoom.CANVAS_ZOOM_OUT)}}class yF extends gl{init(){this.documentFragment=document.createDocumentFragment()}addEventListener(t,e){this.documentFragment.addEventListener(t,e)}removeEventListener(t,e){this.documentFragment.removeEventListener(t,e)}dispatchEvent(t,e){let n;e?n=new CustomEvent(t,{detail:e}):(n=document.createEvent("Event")).initEvent(t,!1,!0),this.documentFragment.dispatchEvent(n)}}class yj extends gl{constructor(t,e){super(t,e)}downloadCSV(t,e){let n=document.createElement("a"),i="text/csv;encoding:utf-8";if(navigator.msSaveBlob)navigator.msSaveBlob(new Blob([t],{type:i}),e);else if(URL&&"download"in n){let r=URL.createObjectURL(new Blob([t],{type:i}));n.href=r,n.setAttribute("download",e),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}else location.href=`data:application/octet-stream,${encodeURIComponent(t)}`}downloadImage(t,e){let n=document.createElement("a");n.download=e,n.href=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}class yH extends gl{constructor(){super(...arguments),this.pendingTransitions={}}init(){var t;null==(t=this.services.events)||t.addEventListener(tt.Model.UPDATE,()=>{this.pendingTransitions={}})}setupTransition({transition:t,name:e,animate:n}){return this.pendingTransitions[t._id]=t,t.on("end interrupt cancel",()=>{delete this.pendingTransitions[t._id]}),!1===this.model.getOptions().animations||!1===n?t.duration(0):t.duration(fM(dZ,e,"duration")||dZ.default.duration)}getPendingTransitions(){return this.pendingTransitions}}function y$(t,e){let n=uB(t),i=uB(e),r=n.getTime()-i.getTime();return r<0?-1:r>0?1:r}function yz(t,e){let n=uB(t);if(isNaN(e))return fN(t,NaN);if(!e)return n;let i=n.getDate(),r=fN(t,n.getTime());r.setMonth(n.getMonth()+e+1,0);let o=r.getDate();return i>=o?r:(n.setFullYear(r.getFullYear(),r.getMonth(),i),n)}function yG(t,e){let n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function yV(t,e){let n=uB(t);return isNaN(e)?fN(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function yW(t){return e=>{let n=(t?Math[t]:Math.trunc)(e);return 0===n?0:n}}function yY(t,e){return+uB(t)-+uB(e)}function yZ(t,e){let n=+uB(t);return fN(t,n+e)}function yq(t,e){return yZ(t,36e5*e)}function yX(t,e,n){let i=yY(t,e)/6e4;return yW(null==n?void 0:n.roundingMethod)(i)}function yK(t,e){return yZ(t,6e4*e)}function yQ(t,e,n){let i=yY(t,e)/1e3;return yW(null==n?void 0:n.roundingMethod)(i)}function yJ(t,e){return yZ(t,1e3*e)}class y0 extends gl{constructor(){super(...arguments),this.scaleTypes={top:null,right:null,bottom:null,left:null},this.scales={top:null,right:null,bottom:null,left:null}}getDomainAxisPosition({datum:t=null}={}){if(this.dualAxes&&t){let e=this.model.getOptions(),{groupMapsTo:n}=e.data,i=fM(e,"axes",this.secondaryDomainAxisPosition),r=t[n];if(null!=i&&i.correspondingDatasets&&i.correspondingDatasets.includes(r))return this.secondaryDomainAxisPosition}return this.domainAxisPosition}getRangeAxisPosition({datum:t=null,groups:e=null}={}){if(this.dualAxes){let n;let i=this.model.getOptions(),{groupMapsTo:r}=i.data,o=fM(i,"axes",this.secondaryRangeAxisPosition);if(null!==t?n=t[r]:e&&e.length>0&&(n=e[0]),null!=o&&o.correspondingDatasets&&o.correspondingDatasets.includes(n))return this.secondaryRangeAxisPosition}return this.rangeAxisPosition}getAxisOptions(t){return fM(this.model.getOptions(),"axes",t)}getDomainAxisOptions(){let t=this.getDomainAxisPosition();return this.getAxisOptions(t)}getRangeAxisOptions(){let t=this.getRangeAxisPosition();return this.getAxisOptions(t)}getScaleLabel(t){return this.getAxisOptions(t).title||(t===tr.BOTTOM||t===tr.TOP?"x-value":"y-value")}getDomainLabel(){return this.getScaleLabel(this.getDomainAxisPosition())}getRangeLabel(){return this.getScaleLabel(this.getRangeAxisPosition())}update(){this.determineAxisDuality(),this.findDomainAndRangeAxes(),this.determineOrientation(),Object.keys(tr).map(t=>tr[t]).forEach(t=>{this.scales[t]=this.createScale(t)})}findDomainAndRangeAxes(){let t=this.findVerticalAxesPositions(),e=this.findHorizontalAxesPositions(),n=this.findDomainAndRangeAxesPositions(t,e);this.domainAxisPosition=n.primaryDomainAxisPosition,this.rangeAxisPosition=n.primaryRangeAxisPosition,this.isDualAxes()&&(this.secondaryDomainAxisPosition=n.secondaryDomainAxisPosition,this.secondaryRangeAxisPosition=n.secondaryRangeAxisPosition)}determineOrientation(){(this.rangeAxisPosition===tr.LEFT||this.rangeAxisPosition===tr.RIGHT)&&(this.domainAxisPosition===tr.BOTTOM||this.domainAxisPosition===tr.TOP)?this.orientation=ts.VERTICAL:this.orientation=ts.HORIZONTAL}isDualAxes(){return this.dualAxes}determineAxisDuality(){var t,e,n,i;let r=this.model.getOptions(),o=fM(r,"axes");(null!=(t=o[tr.LEFT])&&t.correspondingDatasets&&o[tr.RIGHT]||null!=(e=o[tr.RIGHT])&&e.correspondingDatasets&&o[tr.LEFT]||null!=(n=o[tr.TOP])&&n.correspondingDatasets&&o[tr.BOTTOM]||null!=(i=o[tr.BOTTOM])&&i.correspondingDatasets&&o[tr.TOP])&&(this.dualAxes=!0)}getCustomDomainValuesByposition(t){let e=fM(this.model.getOptions(),"axes",t,"domain");if(e&&!Array.isArray(e))throw Error(`Domain in ${t} axis is not a valid array`);if(Array.isArray(e)&&(this.scaleTypes[t]===tl.LINEAR||this.scaleTypes[t]===tl.TIME)&&2!==e.length)throw Error(`There can only be 2 elements in domain for scale type: ${this.scaleTypes[t]}`);return e}getOrientation(){return this.orientation}getScaleByPosition(t){return this.scales[t]}getScaleTypeByPosition(t){return this.scaleTypes[t]}getDomainAxisScaleType(){let t=this.getDomainAxisPosition();return this.getScaleTypeByPosition(t)}getRangeAxisScaleType(){let t=this.getRangeAxisPosition();return this.getScaleTypeByPosition(t)}getDomainScale(){return this.scales[this.domainAxisPosition]}getRangeScale(){return this.scales[this.rangeAxisPosition]}getMainXAxisPosition(){let t=[tr.BOTTOM,tr.TOP];return[this.domainAxisPosition,this.rangeAxisPosition].find(e=>t.indexOf(e)>-1)}getMainYAxisPosition(){let t=[tr.LEFT,tr.RIGHT];return[this.domainAxisPosition,this.rangeAxisPosition].find(e=>t.indexOf(e)>-1)}getMainXScale(){return this.scales[this.getMainXAxisPosition()]}getMainYScale(){return this.scales[this.getMainYAxisPosition()]}getValueFromScale(t,e,n,i){let r;let o=this.model.getOptions(),a=fM(o,"axes")[n],{mapsTo:s}=a,l=null!==fM(i,s)?i[s]:i;switch(e){case tl.LABELS:r=t(l)+t.step()/2;break;case tl.TIME:r=t(new Date(l));break;default:r=t(l)}return r}getBoundedScaledValues(t){let{bounds:e}=this.model.getOptions(),n=this.getRangeAxisPosition({datum:t}),i=this.scales[n],r=this.model.getOptions(),o=fM(r,"axes")[n],{mapsTo:a}=o,s=void 0!==t[a]?t[a]:t;return[i(null!==fM(t,e.upperBoundMapsTo)?t[e.upperBoundMapsTo]:s),i(null!==fM(t,e.lowerBoundMapsTo)?t[e.lowerBoundMapsTo]:s)]}getValueThroughAxisPosition(t,e){let n=this.scaleTypes[t],i=this.scales[t];return this.getValueFromScale(i,n,t,e)}getDomainValue(t){let e=this.getDomainAxisPosition({datum:t});return this.getValueThroughAxisPosition(e,t)}getRangeValue(t){let e=this.getRangeAxisPosition({datum:t});return this.getValueThroughAxisPosition(e,t)}getMainXScaleType(){return this.getScaleTypeByPosition(this.getMainXAxisPosition())}getMainYScaleType(){return this.getScaleTypeByPosition(this.getMainYAxisPosition())}getDomainIdentifier(t){let e=this.model.getOptions();return fM(e,"axes",this.getDomainAxisPosition({datum:t}),"mapsTo")}getRangeIdentifier(t){let e=this.model.getOptions();return fM(e,"axes",this.getRangeAxisPosition({datum:t}),"mapsTo")}extendsDomain(t,e){let n=this.model.getOptions(),i=fM(n,"axes",t);if(i.scaleType!==tl.TIME)return function([t,e],n,i){let r=(e-t)*n,o=t>=0&&t-r<0?0:t-r;if(i===tl.LOG&&o<=0){if(t<=0)throw Error("Data must have values greater than 0 if log scale type is used.");o=t}return[o,e<=0&&e+r>0?0:e+r]}(e,dj.paddingRatio,i.scaleType);{let t=fM(n,"timeScale","addSpaceOnEdges");return function(t,e){let n=new Date(t[0]),i=new Date(t[1]);return function(t,e){let n=uB(t),i=uB(e),r=y$(n,i),o=Math.abs(function(t,e){let n=uB(t),i=uB(e);return n.getFullYear()-i.getFullYear()}(n,i));n.setFullYear(1584),i.setFullYear(1584);let a=y$(n,i)===-r,s=r*(o-+a);return 0===s?0:s}(i,n)>1?[yz(n,-(12*e)),yz(i,12*e)]:function(t,e){let n;let i=uB(t),r=uB(e),o=y$(i,r),a=Math.abs(function(t,e){let n=uB(t),i=uB(e),r=n.getFullYear()-i.getFullYear(),o=n.getMonth()-i.getMonth();return 12*r+o}(i,r));if(a<1)n=0;else{1===i.getMonth()&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let e=y$(i,r)===-o;(function(t){let e=uB(t);return+function(t){let e=uB(t);return e.setHours(23,59,59,999),e}(e)==+function(t){let e=uB(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}(e)})(uB(t))&&1===a&&1===y$(t,r)&&(e=!1),n=o*(a-Number(e))}return 0===n?0:n}(i,n)>1?[yz(n,-e),yz(i,e)]:function(t,e){let n=uB(t),i=uB(e),r=yG(n,i),o=Math.abs(fL(n,i));n.setDate(n.getDate()-r*o);let a=+(yG(n,i)===-r),s=r*(o-a);return 0===s?0:s}(i,n)>1?[yV(n,-e),yV(i,e)]:function(t,e,n){let i=yY(t,e)/36e5;return yW(null==n?void 0:n.roundingMethod)(i)}(i,n)>1?[yq(n,-e),yq(i,e)]:yX(i,n)>30?[yK(n,-(30*e)),yK(i,30*e)]:yX(i,n)>1?[yK(n,-e),yK(i,e)]:yQ(i,n)>15?[yJ(n,-(15*e)),yJ(i,15*e)]:yQ(i,n)>1?[yJ(n,-e),yJ(i,e)]:[n,i]}(e,t)}}findVerticalAxesPositions(){let t=this.model.getOptions(),e=fM(t,"axes"),n=this.isDualAxes();return null===fM(e,tr.LEFT)&&null!==fM(e,tr.RIGHT)||!0===fM(e,tr.RIGHT,"main")||n&&fM(e,tr.LEFT,"correspondingDatasets")?{primary:tr.RIGHT,secondary:tr.LEFT}:{primary:tr.LEFT,secondary:tr.RIGHT}}findHorizontalAxesPositions(){let t=this.model.getOptions(),e=fM(t,"axes"),n=this.isDualAxes();return null===fM(e,tr.BOTTOM)&&null!==fM(e,tr.TOP)||!0===fM(e,tr.TOP,"main")||n&&fM(e,tr.BOTTOM,"correspondingDatasets")?{primary:tr.TOP,secondary:tr.BOTTOM}:{primary:tr.BOTTOM,secondary:tr.TOP}}findDomainAndRangeAxesPositions(t,e){let n=this.model.getOptions(),i=fM(n,"axes",t.primary),r=fM(n,"axes",e.primary),o=i.scaleType||tl.LINEAR,a=r.scaleType||tl.LINEAR,s={primaryDomainAxisPosition:null,secondaryDomainAxisPosition:null,primaryRangeAxisPosition:null,secondaryRangeAxisPosition:null};return s.primaryDomainAxisPosition=e.primary,s.primaryRangeAxisPosition=t.primary,s.secondaryDomainAxisPosition=e.secondary,s.secondaryRangeAxisPosition=t.secondary,(a===tl.LABELS||a===tl.TIME||o!==tl.LABELS)&&o!==tl.TIME||(s.primaryDomainAxisPosition=t.primary,s.primaryRangeAxisPosition=e.primary,s.secondaryDomainAxisPosition=t.secondary,s.secondaryRangeAxisPosition=e.secondary),s}getScaleDomain(t){let e,n;let i=this.model.getOptions(),r=fM(i,"axes",t),o=fM(i,"bounds"),{includeZero:a}=r,s=fM(r,"scaleType")||tl.LINEAR;if(this.model.isDataEmpty())return[];if(r.binned){let{bins:t}=this.model.getBinConfigurations();return[0,function(t,e){let n;if(void 0===e)for(let e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}(t,t=>t.length)]}if(r.limitDomainToBins){let{bins:t}=this.model.getBinConfigurations(),e=this.model.getStackKeys({bins:t});return[e[0].split(":")[0],e[e.length-1].split(":")[1]]}let l=this.model.getDisplayData(),{extendLinearDomainBy:u,mapsTo:c,percentage:h,thresholds:d}=r,{reference:f,compareTo:p}=dj.ratio;if(r.domain)return s===tl.LABELS?r.domain:(s===tl.TIME&&(r.domain=r.domain.map(t=>void 0===t.getTime?new Date(t):t)),this.extendsDomain(t,r.domain));if(h)return[0,100];if(r&&s===tl.LABELS)return dF(l.map(t=>t[c]));let g=this.model.getDataGroupNames();if(s===tl.LABELS_RATIO)return l.map(t=>`${t[f]}/${t[p]}`);if(s===tl.TIME)n=l.map(t=>+new Date(t[c]));else if(o&&i.axes)n=[],l.forEach(t=>{n.push(t[c]),t[o.upperBoundMapsTo]&&n.push(t[o.upperBoundMapsTo]),t[o.lowerBoundMapsTo]&&n.push(t[o.lowerBoundMapsTo])});else if(!0===r.stacked&&g&&t===this.getRangeAxisPosition()){let{groupMapsTo:t}=i.data,e=this.model.getDataValuesGroupedByKeys({groups:g}),r=l.filter(e=>!g.includes(e[t])),o=[];e.forEach(t=>{let{...e}=t,n=0,i=0;Object.values(e).forEach(t=>{isNaN(t)||(t<0?i+=t:n+=t)}),o.push([i,n])}),n=[...(null==o?0:o.length)?hT(o,1):[],...r.map(t=>t[c])]}else n=[],l.forEach(t=>{let e=t[c];Array.isArray(e)&&2===e.length?(n.push(e[0]),n.push(e[1])):(u&&n.push(Math.max(t[c],t[u])),n.push(e))});return s!==tl.TIME&&s!==tl.LOG&&a&&n.push(0),d&&d.length>0&&d.forEach(t=>{let e=fM(t,"value");null!==e&&n.push(e)}),e=tU(n),e=this.extendsDomain(t,e)}createScale(t){let e;let n=this.model.getOptions(),i=fM(n,"axes",t);if(!i)return null;let r=fM(i,"scaleType")||tl.LINEAR;return this.scaleTypes[t]=r,(e=r===tl.TIME?lw():r===tl.LOG?(function t(){let e=(function(t){let e=t(ak,aR),n=e.domain,i=10,r,o;function a(){var a,s;return r=(a=i)===Math.E?Math.log:10===a&&Math.log10||2===a&&Math.log2||(a=Math.log(a),t=>Math.log(t)/a),o=10===(s=i)?aP:s===Math.E?Math.exp:t=>Math.pow(s,t),n()[0]<0?(r=aI(r),o=aI(o),t(aL,aN)):t(ak,aR),e}return e.base=function(t){return arguments.length?(i=+t,a()):i},e.domain=function(t){return arguments.length?(n(t),a()):n()},e.ticks=t=>{let e=n(),a=e[0],s=e[e.length-1],l=s<a;l&&([a,s]=[s,a]);let u=r(a),c=r(s),h,d,f=null==t?10:+t,p=[];if(!(i%1)&&c-u<f){if(u=Math.floor(u),c=Math.ceil(c),a>0){for(;u<=c;++u)for(h=1;h<i;++h)if(!((d=u<0?h/o(-u):h*o(u))<a)){if(d>s)break;p.push(d)}}else for(;u<=c;++u)for(h=i-1;h>=1;--h)if(!((d=u>0?h/o(-u):h*o(u))<a)){if(d>s)break;p.push(d)}2*p.length<f&&(p=tq(a,s,f))}else p=tq(u,c,Math.min(c-u,f)).map(o);return l?p.reverse():p},e.tickFormat=(t,n)=>{if(null==t&&(t=10),null==n&&(n=10===i?"s":","),"function"!=typeof n&&(i%1||null!=(n=oc(n)).precision||(n.trim=!0),n=oA(n)),t===1/0)return n;let a=Math.max(1,i*t/e.ticks().length);return t=>{let e=t/o(Math.round(r(t)));return e*i<i-.5&&(e*=i),e<=a?n(t):""}},e.nice=()=>n(aD(n(),{floor:t=>o(Math.floor(r(t))),ceil:t=>o(Math.ceil(r(t)))})),e})(aA()).domain([1,10]);return e.copy=()=>aM(e,t()).base(e.base()),av.apply(e,arguments),e})().base(i.base||10):r===tl.LABELS||r===tl.LABELS_RATIO?function t(){var e,n,i=a_().unknown(void 0),r=i.domain,o=i.range,a=0,s=1,l=!1,u=0,c=0,h=.5;function d(){var t=r().length,i=s<a,d=i?s:a,f=i?a:s;e=(f-d)/Math.max(1,t-u+2*c),l&&(e=Math.floor(e)),d+=(f-d-e*(t-u))*h,n=e*(1-u),l&&(d=Math.round(d),n=Math.round(n));var p=(function(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),o=Array(r);++i<r;)o[i]=t+i*n;return o})(t).map(function(t){return d+e*t});return o(i?p.reverse():p)}return delete i.unknown,i.domain=function(t){return arguments.length?(r(t),d()):r()},i.range=function(t){return arguments.length?([a,s]=t,a=+a,s=+s,d()):[a,s]},i.rangeRound=function(t){return[a,s]=t,a=+a,s=+s,l=!0,d()},i.bandwidth=function(){return n},i.step=function(){return e},i.round=function(t){return arguments.length?(l=!!t,d()):l},i.padding=function(t){return arguments.length?(u=Math.min(1,c=+t),d()):u},i.paddingInner=function(t){return arguments.length?(u=Math.min(1,t),d()):u},i.paddingOuter=function(t){return arguments.length?(c=+t,d()):c},i.align=function(t){return arguments.length?(h=Math.max(0,Math.min(1,t)),d()):h},i.copy=function(){return t(r(),[a,s]).round(l).paddingInner(u).paddingOuter(c).align(h)},av.apply(d(),arguments)}():aC()).domain(this.getScaleDomain(t)),e}getDomainLowerBound(t){let e,n=0;return e=this.getOrientation()===ts.VERTICAL?this.getMainYScale().domain():this.getMainXScale().domain(),!1===fM(this.model.getOptions(),"axes",t,"includeZero")&&e[0]>0&&e[1]>0&&(n=e[0]),n}getHighestDomainThreshold(){let t=fM(this.model.getOptions(),"axes"),e=this.getDomainAxisPosition(),{thresholds:n}=t[e];if(!Array.isArray(n)||Array.isArray(n)&&!n.length)return null;let i=this.getDomainScale(),r=n.sort((t,e)=>e.value-t.value)[0];return this.getScaleTypeByPosition(e)===tl.TIME&&("string"==typeof r.value||void 0===r.value.getTime)&&(r.value=new Date(r.value)),{threshold:r,scaleValue:i(r.value)}}getHighestRangeThreshold(){let t=fM(this.model.getOptions(),"axes"),e=this.getRangeAxisPosition(),{thresholds:n}=t[e];if(!Array.isArray(n)||Array.isArray(n)&&!n.length)return null;let i=this.getRangeScale(),r=n.sort((t,e)=>e.value-t.value)[0];return{threshold:r,scaleValue:i(r.value)}}}let y1=class extends gl{constructor(){super(...arguments),this.curveTypes={curveLinear:lW,curveLinearClosed:uh,curveBasis:lJ,curveBasisClosed:l1,curveBasisOpen:l3,curveBundle:l4,curveCardinal:l7,curveCardinalClosed:ut,curveCardinalOpen:un,curveCatmullRom:uo,curveCatmullRomClosed:us,curveCatmullRomOpen:uu,curveMonotoneX:uv,curveMonotoneY:ub,curveNatural:uE,curveStep:uT,curveStepAfter:uO,curveStepBefore:uS}}getD3Curve(){let t="curveLinear",e=this.model.getOptions().curve;if(e&&(t="string"==typeof e?e:e.name),this.curveTypes[t]){let n=this.curveTypes[t];return e&&Object.keys(e).forEach(t=>{n[t]&&(n=n[t](e[t]))}),n}return console.warn(`The curve type '${t}' is invalid, using 'curveLinear' instead`),this.curveTypes.curveLinear}},y2=class extends gl{isZoomBarEnabled(){if(!this.services.cartesianScales||!fM(this.model.getOptions(),"zoomBar","top","enabled"))return!1;this.services.cartesianScales.findDomainAndRangeAxes();let t=this.services.cartesianScales.getMainXAxisPosition(),e=fM(this.model.getOptions(),"axes",t,"scaleType");return t===tr.BOTTOM&&e===tl.TIME}getZoomBarData(){let t=this.model.getZoomBarData();return t&&t.length>1?t:this.model.getDisplayData()}getDefaultZoomBarDomain(t){if(!this.services.zoom)throw Error("Services zoom not defined");let e=t||this.services.zoom.getZoomBarData(),{cartesianScales:n}=this.services;if(!n)throw Error("Services cartesianScales undefined");let i=n.getMainXAxisPosition(),r=n.getDomainIdentifier(),o=fM(this.model.getOptions(),"axes",i,"domain");if(Array.isArray(o)&&2===o.length)return o;if(!i)throw Error("Not defined: mainXAxisPosition");return n.extendsDomain(i,tU(e,t=>t[r]))}handleDomainChange(t,e={dispatchEvent:!0}){var n;this.model.set({zoomDomain:t},{animate:!1}),e.dispatchEvent&&(null==(n=this.services.events)||n.dispatchEvent(tt.ZoomDomain.CHANGE,{newDomain:t}))}getZoomRatio(){return fM(this.model.getOptions(),"zoomBar","zoomRatio")}filterDataForRangeAxis(t,e){var n;let i=this.model.get("zoomDomain"),r=Object.assign({stacked:!1},e),o=fM(this.model.getOptions(),"zoomBar","updateRangeAxis");if(this.isZoomBarEnabled()&&o&&i){let e=r.stacked?"sharedStackKey":null==(n=this.services.cartesianScales)?void 0:n.getDomainIdentifier(),o=t.filter(t=>new Date(t[e])>=i[0]&&new Date(t[e])<=i[1]);if(o.length>0)return o}return t}zoomIn(t=this.getZoomRatio()){var e;let n=this.model.get("zoomDomain"),i=dq.handleWidth,r=null==(e=this.services.cartesianScales)?void 0:e.getMainXScale().copy();r.domain(this.getDefaultZoomBarDomain());let o=r(n[0]),a=r(n[1]);if(a-o<i+1)return;let s=r.range(),l=a-o,u=Math.min((s[1]-s[0])/2*(t/2),l/2),c=o+u,h=a-u;c>=h&&(c=o+l/2-i/2,h=a-l/2+i/2);let d=[r.invert(c),r.invert(h)];(n[0].valueOf()!==d[0].valueOf()||n[1].valueOf()!==d[1].valueOf())&&this.handleDomainChange(d)}zoomOut(t=this.getZoomRatio()){let e=this.model.get("zoomDomain");if(!this.services.cartesianScales)throw Error("Services cartesianScales undefined");let n=this.services.cartesianScales.getMainXScale().copy();n.domain(this.getDefaultZoomBarDomain());let i=n(e[0]),r=n(e[1]),o=n.range(),a=(o[1]-o[0])/2*(t/2),s=Math.max(i-a,o[0]),l=Math.min(r+a,o[1]),u=[n.invert(s),n.invert(l)];(e[0].valueOf()!==u[0].valueOf()||e[1].valueOf()!==u[1].valueOf())&&this.handleDomainChange(u)}resetZoomDomain(){let t=this.model.get("zoomDomain"),e=this.getDefaultZoomBarDomain();(t[0].valueOf()!==e[0].valueOf()||t[1].valueOf()!==e[1].valueOf())&&this.handleDomainChange(e)}isMinZoomDomain(){let t=this.model.get("zoomDomain"),e=this.getDefaultZoomBarDomain();if(!t||!e)return!1;let n=t[1].valueOf()-t[0].valueOf(),i=e[1].valueOf()-e[0].valueOf(),r=fM(this.model.getOptions(),"zoomBar","minZoomRatio");return n/i<r}isMaxZoomDomain(){let t=this.model.get("zoomDomain"),e=this.getDefaultZoomBarDomain();return!!(t&&e&&t[0].valueOf()===e[0].valueOf()&&t[1].valueOf()===e[1].valueOf())}isEmptyState(){return 0===this.getZoomBarData().length}isZoomBarLoading(t){return fM(this.model.getOptions(),"zoomBar",t,"loading")}isZoomBarLocked(t){return fM(this.model.getOptions(),"zoomBar",t,"locked")}};var y3=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),y5="\ud800-\udfff",y4="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",y6="\ud83c[\udffb-\udfff]",y8="[^"+y5+"]",y7="(?:\ud83c[\udde6-\uddff]){2}",y9="[\ud800-\udbff][\udc00-\udfff]",vt="(?:"+y4+"|"+y6+")?",ve="[\\ufe0e\\ufe0f]?",vn="(?:\\u200d(?:"+[y8,y7,y9].join("|")+")"+ve+vt+")*",vi=RegExp(y6+"(?="+y6+")|(?:"+[y8+y4+"?",y4,y7,y9,"["+y5+"]"].join("|")+")"+(ve+vt+vn),"g"),vr=function(t){var e,n,i,r,o=(n=t=hg(t),y3.test(n))?(e=t,y3.test(e)?e.match(vi)||[]:e.split("")):void 0,a=o?(r=o.length,function(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(r);++i<r;)o[i]=t[i+e];return o}(o,1,i=void 0===i?r:i)).join(""):t.slice(1);return(o?o[0]:t.charAt(0)).toUpperCase()+a};gY(function(t,e,n){return e=e.toLowerCase(),t+(n?vr(hg(e).toLowerCase()):e)});class vo{constructor(t,e){this.components=[],this.services={canvasZoom:yU,domUtils:gu,events:yF,files:yj,gradientUtils:gc,transitions:yH},this.model=new pl(this.services)}init(t,e){this.model.set({holder:t},{skipUpdate:!0}),Object.keys(this.services).forEach(t=>{let e=this.services[t];this.services[t]=new e(this.model,this.services)}),this.services.events.addEventListener(tt.Model.UPDATE,t=>{let e=!!fM(t,"detail","animate");this.update(e)}),this.model.setData(e.data),this.services.events.addEventListener(tt.Chart.RESIZE,()=>{this.update(!1)}),this.components=this.getComponents(),this.update()}getComponents(){return console.error("getComponents() method is not implemented"),[]}update(t=!0){if(!this.components)return;Object.keys(this.services).forEach(t=>{this.services[t].update()}),this.components.forEach(e=>e.render(t));let e=this.services.transitions.getPendingTransitions(),n=Object.keys(e).map(t=>e[t].end().catch(t=>t));Promise.all(n).then(()=>this.services.events.dispatchEvent(tt.Chart.RENDER_FINISHED))}destroy(){this.components.forEach(t=>t.destroy()),this.services.domUtils.getHolder().remove(),this.model.set({destroyed:!0},{skipUpdate:!0})}getChartComponents(t,e){let n=this.model.getOptions(),i=fM(n,"toolbar","enabled"),r={id:"legend",components:[new yf(this.model,this.services)],growth:tp.PREFERRED},o=fM(n,"canvasZoom","enabled");o&&!0===o&&t.push(new yg(this.model,this.services));let a=!!this.model.getOptions().title,s={id:"title",components:[new yd(this.model,this.services)],growth:tp.STRETCH},l={id:"toolbar",components:[new mF(this.model,this.services)],growth:tp.PREFERRED},u={id:"header",components:[new mj(this.model,this.services,[s,...i?[l]:[]],{direction:tf.ROW,alignItems:tg.CENTER})],growth:tp.PREFERRED},c={id:"graph-frame",components:t,growth:tp.STRETCH,renderType:fM(e,"graphFrameRenderType")||te.SVG},h=!0!==fM(e,"excludeLegend")&&!1!==n.legend.enabled,d=tf.COLUMN;if(h){let t=fM(n,"legend","position");"left"===t?(d=tf.ROW,n.legend.orientation||(n.legend.orientation=th.VERTICAL)):"right"===t?(d=tf.ROW_REVERSE,n.legend.orientation||(n.legend.orientation=th.VERTICAL)):"bottom"===t&&(d=tf.COLUMN_REVERSE)}let f={id:"spacer",components:[new mH(this.model,this.services)],growth:tp.PREFERRED},p={id:"full-frame",components:[new mj(this.model,this.services,[...h?[r]:[],...h?[f]:[],c],{direction:d})],growth:tp.STRETCH},g=[];if(a||i){g.push(u);let t={id:"spacer",components:[new mH(this.model,this.services,i?{size:15}:void 0)],growth:tp.PREFERRED};g.push(t)}return g.push(p),[new yb(this.model,this.services),new yh(this.model,this.services),new mj(this.model,this.services,g,{direction:tf.COLUMN})]}}class va extends vo{constructor(t,e){super(t,e),this.services=Object.assign(this.services,{cartesianScales:y0,curves:y1,zoom:y2}),this.model=new pu(this.services)}getAxisChartComponents(t,e){let n=this.model.getOptions(),i=fM(n,"zoomBar",tr.TOP,"enabled"),r=fM(n,"toolbar","enabled");this.services.cartesianScales.determineAxisDuality(),this.services.cartesianScales.findDomainAndRangeAxes(),this.services.cartesianScales.determineOrientation();let o=this.services.cartesianScales.getMainXAxisPosition(),a=fM(n,"axes",o,"scaleType"),s=i&&o===tr.BOTTOM&&a===tl.TIME,l=this.services.zoom.isZoomBarLocked(tr.TOP),u=!!this.model.getOptions().title,c={id:"title",components:[new yd(this.model,this.services)],growth:tp.STRETCH},h={id:"toolbar",components:[new mF(this.model,this.services)],growth:tp.PREFERRED},d={id:"header",components:[new mj(this.model,this.services,[c,...r?[h]:[]],{direction:tf.ROW,alignItems:tg.CENTER})],growth:tp.PREFERRED},f={id:"legend",components:[new yf(this.model,this.services)],growth:tp.PREFERRED};s&&!l&&t.push(new yp(this.model,this.services),new y_(this.model,this.services)),t.push(new yE(this.model,this.services)),t.push(new yw(this.model,this.services));let p={id:"graph-frame",components:t,growth:tp.STRETCH,renderType:te.SVG},g=!1!==fM(e,"legend","enabled")&&!1!==this.model.getOptions().legend.enabled,m=tf.COLUMN;if(g){let t=fM(this.model.getOptions(),"legend","position");t===tu.LEFT?(m=tf.ROW,this.model.getOptions().legend.orientation||(this.model.getOptions().legend.orientation=th.VERTICAL)):t===tu.RIGHT?(m=tf.ROW_REVERSE,this.model.getOptions().legend.orientation||(this.model.getOptions().legend.orientation=th.VERTICAL)):t===tu.BOTTOM&&(m=tf.COLUMN_REVERSE)}let y={id:"spacer",components:[new mH(this.model,this.services)],growth:tp.PREFERRED},v={id:"full-frame",components:[new mj(this.model,this.services,[...g?[f]:[],...g?[y]:[],p],{direction:m})],growth:tp.STRETCH},b={id:"zoom-bar",components:[new yx(this.model,this.services)],growth:tp.PREFERRED,renderType:te.SVG},_=[];if(u||r){_.push(d);let t={id:"spacer",components:[new mH(this.model,this.services,r?{size:15}:void 0)],growth:tp.PREFERRED};_.push(t)}return s&&_.push(b),_.push(v),[new yT(this.model,this.services),new yh(this.model,this.services),new mj(this.model,this.services,_,{direction:tf.COLUMN})]}}tT.LINE,tT.SCATTER,tT.AREA,tT.STACKED_AREA,tT.SIMPLE_BAR,tT.GROUPED_BAR,tT.STACKED_BAR;class vs extends vo{constructor(t,e){super(t,e),this.model=new pc(this.services),this.model.setOptions(fw(fE.gaugeChart,e.options)),this.init(t,e)}getComponents(){let t=[new yP(this.model,this.services)];return this.getChartComponents(t)}}class vl extends vo{constructor(t,e){var n;super(t,e),this.model=new ph(this.services);let i=dP(null!=(n=e.options.meter)&&n.proportional?dd(fE.proportionalMeterChart):dd(fE.meterChart),e.options);this.model.setOptions(i),this.init(t,e)}getComponents(){let t=[...fM(this.model.getOptions(),"meter","showLabels")?[{id:"meter-title",components:[new yk(this.model,this.services)],growth:tp.STRETCH,renderType:te.SVG},{id:"spacer",components:[new mH(this.model,this.services,{size:8})],growth:tp.STRETCH}]:[],{id:"meter-graph",components:[new yI(this.model,this.services)],growth:tp.STRETCH,renderType:te.SVG}],e=[new mj(this.model,this.services,t,{direction:tf.COLUMN})];return this.getChartComponents(e,{graphFrameRenderType:te.HTML})}}class vu extends va{constructor(t,e){super(t,e),this.model.setOptions(fw(fE.simpleBarChart,e.options)),this.init(t,e)}getComponents(){let t=[new yA(this.model,this.services),new yS(this.model,this.services),new yB(this.model,this.services),new yD(this.model,this.services),new yC(this.model,this.services,{skeleton:ty.VERT_OR_HORIZ})];return this.getAxisChartComponents(t)}}var vc={exports:{}},vh={};vc.exports=function(){if(E)return vh;E=1;var t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=w.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function o(e,o,a){var s,l={},u=null,c=null;for(s in void 0!==a&&(u=""+a),void 0!==o.key&&(u=""+o.key),void 0!==o.ref&&(c=o.ref),o)n.call(o,s)&&!r.hasOwnProperty(s)&&(l[s]=o[s]);if(e&&e.defaultProps)for(s in o=e.defaultProps)void 0===l[s]&&(l[s]=o[s]);return{$$typeof:t,type:e,key:u,ref:c,props:l,_owner:i.current}}return vh.Fragment=e,vh.jsx=o,vh.jsxs=o,vh}();var vd=vc.exports;class vf extends w.PureComponent{constructor(){super(...arguments),O(this,"chart"),O(this,"chartRef",w.createRef())}createChart(t,e,n){throw Error("Method not implemented.")}componentDidMount(){this.chartRef.current&&!this.chart&&(this.chart=this.createChart(this.chartRef.current,this.props.data,this.props.options))}componentDidUpdate(t){var e,n;this.props.data!==t.data&&(null==(e=this.chart)||e.model.setData(this.props.data)),this.props.options!==t.options&&(null==(n=this.chart)||n.model.setOptions(this.props.options))}render(){return vd.jsx("div",{ref:this.chartRef,className:"chart-holder"})}}class vp extends vf{createChart(t,e,n){return new vs(t,{data:e,options:n})}}class vg extends vf{createChart(t,e,n){return new vl(t,{data:e,options:n})}}class vm extends vf{createChart(t,e,n){return new vu(t,{data:e,options:n})}}var vy={exports:{}};(function(){var t={}.hasOwnProperty;function e(){for(var i="",r=0;r<arguments.length;r++){var o=arguments[r];o&&(i=n(i,function(i){if("string"==typeof i||"number"==typeof i)return i;if("object"!=typeof i)return"";if(Array.isArray(i))return e.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var r="";for(var o in i)t.call(i,o)&&i[o]&&(r=n(r,o));return r}(o)))}return i}function n(t,e){return e?t?t+" "+e:t+e:t}vy.exports?(e.default=e,vy.exports=e):window.classNames=e})(),vy.exports}}]);